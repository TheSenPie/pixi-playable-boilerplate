var Tiled;!function o(a,s,l){function u(e,t){if(!s[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(h)return h(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[e]={exports:{}};a[e][0].call(i.exports,function(t){return u(a[e][1][t]||t)},i,i.exports,o,a,s,l)}return s[e].exports}for(var h="function"==typeof require&&require,t=0;t<l.length;t++)u(l[t]);return u}({1:[function(t,i,o){(function(e){var t=function(){this._tweens={},this._tweensAddedDuringUpdate={}};t.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:s.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var i=this._tweens[n[r]];i&&!1===i.update(t)&&(i._isPlaying=!1,e||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var r,n,s=new t;s.Group=t,s._nextId=0,s.nextId=function(){return s._nextId++},"undefined"==typeof window&&void 0!==e&&e.hrtime?s.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?s.now=window.performance.now.bind(window.performance):void 0!==Date.now?s.now=Date.now:s.now=function(){return(new Date).getTime()},s.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=s.Easing.Linear.None,this._interpolationFunction=s.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||s,this._id=s.nextId()},s.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=t,void 0!==e&&(this._duration=e),this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?s.now()+parseFloat(t):t:s.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,r;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,r=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var i=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,r):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?i+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=i+(o-i)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}},s.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-s.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*s.Easing.Bounce.In(2*t):.5*s.Easing.Bounce.Out(2*t-1)+.5}}},s.Interpolation={Linear:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=s.Interpolation.Utils.Linear;return e<0?o(t[0],t[1],r):1<e?o(t[n],t[n-1],n-r):o(t[i],t[n<i+1?n:i+1],r-i)},Bezier:function(t,e){for(var n=0,r=t.length-1,i=Math.pow,o=s.Interpolation.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-e,r-a)*i(e,a)*t[a]*o(r,a);return n},CatmullRom:function(t,e){var n=t.length-1,r=n*e,i=Math.floor(r),o=s.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(i=Math.floor(r=n*(1+e))),o(t[(i-1+n)%n],t[i],t[(i+1)%n],t[(i+2)%n],r-i)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-r)-t[0]):1<e?t[n]-(o(t[n],t[n],t[n-1],t[n-1],r-n)-t[n]):o(t[i?i-1:0],t[i],t[n<i+1?n:i+1],t[n<i+2?n:i+2],r-i)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=s.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:(r=[1],function(t){var e=1;if(r[t])return r[t];for(var n=t;1<n;n--)e*=n;return r[t]=e}),CatmullRom:function(t,e,n,r,i){var o=.5*(n-t),a=.5*(r-e),s=i*i;return(2*e-2*n+o+a)*(i*s)+(-3*e+3*n-2*o-a)*s+o*i+e}}},n=this,"function"==typeof define&&define.amd?define([],function(){return s}):void 0!==i&&"object"==typeof o?i.exports=s:void 0!==n&&(n.TWEEN=s)}).call(this,t("_process"))},{_process:4}],2:[function(t,e,r){(function(n){!function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){var t=this||x;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||x;if(t=parseFloat(t),e.ctx||c(),void 0!==t&&0<=t&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,x.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var o=e._howls[n]._soundById(r[i]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||x;e.ctx||c(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,x.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var o=e._howls[n]._soundById(r[i]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},unload:function(){for(var t=this||x,e=t._howls.length-1;0<=e;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,c()),t},codecs:function(t){return(this||x)._codecs[t.replace(/^x-/,"")]},_setup:function(){var e=this||x;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(t){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||x,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var s=this||x,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(s._navigator&&s._navigator.userAgent);if(!s._audioUnlocked&&s.ctx&&t){s._audioUnlocked=!1,s.autoUnlock=!1,s._mobileUnloaded||44100===s.ctx.sampleRate||(s._mobileUnloaded=!0,s.unload()),s._scratchBuffer=s.ctx.createBuffer(1,1,22050);var l=function(t){for(var e=0;e<s.html5PoolSize;e++){var n=new Audio;n._unlocked=!0,s._releaseHtml5Audio(n)}for(e=0;e<s._howls.length;e++)if(!s._howls[e]._webAudio)for(var r=s._howls[e]._getSoundIds(),i=0;i<r.length;i++){var o=s._howls[e]._soundById(r[i]);o&&o._node&&!o._node._unlocked&&(o._node._unlocked=!0,o._node.load())}s._autoResume();var a=s.ctx.createBufferSource();a.buffer=s._scratchBuffer,a.connect(s.ctx.destination),void 0===a.start?a.noteOn(0):a.start(0),"function"==typeof s.ctx.resume&&s.ctx.resume(),a.onended=function(){a.disconnect(0),s._audioUnlocked=!0,document.removeEventListener("touchstart",l,!0),document.removeEventListener("touchend",l,!0),document.removeEventListener("click",l,!0);for(var t=0;t<s._howls.length;t++)s._howls[t]._emit("unlock")}};return document.addEventListener("touchstart",l,!0),document.addEventListener("touchend",l,!0),document.addEventListener("click",l,!0),s}},_obtainHtml5Audio:function(){var t=this||x;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(t){var e=this||x;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&x.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&x.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var x=new t,e=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};e.prototype={init:function(t){var e=this;return x.ctx||c(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhrWithCredentials=t.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=x.usingWebAudio&&!e._html5,void 0!==x.ctx&&x.ctx&&x.autoUnlock&&x._unlockAudio(),x._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(x.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var n=0;n<t._src.length;n++){var r,i;if(t._format&&t._format[n])r=t._format[n];else{if("string"!=typeof(i=t._src[n])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(i))||(r=/\.([^.]+)$/.exec(i.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&x.codecs(r)){e=t._src[n];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new o(t),t._webAudio&&s(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,n){var r=this,t=null;if("number"==typeof e)t=e,e=null;else{if("string"==typeof e&&"loaded"===r._state&&!r._sprite[e])return null;if(void 0===e&&(e="__default",!r._playLock)){for(var i=0,o=0;o<r._sounds.length;o++)r._sounds[o]._paused&&!r._sounds[o]._ended&&(i++,t=r._sounds[o]._id);1===i?e=null:t=null}}var a=t?r._soundById(t):r._inactiveSound();if(!a)return null;if(t&&!e&&(e=a._sprite||"__default"),"loaded"!==r._state){a._sprite=e,a._ended=!1;var s=a._id;return r._queue.push({event:"play",action:function(){r.play(s)}}),s}if(t&&!a._paused)return n||r._loadQueue("play"),a._id;r._webAudio&&x._autoResume();var l=Math.max(0,0<a._seek?a._seek:r._sprite[e][0]/1e3),u=Math.max(0,(r._sprite[e][0]+r._sprite[e][1])/1e3-l),h=1e3*u/Math.abs(a._rate),c=r._sprite[e][0]/1e3,p=(r._sprite[e][0]+r._sprite[e][1])/1e3,d=!(!a._loop&&!r._sprite[e][2]);a._sprite=e,a._ended=!1;var f=function(){a._paused=!1,a._seek=l,a._start=c,a._stop=p,a._loop=d};if(!(p<=l)){var m=a._node;if(r._webAudio){var g=function(){r._playLock=!1,f(),r._refreshBuffer(a);var t=a._muted||r._muted?0:a._volume;m.gain.setValueAtTime(t,x.ctx.currentTime),a._playStart=x.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,u):a._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,u),h!==1/0&&(r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),h)),n||setTimeout(function(){r._emit("play",a._id),r._loadQueue()},0)};"running"===x.state?g():(r._playLock=!0,r.once("resume",g),r._clearTimer(a._id))}else{var _=function(){m.currentTime=l,m.muted=a._muted||r._muted||x._muted||m.muted,m.volume=a._volume*x.volume(),m.playbackRate=a._rate;try{var t=m.play();if(t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)?(r._playLock=!0,f(),t.then(function(){r._playLock=!1,m._unlocked=!0,n||(r._emit("play",a._id),r._loadQueue())}).catch(function(){r._playLock=!1,r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0})):n||(r._playLock=!1,f(),r._emit("play",a._id),r._loadQueue()),m.playbackRate=a._rate,m.paused)return void r._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?r._endTimers[a._id]=setTimeout(r._ended.bind(r,a),h):(r._endTimers[a._id]=function(){r._ended(a),m.removeEventListener("ended",r._endTimers[a._id],!1)},m.addEventListener("ended",r._endTimers[a._id],!1))}catch(t){r._emit("playerror",a._id,t)}},v=window&&window.ejecta||!m.readyState&&x._navigator.isCocoonJS;if(3<=m.readyState||v)_();else{r._playLock=!0;var y=function(){_(),m.removeEventListener(x._canPlayEvent,y,!1)};m.addEventListener(x._canPlayEvent,y,!1),r._clearTimer(a._id)}}return a._id}r._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var i=e._soundById(n[r]);if(i&&!i._paused&&(i._seek=e.seek(n[r]),i._rateSeek=0,i._paused=!0,e._stopFade(n[r]),i._node))if(e._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),e._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||e._emit("pause",i?i._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var o=n._soundById(r[i]);o&&(o._muted=t,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,x.ctx.currentTime):o._node&&(o._node.muted=!!x._muted||t),n._emit("mute",o._id))}return n},volume:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]?0<=r._getSoundIds().indexOf(i[0])?e=parseInt(i[0],10):t=parseFloat(i[0]):2<=i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10)),!(void 0!==t&&0<=t&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var o=0;o<e.length;o++)(n=r._soundById(e[o]))&&(n._volume=t,i[2]||r._stopFade(e[o]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,x.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*x.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(t,e,n,r)}}),i;t=parseFloat(t),e=parseFloat(e),n=parseFloat(n),i.volume(t,r);for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s){if(r||i._stopFade(o[a]),i._webAudio&&!s._muted){var l=x.ctx.currentTime,u=l+n/1e3;s._volume=t,s._node.gain.setValueAtTime(t,l),s._node.gain.linearRampToValueAtTime(e,u)}i._startFadeInterval(s,t,e,n,o[a],void 0===r)}}return i},_startFadeInterval:function(e,n,r,i,t,o){var a=this,s=n,l=r-n,u=Math.abs(l/.01),h=Math.max(4,0<u?i/u:i),c=Date.now();e._fadeTo=r,e._interval=setInterval(function(){var t=(Date.now()-c)/i;c=Date.now(),s+=l*t,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,a._webAudio?e._volume=s:a.volume(s,e._id,!0),o&&(a._volume=s),(r<n&&s<=r||n<r&&r<=s)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,a.volume(r,e._id),a._emit("fade",e._id))},h)},_stopFade:function(t){var e=this,n=e._soundById(t);return n&&n._interval&&(e._webAudio&&n._node.gain.cancelScheduledValues(x.ctx.currentTime),clearInterval(n._interval),n._interval=null,e.volume(n._fadeTo,t),n._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;t=i[0],r._loop=t}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=r._getSoundIds(e),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t)&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop));return r},rate:function(){var t,e,n,r=this,i=arguments;if(0===i.length)e=r._sounds[0]._id;else if(1===i.length){0<=r._getSoundIds().indexOf(i[0])?e=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var o=0;o<e.length;o++)if(n=r._soundById(e[o])){r.playing(e[o])&&(n._rateSeek=r.seek(e[o]),n._playStart=r._webAudio?x.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,x.ctx.currentTime):n._node&&(n._node.playbackRate=t);var a=r.seek(e[o]),s=1e3*((r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-a)/Math.abs(n._rate);!r._endTimers[e[o]]&&n._paused||(r._clearTimer(e[o]),r._endTimers[e[o]]=setTimeout(r._ended.bind(r,n),s)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){0<=n._getSoundIds().indexOf(r[0])?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var i=n._soundById(e);if(i){if(!("number"==typeof t&&0<=t)){if(n._webAudio){var o=n.playing(e)?x.ctx.currentTime-i._playStart:0,a=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(a+o*Math.abs(i._rate))}return i._node.currentTime}var s=n.playing(e);s&&n.pause(e,!0),i._seek=t,i._ended=!1,n._clearTimer(e),n._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=t);var l=function(){n._emit("seek",e),s&&n.play(e,!0)};if(s&&!n._webAudio){var u=function(){n._playLock?setTimeout(u,0):l()};setTimeout(u,0)}else l()}return n},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this._duration,n=this._soundById(t);return n&&(e=this._sprite[n._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++){if(e[n]._paused||t.stop(e[n]._id),!t._webAudio)/MSIE |Trident\//.test(x._navigator&&x._navigator.userAgent)||(e[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(x._canPlayEvent,e[n]._loadFn,!1),x._releaseHtml5Audio(e[n]._node);delete e[n]._node,t._clearTimer(e[n]._id)}var r=x._howls.indexOf(t);0<=r&&x._howls.splice(r,1);var i=!0;for(n=0;n<x._howls.length;n++)if(x._howls[n]._src===t._src||0<=t._src.indexOf(x._howls[n]._src)){i=!1;break}return a&&i&&delete a[t._src],x.noAudio=!1,t._state="unloaded",t._sounds=[],t=null},on:function(t,e,n,r){var i=this["_on"+t];return"function"==typeof e&&i.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this,i=r["_on"+t],o=0;if("number"==typeof e&&(n=e,e=null),e||n)for(o=0;o<i.length;o++){var a=n===i[o].id;if(e===i[o].fn&&a||!e&&a){i.splice(o,1);break}}else if(t)r["_on"+t]=[];else{var s=Object.keys(r);for(o=0;o<s.length;o++)0===s[o].indexOf("_on")&&Array.isArray(r[s[o]])&&(r[s[o]]=[])}return r},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this,i=r["_on"+t],o=i.length-1;0<=o;o--)i[o].id&&i[o].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(r,i[o].fn),0),i[o].once&&r.off(t,i[o].fn,i[o].id));return r._loadQueue(t),r},_loadQueue:function(t){var e=this;if(0<e._queue.length){var n=e._queue[0];n.event===t&&(e._queue.shift(),e._loadQueue()),t||n.action()}return e},_ended:function(t){var e=this,n=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var r=!(!t._loop&&!e._sprite[n][2]);if(e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=x.ctx.currentTime;var i=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),i)}return e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),x._autoSuspend()),e._webAudio||r||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var n=e._soundById(t);n&&n._node&&n._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new o(t)},_drain:function(){var t=this,e=t._pool,n=0,r=0;if(!(t._sounds.length<e)){for(r=0;r<t._sounds.length;r++)t._sounds[r]._ended&&n++;for(r=t._sounds.length-1;0<=r;r--){if(n<=e)return;t._sounds[r]._ended&&(t._webAudio&&t._sounds[r]._node&&t._sounds[r]._node.disconnect(0),t._sounds.splice(r,1),n--)}}},_getSoundIds:function(t){if(void 0!==t)return[t];for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e},_refreshBuffer:function(t){return t._node.bufferSource=x.ctx.createBufferSource(),t._node.bufferSource.buffer=a[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,x.ctx.currentTime),this},_cleanBuffer:function(t){var e=x._navigator&&0<=x._navigator.vendor.indexOf("Apple");if(x._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=x._scratchBuffer}catch(t){}return t.bufferSource=null,this}};var o=function(t){this._parent=t,this.init()};o.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++x._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,n=x._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===x.ctx.createGain?x.ctx.createGainNode():x.ctx.createGain(),t._node.gain.setValueAtTime(n,x.ctx.currentTime),t._node.paused=!0,t._node.connect(x.masterGain)):(t._node=x._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(x._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=n*x.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++x._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(x._canPlayEvent,this._loadFn,!1)}};var a={},s=function(e){var t=e._src;if(a[t])return e._duration=a[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);u(r.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.withCredentials=e._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?u(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete a[t],e.load())},l(o)}},l=function(e){try{e.send()}catch(t){e.onerror()}},u=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&0<e._sounds.length?(a[e._src]=t,h(e,t)):n()};"undefined"!=typeof Promise&&1===x.ctx.decodeAudioData.length?x.ctx.decodeAudioData(t).then(r).catch(n):x.ctx.decodeAudioData(t,r,n)},h=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},c=function(){if(x.usingWebAudio){try{"undefined"!=typeof AudioContext?x.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?x.ctx=new webkitAudioContext:x.usingWebAudio=!1}catch(t){x.usingWebAudio=!1}x.ctx||(x.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(x._navigator&&x._navigator.platform),e=x._navigator&&x._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(x._navigator&&x._navigator.userAgent.toLowerCase());(x._navigator&&x._navigator.standalone&&!r||x._navigator&&!x._navigator.standalone&&!r)&&(x.usingWebAudio=!1)}x.usingWebAudio&&(x.masterGain=void 0===x.ctx.createGain?x.ctx.createGainNode():x.ctx.createGain(),x.masterGain.gain.setValueAtTime(x._muted?0:1,x.ctx.currentTime),x.masterGain.connect(x.ctx.destination)),x._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:x,Howl:e}}),void 0!==r&&(r.Howler=x,r.Howl=e),"undefined"!=typeof window?(window.HowlerGlobal=t,window.Howler=x,window.Howl=e,window.Sound=o):void 0!==n&&(n.HowlerGlobal=t,n.Howler=x,n.Howl=e,n.Sound=o)}(),function(){"use strict";var n,r,i;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var n=e._howls.length-1;0<=n;n--)e._howls[n].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,n){var r=this;return r.ctx&&r.ctx.listener?(e="number"!=typeof e?r._pos[1]:e,n="number"!=typeof n?r._pos[2]:n,"number"!=typeof t?r._pos:(r._pos=[t,e,n],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(t,e,n,r,i,o){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return e="number"!=typeof e?s[1]:e,n="number"!=typeof n?s[2]:n,r="number"!=typeof r?s[3]:r,i="number"!=typeof i?s[4]:i,o="number"!=typeof o?s[5]:o,"number"!=typeof t?s:(a._orientation=[t,e,n,r,i,o],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(n,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(t,e,n,r,i,o),a)},Howl.prototype.init=(n=Howl.prototype.init,function(t){var e=this;return e._orientation=t.orientation||[1,0,0],e._stereo=t.stereo||null,e._pos=t.pos||null,e._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},e._onstereo=t.onstereo?[{fn:t.onstereo}]:[],e._onpos=t.onpos?[{fn:t.onpos}]:[],e._onorientation=t.onorientation?[{fn:t.onorientation}]:[],n.call(this,t)}),Howl.prototype.stereo=function(t,e){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,e)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===e){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var i=n._getSoundIds(e),o=0;o<i.length;o++){var a=n._soundById(i[o]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||u(a,r),"spatial"===r?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(t,e,n,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(t,e,n,r)}}),i;if(e="number"!=typeof e?0:e,n="number"!=typeof n?-.5:n,void 0===r){if("number"!=typeof t)return i._pos;i._pos=[t,e,n]}for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s){if("number"!=typeof t)return s._pos;s._pos=[t,e,n],s._node&&(s._panner&&!s._panner.pan||u(s,"spatial"),void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setPosition(t,e,n)),i._emit("pos",s._id)}}return i},Howl.prototype.orientation=function(t,e,n,r){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(t,e,n,r)}}),i;if(e="number"!=typeof e?i._orientation[1]:e,n="number"!=typeof n?i._orientation[2]:n,void 0===r){if("number"!=typeof t)return i._orientation;i._orientation=[t,e,n]}for(var o=i._getSoundIds(r),a=0;a<o.length;a++){var s=i._soundById(o[a]);if(s){if("number"!=typeof t)return s._orientation;s._orientation=[t,e,n],s._node&&(s._panner||(s._pos||(s._pos=i._pos||[0,0,-.5]),u(s,"spatial")),void 0!==s._panner.orientationX?(s._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(e,Howler.ctx.currentTime),s._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):s._panner.setOrientation(t,e,n)),i._emit("orientation",s._id)}}return i},Howl.prototype.pannerAttr=function(){var t,e,n,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return(n=r._soundById(parseInt(i[0],10)))?n._pannerAttr:r._pannerAttr;t=i[0],void 0===e&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),r._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:r._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:r._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:r._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:r._panningModel})}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=r._getSoundIds(e),a=0;a<o.length;a++)if(n=r._soundById(o[a])){var s=n._pannerAttr;s={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:s.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:s.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:s.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:s.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:s.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:s.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:s.panningModel};var l=n._panner;l?(l.coneInnerAngle=s.coneInnerAngle,l.coneOuterAngle=s.coneOuterAngle,l.coneOuterGain=s.coneOuterGain,l.distanceModel=s.distanceModel,l.maxDistance=s.maxDistance,l.refDistance=s.refDistance,l.rolloffFactor=s.rolloffFactor,l.panningModel=s.panningModel):(n._pos||(n._pos=r._pos||[0,0,-.5]),u(n,"spatial"))}return r},Sound.prototype.init=(r=Sound.prototype.init,function(){var t=this,e=t._parent;t._orientation=e._orientation,t._stereo=e._stereo,t._pos=e._pos,t._pannerAttr=e._pannerAttr,r.call(this),t._stereo?e.stereo(t._stereo):t._pos&&e.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}),Sound.prototype.reset=(i=Sound.prototype.reset,function(){var t=this,e=t._parent;return t._orientation=e._orientation,t._stereo=e._stereo,t._pos=e._pos,t._pannerAttr=e._pannerAttr,t._stereo?e.stereo(t._stereo):t._pos?e.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,e._refreshBuffer(t)),i.call(this)});var u=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,i,o){!function(t){var e=!1;if("function"==typeof define&&define.amd&&(define(t),e=!0),"object"==typeof o&&(i.exports=t(),e=!0),!e){var n=window.Cookies,r=window.Cookies=t();r.noConflict=function(){return window.Cookies=n,r}}}(function(){function m(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}return function t(d){function f(t,e,n){var r;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=m({path:"/"},f.defaults,n)).expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*n.expires),n.expires=i}n.expires=n.expires?n.expires.toUTCString():"";try{r=JSON.stringify(e),/^[\{\[]/.test(r)&&(e=r)}catch(t){}e=d.write?d.write(e,t):encodeURIComponent(String(e)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var o="";for(var a in n)n[a]&&(o+="; "+a,!0!==n[a]&&(o+="="+n[a]));return document.cookie=t+"="+e+o}t||(r={});for(var s=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,u=0;u<s.length;u++){var h=s[u].split("="),c=h.slice(1).join("=");this.json||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var p=h[0].replace(l,decodeURIComponent);if(c=d.read?d.read(c,p):d(c,p)||c.replace(l,decodeURIComponent),this.json)try{c=JSON.parse(c)}catch(t){}if(t===p){r=c;break}t||(r[p]=c)}catch(t){}}return r}}return(f.set=f).get=function(t){return f.call(f,t)},f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))},f.defaults={},f.remove=function(t,e){f(t,"",m(e,{expires:-1}))},f.withConverter=t,f}(function(){})})},{}],4:[function(t,e,n){var r,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,h=[],c=!1,p=-1;function d(){c&&u&&(c=!1,u.length?h=u.concat(h):p=-1,h.length&&f())}function f(){if(!c){var t=l(d);c=!0;for(var e=h.length;e;){for(u=h,h=[];++p<e;)u&&u[p].run();p=-1,e=h.length}u=null,c=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new m(t,e)),1!==h.length||c||l(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],5:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(n){function t(t){var e=n.call(this)||this;return e.ticker=new PIXI.Ticker,e.stage=new PIXI.Container,e.loader=new PIXI.Loader,e.renderer=new PIXI.Renderer(t),e.renderer.plugins.interaction.moveWhenInside=!0,t.autoStart&&e.ticker.start(),e}return i(t,n),Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.size.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.size.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.renderer.screen},enumerable:!0,configurable:!0}),t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.start=function(t){this.ticker.start()},t.prototype.stop=function(){this.ticker.stop()},t.prototype.destory=function(t){void 0===t&&(t={children:!1}),this.stage.destroy(t),this.ticker.destroy(),this.renderer.destroy(!0)},t}(PIXI.utils.EventEmitter);n.Application=o},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.error=function(t,e){void 0===e&&(e=!1);var n=window.ga;n&&n("send","exception",{exDescription:t.message,exFatal:e})},t.log=function(t,e){var n=window.ga;n&&n("send","event",{eventCategory:t,eventLabel:JSON.stringify(e||"{}")})},t}();n.GA=r},{}],7:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("js-cookie")),o=t("./index"),a=t("./GA"),s=function(){function t(){this._hook={},console.warn("FakeAPI","GameAPI object not found! Used Fake API")}return t.prototype.invokeHook=function(t,e){this._hook[t]?(this._hook[t](e),console.warn("FakeAPI","Hook "+t+" executed with",e)):console.warn("FakeAPI","Hook "+t+" cant'be executed!")},t.prototype.cleanGameData=function(){i.default.set("_GameSaves_",{}),console.warn("FakeAPI","Game data was cleaned!")},t.prototype.openAllLevels=function(){var t=o.App.instance.games,e={};for(var n in t)e[n]={level:3};i.default.set("_GameSaves_",e),console.warn("FakeAPI","God Mode enabled!")},t.prototype.getGameData=function(t){var e=(i.default.getJSON("_GameSaves_")||{})[t]||{data:{}};return console.log("FakeAPI","Game requiest data:",t,e),e},t.prototype.setGameData=function(t,e){var n=i.default.getJSON("_GameSaves_")||{};return n[t]=e,i.default.set("_GameSaves_",n),console.log("FakeAPI","Game send data:",t,e),n},t.prototype.submitGameState=function(t,e){console.log("FakeAPI","Game submit Phase:",t,e)},t.prototype.registerHook=function(t,e){this._hook[t]=e,console.log("FakeAPI","Register hook of",t)},t.prototype.removeHook=function(t){this._hook[t]=void 0,console.log("FakeAPI","Remove hook of",t)},t}();n.FakeGameApi=s;var l=function(){function t(){if(this._hook={},this.api=window.InternalAPI,!this.api){var t=new Error("Illegal state, InternalAPI is missing");throw a.GA.error(t,!0),t}}return t.prototype.invokeHook=function(t,e){this._hook[t]&&this._hook[t](e)},t.prototype.getGameData=function(t){var e=this._invokeMethod("getGameData",{gameId:t,data:{}},!0);if(e&&e.gameId!==t){var n=new Error("Inlegal gameId. Expected: "+t+", got: "+e.gameId);throw a.GA.error(n,!0),n}return e?e.data:void 0},t.prototype.setGameData=function(t,e){var n=this._invokeMethod("setGameData",{gameId:t,data:e});return n?n.data:void 0},t.prototype.submitGameState=function(t,e){this._invokeMethod("submitGameState",{gameId:t,data:e})},t.prototype.registerHook=function(t,e){this._hook[t]=e},t.prototype.removeHook=function(t){this._hook[t]=void 0},t.prototype._invokeMethod=function(t,e,n){void 0===n&&(n=!1);var r=JSON.stringify(e||{});try{var i=this.api[t](r);return JSON.parse(i||"null")}catch(t){throw a.GA.error(t,!0),t}},t}();n.EmbeddedGameApi=l},{"./GA":6,"./index":13,"js-cookie":3}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("../shared/Config");n.Assets={BaseDir:r.Config.BaseResDir+"/game4",Assets:{"game-atlas":{name:"game-atlas",url:"/game4-atlas.json"},bg:{name:"bg",url:"/nature.jpg"},fg:{name:"fg",url:"/foreground.png"},player:{name:"player",url:"Player/Game Character.json"}}}},{"../shared/Config":22}],9:[function(t,e,n){"use strict";var r,i,o,a,s;Object.defineProperty(n,"__esModule",{value:!0}),n.ObjectType={ALIEN:"alien",NORMAL:"normal",BROKEN:"broken",METEOR:"meteor"},n.VARIANTS=((r={})[n.ObjectType.NORMAL]=4,r[n.ObjectType.BROKEN]=4,r[n.ObjectType.METEOR]=4,r[n.ObjectType.ALIEN]=3,r),n.GameConfig={playerSpeed:10,deltaMult:.75,speedMult:1.5,costs:(i={},i[n.ObjectType.NORMAL]=1,i[n.ObjectType.BROKEN]=-1,i[n.ObjectType.ALIEN]=-2,i[n.ObjectType.METEOR]=-3,i),levels:[{spavnDelta:1.5,catchsToWin:30,dropsToLoose:50,maxDistance:500,fallingSpeed:30,probs:(o={},o[n.ObjectType.NORMAL]=.6,o[n.ObjectType.BROKEN]=.2,o[n.ObjectType.ALIEN]=.1,o[n.ObjectType.METEOR]=.1,o)},{spavnDelta:1.25,catchsToWin:40,dropsToLoose:30,maxDistance:700,fallingSpeed:40,probs:(a={},a[n.ObjectType.NORMAL]=.5,a[n.ObjectType.BROKEN]=.3,a[n.ObjectType.ALIEN]=.1,a[n.ObjectType.METEOR]=.1,a)},{spavnDelta:1,catchsToWin:50,dropsToLoose:40,maxDistance:800,fallingSpeed:45,probs:(s={},s[n.ObjectType.NORMAL]=.5,s[n.ObjectType.BROKEN]=.3,s[n.ObjectType.ALIEN]=.15,s[n.ObjectType.METEOR]=.15,s)}]}},{}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Assets"),i=t("../shared/M2"),o=t("./GameConfig"),a=function(){function t(t,e){this._tex=t[r.Assets.Assets["game-atlas"].name].textures,this._parent=e}return t.prototype.createObject=function(t,e,n){void 0===n&&(n=1);var r=this.getRandomTexture(t),i=new PIXI.Sprite(r);return i.name=t,i.anchor.set(.5),i.scale.set(n),i.type=t,e&&(i.x=e.x,i.y=e.y),this._parent&&this._parent.addChild(i),i},t.prototype.getRandomTexture=function(t){var e=o.VARIANTS[t],n=t;e&&(n+=" "+(1+i.M2.randint(e)));return n+=".png",this._tex[n]},t}();n.ObjectBuilder=a},{"../shared/M2":25,"./Assets":8,"./GameConfig":9}],11:[function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var a,i,s=t("./Assets");(i=a=n.PlayerAnimPhase||(n.PlayerAnimPhase={})).NONE="none",i.JUMP="Jump",i.LOSE="Lose",i.WIN="Win",i.DAMAGE="Damage",i.WALK="Walk";var l=function(i){function t(t){var e=i.call(this)||this;e.safeArea=new PIXI.Rectangle(0,0,100,100),e.lockMovement=!1,e._lastAnim=a.NONE;var n=t[s.Assets.Assets.player.name].spineData,r=new PIXI.spine.Spine(n);return r.state.timeScale=1,e.anim=r,e.addChild(r),e.startHeight=e.height,e}return o(t,i),t.prototype.getSlotSprite=function(t){var e=this.anim.skeleton.findSlot(t);if(e)return e.currentSprite},Object.defineProperty(t.prototype,"face",{set:function(t){0<t?this.anim.scale.x=1:t<0&&(this.anim.scale.x=-1)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.animPhase(a.NONE),this.lockMovement=!1},t.prototype.animPhase=function(t,e,n){if(void 0===e&&(e=!1),void 0===n&&(n=1),this._lastAnim!=t){if(t==a.NONE)this.anim.state.setEmptyAnimation(0,.75);else this.anim.state.setAnimation(0,t,e).mixDuration=.5;this.anim.state.timeScale=n,this._lastAnim=t}},t.prototype.update=function(){},t.prototype.damaged=function(){this.lockMovement=!0,this.animPhase(a.DAMAGE,!1)},t.prototype.move=function(t){this.face=-t;var e=this.x+t;Math.abs(t)<1||e<this.safeArea.left||e>this.safeArea.right?this.animPhase(a.NONE,!0):this.animPhase(a.WALK,!0,4),this.x=Math.max(this.safeArea.left,Math.min(this.safeArea.right,e)),this.lockMovement},t}(PIXI.Container);n.Player=l},{"./Assets":8}],12:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=t("../shared/BaseGame"),a=t("../shared/APIData"),l=t("./Assets"),u=t("./ObjectBuider"),h=t("./GameConfig"),c=t("../shared/M2"),p=t("../shared/ui/Popup"),d=t("../shared/ui/UiManager"),f=t("../shared/CrossplatformInputHandler"),m=t("./Player"),g=t("../shared/FrontSprite"),_=t("../shared/ui/IUIListener"),v=t("../shared/Sound"),s=function(s){function t(){var t=s.call(this)||this;return t.target=new PIXI.Point,t.spawnOffset=100,t._pool=[],t._bucketPool=[],t._freeSize=0,t._stackSize=0,t._drops=0,t.catched=0,t._nextSpawnTime=-1,t.input=new f.InputHandler(!1,c.M2.mobile),t.apiData=new a.APIData("Catcher",t),t.stage=new PIXI.Container,t.physics=new PIXI.Container,t.physics.sortableChildren=!0,t.loader=new PIXI.Loader(l.Assets.BaseDir),t}return i(t,s),Object.defineProperty(t.prototype,"totatlDrops",{get:function(){return this._drops},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this.app=t,this.sounds=v.SoundGrouper.createManager("Catcher"),this.sounds.Play("main_theme2",{loop:!0,volume:.25}),this.gameState.on("enter",this.onStateEnter,this),this.lang=this.app.multilang.getTextBase("Catcher"),this.ui=this.app.uiManager,this.ui.setOptions({showArrows:!1,showProgress:!1,level:this.apiData.lastOpenedLevel,controlLayout:d.ControlsLayout.HOR,levelHint:this.lang.levels[0],progressHint:this.lang.progress[0]}),this.input.mobileControlls=this.ui.controls,this.ui.pushPopup(_.IPopup.MENU,!0,p.PopupType.START),this._res=this.loader.resources,this._spawner=new u.ObjectBuilder(this._res,this.physics);var e=c.M2.mobile?300:120;this.player=new m.Player(this._res),this.player.scale.set(1.5),this.player.safeArea=new PIXI.Rectangle(160,0,t.width-320,t.height),this.player.position.set(.5*t.width,t.height-e);var n=this.player.getSlotSprite("basket front");this.bucket=new g.FrontSprite(n),this.bucket.texture=PIXI.Texture.EMPTY,this.bucket.zIndex=99,this.bucket.sortableChildren=!0;var r=new PIXI.Sprite(n.texture);r.anchor.set(.5),r.zIndex=10,this.bucket.addChild(r);var i=new g.FrontSprite(this.player.getSlotSprite("Hand Left"));i.zIndex=100,this.physics.addChild(this.player,this.bucket,i),this.app.renderer.backgroundColor=6165;var o=new PIXI.Sprite(this._res.fg.texture);o.scale.set(t.width/o.texture.width),o.anchor.set(0,1),o.y=t.height+300-e,this.spawnOffset=t.height-o.height;var a=new PIXI.Sprite(this._res.bg.texture);a.scale.set(t.width/a.texture.width),a.anchor.set(0,1),a.y=o.y-240,this.stage.addChild(a,this.physics,o),this.app.uiManager.hint.open(this.lang.hello),s.prototype.init.call(this,t),s.prototype.start.call(this)},t.prototype.preload=function(){return this.loader.add(Object.values(l.Assets.Assets)),s.prototype.preload.call(this)},t.prototype.reset=function(){this.physics.pivot.set(0,0),this._pool.forEach(function(t){t.destroy()}),this._pool=[],this._bucketPool.forEach(function(t){t.destroy()}),this._bucketPool=[],this.player.reset(),this.player.x=.5*this.app.width,this._lastX=.5*this.app.width,this.catched=0,this._stackSize=0,this._freeSize=0,this._drops=0},t.prototype.setLevel=function(t){this.apiData.current=t,this._levelData=h.GameConfig.levels[t-1],this.fallingSpeed=this._levelData.fallingSpeed,this.reset(),this.gameState.current=o.GameState.GAME},t.prototype.reload=function(){this.setLevel(this.apiData.current)},t.prototype.popupOpened=function(t){t==_.IPopup.MENU&&this.app.uiManager.setOptions({showArrows:!1,level:this.apiData.lastOpenedLevel})},t.prototype.softPause=function(){return s.prototype.softPause.call(this)},t.prototype.spawnObject=function(t){if(!(0<this._nextSpawnTime&&t.lastTime<this._nextSpawnTime)){var e=this.catched/this._levelData.catchsToWin,n=Math.pow(h.GameConfig.deltaMult,e)*this._levelData.spavnDelta;this._nextSpawnTime=t.lastTime+1e3*n;var r=this.player.safeArea;this._lastX+=(2*Math.random()-1)*this._levelData.maxDistance,this._lastX>r.right?this._lastX=2*r.right-this._lastX:this._lastX<r.left&&(this._lastX=2*r.left-this._lastX);var i={x:this._lastX,y:200+this.spawnOffset},o=c.M2.randKey(this._levelData.probs),a=this._spawner.createObject(o,i,.75);a.type!=h.ObjectType.NORMAL&&this.sounds.Play("bad"),this._pool.push(a),this._freeSize++}},t.prototype.onStateEnter=function(t){var e=this;switch(t){case o.GameState.PRE:this.ui.setOptions({showProgress:!1,progress:0,level:this.apiData.lastOpenedLevel}),this.ui.pushPopup(_.IPopup.MENU,!0,p.PopupType.START);break;case o.GameState.GAME:this.ui.setOptions({showProgress:!0,progress:0,showArrows:c.M2.mobile,level:this.apiData.current,progressMax:this._levelData.catchsToWin}),this.ui.progress=0;break;case o.GameState.PREWIN:this.apiData.levelSucsess(),this.ui.setOptions({showProgress:!1,progress:0,showArrows:!1,level:this.apiData.lastOpenedLevel}),this.ui.pushPopup(_.IPopup.MENU,!0,p.PopupType.WIN),this.player.animPhase(m.PlayerAnimPhase.WIN,!0,1),this.gameState.current=o.GameState.WIN;break;case o.GameState.WIN:setTimeout(function(){e.gameState.current===o.GameState.WIN&&e.ui.hint.open(e.lang.endings)},1e3);break;case o.GameState.LOSE:this.apiData.levelFailed(),this.ui.setOptions({showProgress:!1,progress:0,showArrows:!1,level:this.apiData.lastOpenedLevel}),this.ui.pushPopup(_.IPopup.MENU,!0,p.PopupType.LOSE),this.player.animPhase(m.PlayerAnimPhase.LOSE,!0,1),setTimeout(function(){if(e.gameState.current===o.GameState.LOSE){var t=e.apiData.loosesAtRun%3==0&&0<e.apiData.loosesAtRun&&e.lang.falling_3times;e.ui.hint.open(t?e.lang.falling_3times:e.lang.falling,e.ui.sadNeoo)}},1e3)}},t.prototype.stop=function(){s.prototype.stop.call(this)},t.prototype.pause=function(){this.app.uiManager.onPause(),s.prototype.pause.call(this)},t.prototype.resume=function(){this.app.uiManager.onResume(),s.prototype.resume.call(this)},t.prototype.update=function(t){if(!this._isPaused&&(this.input.update(),this.flush(),this.gameState.current==o.GameState.GAME)){this.spawnObject(t);var e=this.input.axis.x*h.GameConfig.playerSpeed*t.deltaTime;this.player.move(e)}},t.prototype.flush=function(){for(var t=this._pool.length-1;0<=t;t--)this._pool[t].y>this.app.height&&this._pool.splice(t,1)[0].destroy()},t.prototype.animateDrop=function(t){this.sounds.Play("crumble"),t.destroy()},t.prototype.animateCatch=function(t){this.sounds.Play("catch"),this._pool.splice(this._pool.indexOf(t),1),this._bucketPool.push(t),this.bucket.addChild(t),t.scale.set(1),t.position.set(c.M2.rand(-40,40),c.M2.rand(-50,-80)),t.rotation=c.M2.rand(-Math.PI/6,Math.PI/6)},t.prototype.onBeginContact=function(t){if(this.gameState.current===o.GameState.GAME){var e=this.bucket.body;if(t.bodyA==e||t.bodyB==e){var n=(e==t.bodyA?t.bodyB:t.bodyA).display,r=h.GameConfig.costs[n.type];r<0?this.animateDrop(n):this.animateCatch(n),this.catched+=r,this.ui.progress=this.catched,this.catched>=this._levelData.catchsToWin?this.gameState.current=o.GameState.PREWIN:this.catched<0&&(this.gameState.current=o.GameState.LOSE)}}},t}(o.BaseGame);n.Catcher=s},{"../shared/APIData":19,"../shared/BaseGame":21,"../shared/CrossplatformInputHandler":23,"../shared/FrontSprite":24,"../shared/M2":25,"../shared/Sound":27,"../shared/ui/IUIListener":33,"../shared/ui/Popup":35,"../shared/ui/UiManager":37,"./Assets":8,"./GameConfig":9,"./ObjectBuider":10,"./Player":11}],13:[function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0}),i(t("./pixi-utils")).default();var l=i(t("@tweenjs/tween.js")),o=t("./Application"),u=t("./shared/Config"),h=t("./shared/AssetsLib"),c=t("./shared/ui/UiManager"),p=t("./GameAPI"),d=t("./shared/Multilang"),f=t("./catcher/index"),m=t("./shared/Sound"),g=function(i){function o(t){var e=this;if(!t)throw new Error("aprent element must be div!");var n=window.innerWidth/window.innerHeight,r=s({},u.Config.ReferenceSize);return n<r.width/r.height&&(r.height=r.width/n),PIXI.settings.PREFER_ENV=PIXI.ENV.WEBGL,e=i.call(this,s({autoStart:!1,powerPreference:"low-power",backgroundColor:13421772},r))||this,t.appendChild(e.view),e.lang="en_US",e.api=new p.FakeGameApi,window.GameAPI=e.api,e.uiManager=new c.UiManager(e),e.uiManager.visible=!1,e.ticker.add(e.update,e),u.Config.PausedInBackground&&(window.addEventListener("blur",function(){e.pause()}),window.addEventListener("focus",function(){e.resume()})),e.render(),window.AppInstance=e,o.instance=e}return a(o,i),o.prototype.load=function(){var t=this;this.loader.baseUrl=h.Assets.BaseDir,m.SoundGrouper.createManager("Any");var e=h.Assets.AssetsTranslated[this.lang]||{};this.loader.add(Object.values(s({},h.Assets.Assets,e))),this.loader.add("mainfest",u.Config.Translations),this.loader.load(function(){t.init()})},o.prototype.init=function(){var t=this;this.multilang=new d.Multilang(this.loader.resources.mainfest.data),this.multilang.preload(this.lang),this.lang=this.multilang._lang,this.uiManager.init(this.loader.resources),this.uiManager.visible=!1,this.stage.addChild(this.uiManager.stage),this.multilang.once("loaded",function(){t._init=!0,t.preparedStart(),t.emit("loaded")})},o.prototype.preparedStart=function(){var t=this;if(!this._init)throw Error("App can't init!");var e=new f.Catcher;e.preload().load(function(){t.start(e)})},o.prototype.start=function(t){this._currentGame=t,this.uiManager.bindListener(t),this._currentGame.init(this),this.uiManager.postInit(),this.stage.addChildAt(this._currentGame.stage,0),this.resume(),i.prototype.start.call(this)},o.prototype.stop=function(){this._currentGame&&(this.stage.removeChild(this._currentGame.stage),this.uiManager.reset(),this._currentGame.stop(),this._currentGame.sounds&&this._currentGame.sounds.Stop()),this._currentGame=void 0,i.prototype.render.call(this),i.prototype.stop.call(this)},o.prototype.pause=function(){this.ticker.stop(),this._currentGame&&this._currentGame.pause(),this.update()},o.prototype.resume=function(){this._currentGame&&(this._currentGame.resume(),i.prototype.start.call(this))},o.prototype.update=function(){l.default.update(this.ticker.lastTime),null!=this._currentGame&&this._currentGame.update(this.ticker),this.render()},o}(o.Application);n.App=g,window.GamesFromHell=g},{"./Application":5,"./GameAPI":7,"./catcher/index":12,"./pixi-utils":18,"./shared/AssetsLib":20,"./shared/Config":22,"./shared/Multilang":26,"./shared/Sound":27,"./shared/ui/UiManager":37,"@tweenjs/tween.js":1}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){PIXI.Container.prototype.getChildByPath=function(t){if(this instanceof PIXI.Container&&0!=this.children.length){for(var e=this,n=t.split("/"),r=new RegExp("(?:{{0})-?d+(?=})"),i=0,o=n;i<o.length;i++){var a=o[i];if(null==e||!(e instanceof PIXI.Container)){e=void 0;break}if(0!=a.trim().length){var s=a.match(r);if(s){var l=parseInt(s[0]);l<0&&(l+=e.children.length),e=l>=e.children.length?void 0:e.children[l]}else e=e.getChildByName(a)}}return e}},PIXI.Container.prototype.addGlobalChild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.transform.updateLocalTransform();for(var n=new PIXI.Matrix,r=this.transform.localTransform.clone().invert(),i=0;i<t.length;i++){var o=t[i];o.transform.updateLocalTransform(),n.copyFrom(r),n.append(o.localTransform),t[i].transform.setFromMatrix(n)}return this.addChild.apply(this,t)}}},{}],15:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){PIXI.DisplayObject.prototype.replaceWithTransform=function(t){t.updateTransform(),t.parent&&t.parent.addChildAt(this,t.parent.getChildIndex(t)),this.position.copy(t.position),this.scale.copy(t.scale),this.rotation=t.rotation,this.updateTransform()}}},{}],16:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(){}return e.upHandler=function(t){t.preventDefault(),e.IsKeyDown[t.keyCode]=!1,e.events.emit("keyup",t)},e.downHandler=function(t){t.preventDefault(),e.IsKeyDown[t.keyCode]=!0,e.events.emit("keydown",t)},e.focusOut=function(t){e.IsKeyDown=[]},e.BindKeyHandler=function(t){(e.latestDom=t).addEventListener("keydown",e.downHandler),t.addEventListener("keyup",e.upHandler),t.addEventListener("blur",e.focusOut)},e.ReleaseKeyHandler=function(){e.latestDom&&(e.latestDom.removeEventListener("keydown",e.downHandler),e.latestDom.removeEventListener("keyup",e.upHandler),e.latestDom.removeEventListener("blur",e.focusOut),e.latestDom=void 0),e.IsKeyDown=[],e.events.removeAllListeners()},e.IsKeyDown=[],e.events=new PIXI.utils.EventEmitter,e}();n.KeyInputHandler=r},{}],17:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){PIXI.Loader.prototype.filter=function(e){if(!e)return[];var n=this.resources,r=[];return Object.keys(n).forEach(function(t){e(n[t])&&r.push(n[t])}),r}}},{}],18:[function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var i=r(t("./ContainerExt")),o=r(t("./DisplayExt")),a=r(t("./LoaderExt"));n.default=function(){i.default(),o.default(),a.default()}},{"./ContainerExt":14,"./DisplayExt":15,"./LoaderExt":17}],19:[function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../index"),o=t("../GA"),a=function(){function t(t,e){if(this.levels=[{opened:!0,playing:0},{opened:!1,playing:0},{opened:!1,playing:0}],!i.App.instance)throw new Error("Main app must be instanced!");this._name=t,this._loosesAtRun=0,this._winsAtRun=0,this._apiBridge=i.App.instance.api,this._game=e}return t.prototype.init=function(){if(!this._inited){try{var t=this._apiBridge.getGameData(this._name);if(t=r({},{level:1,score:0},t||{}),o.GA.log(this._name,{eventAction:"getData",data:t}),t&&!t.error){if(t.data instanceof Array){for(var e=0;e<Math.min(t.data.length,this.levels.length);e++)this.levels[e].opened=t.data[e].opened,this.levels[e].playing=t.data[e].playing;return void(this._inited=!0)}for(e=0;e<this.levels.length;e++)this.levels[e].opened=t.level>=e+1,this.levels[e].playing=~~this.levels[e].opened;this.levels[t.level-1].playing=0}this._inited=!0}catch(t){o.GA.error(t,!0)}}},Object.defineProperty(t.prototype,"lastOpenedLevel",{get:function(){this.init();for(var t=0,e=0;e<this.levels.length;e++)this.levels[e].opened&&t++;return t},enumerable:!0,configurable:!0}),t.prototype.levelFailed=function(){this._loosesAtRun++,this._winsAtRun=0,this._apiBridge.setGameData(this._name,{level:this.lastOpenedLevel,score:2e3*(this.lastOpenedLevel-1),data:this.levels}),this._apiBridge.submitGameState(this._name,{type:"other",data:{reason:"fail",message:"Level failed"}})},t.prototype.levelSucsess=function(){this._loosesAtRun=0,this._winsAtRun++,this.levels[this._current].playing++,this._current+1<this.levels.length&&(this.levels[this._current+1].opened=!0),this._apiBridge.submitGameState(this._name,{type:"other",data:{reason:this._current==this.levels.length-1?"gameComplete":"success",message:"Level success"}}),this._apiBridge.setGameData(this._name,{level:this.lastOpenedLevel,score:2e3*(this.lastOpenedLevel-1),data:this.levels})},t.prototype.submitLoadingProgress=function(t,e){this._apiBridge.submitGameState(this._name,{type:"loading",progress:t,data:e})},t.prototype.submitState=function(t){this._apiBridge.submitGameState(this._name,t)},Object.defineProperty(t.prototype,"current",{get:function(){return this._current+1},set:function(t){this._current=Math.min(this.lastOpenedLevel-1,t-1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loosesAtRun",{get:function(){return this._loosesAtRun},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"winsAtRun",{get:function(){return this._winsAtRun},enumerable:!0,configurable:!0}),t}();n.APIData=a},{"../GA":6,"../index":13}],20:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./Config");n.Assets={BaseDir:r.Config.BaseResDir,Assets:{"ui-atlas":{name:"ui-atlas",url:"./ui/en_US/ui-atlas.json"},"ui-map":{name:"ui-map",url:"./ui/ui-map.json"}},AssetsTranslated:{en_US:{"ui-atlas":{name:"ui-atlas",url:"./ui/en_US/ui-atlas.json"}}}}},{"./Config":22}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,o=t("./StateBech");(i=r=n.GameState||(n.GameState={}))[i.PRE=0]="PRE",i[i.GAME=1]="GAME",i[i.PREWIN=2]="PREWIN",i[i.WIN=3]="WIN",i[i.LOSE=4]="LOSE";var a=function(){function t(){this.gameState=new o.StateBech,this._isPaused=!1}return t.prototype.init=function(t){this.app=t,this.apiData.submitState({type:"init"})},t.prototype.start=function(){this.apiData.submitState({type:"start"})},t.prototype.preload=function(){var n=this;return this.apiData&&this.loader.on("progress",function(t,e){n.apiData.submitLoadingProgress(t.progress,{name:e.name})}),this.loader},t.prototype.softPause=function(){var t=this.gameState.current==r.GAME&&!this._isPaused;return this._isPaused=!0,t},t.prototype.softResume=function(){this._isPaused&&(this._isPaused=!1)},t.prototype.pause=function(){this.softPause(),this.input&&this.input.unbindInput(),this.apiData.submitState({type:"pause"})},t.prototype.resume=function(){this.input&&this.input.bindInput(),this.apiData.submitState({type:"resume"})},t.prototype.stop=function(){for(var t in this.input&&this.input.unbindInput(),this.loader.resources){var e=this.loader.resources[t];if(e.texture&&e.texture.destroy(!0),e.textures)for(var n in e.textures)e.textures[n]&&e.textures[n].destroy(!0)}this.stage.destroy({children:!0,texture:!0,baseTexture:!0}),this.loader.reset(),this.apiData.submitState({type:"close"})},t.prototype.update=function(t){this.input&&this.input.update()},t}();n.BaseGame=a},{"./StateBech":28}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Config={ReferenceSize:{width:1080,height:1720,resolution:1},AllowAudio:!0,PausedInBackground:!0,TextStyle:{fontSize:32},BaseResDir:"./res",Translations:"/translations/manifest.json"}},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i,o,a,s=t("../pixi-utils/InputHandler");(i=r||(r={})).LEFT="left",i.RIGHT="right",i.TOP="top",i.BOTTOM="bottom",(a=o||(o={}))[a.MOBILE=0]="MOBILE",a[a.ACCEL=1]="ACCEL",a[a.KEY=2]="KEY",a[a.NONE=-1]="NONE";var l=function(){function t(t,e){void 0===t&&(t=!1),this._axis=new PIXI.Point,this.useMobile=!1,this.useAccel=!1,this._binded=!1,this._active=o.NONE,this._mobileKeysStatus={},this._latestAccelX=void 0,this._accelX=0,e=null==e?PIXI.utils.isMobile.any:e,this.useAccel=t&&e,this.useMobile=e}return t.prototype.accelIsSupported=function(){return"ondevicemotion"in window},t.prototype.bindInput=function(){this._binded||(this.useMobile?(this._bindMobile(),this.useAccel&&this._bindAccel()):this._bindKeys(),this._binded=!0,console.log("Input binded"))},t.prototype._bindMobile=function(){var n=this;if(this.mobileControlls)for(var t=function(e){var t=r.mobileControlls[e+"Button"];if(!t)return"continue";t.on("touchstart",function(){var t=e;n._mobileKeysStatus[t]=!0,n._active=o.MOBILE}),t.on("touchend",function(){var t=e;n._mobileKeysStatus[t]=!1}),t.on("touchcancel",function(){var t=e;n._mobileKeysStatus[t]=!1}),t.on("touchendoutside",function(){var t=e;n._mobileKeysStatus[t]=!1})},r=this,e=0,i=["left","right","top","bottom"];e<i.length;e++){t(i[e])}else console.warn("Mobile Controlls UI cant found\n Assign it in c `controlls` property!")},t.prototype._bindAccel=function(){if(this.accelIsSupported())return this._accelHandlerBinding=this._accelHandler.bind(this),void window.addEventListener("devicemotion",this._accelHandlerBinding);console.log("Sorry, but  device orientaon can't support on you device!")},t.prototype._bindKeys=function(){s.KeyInputHandler.BindKeyHandler(window)},t.prototype.unbindInput=function(){this._unbindMobile(),this._unbindAccel(),this._unbindKeys(),this._binded=!1},t.prototype._unbindMobile=function(){if(this.mobileControlls)for(var t=0,e=["left","right","top","bottom"];t<e.length;t++){var n=e[t],r=this.mobileControlls[n+"Button"];r&&(r.removeAllListeners("touchstart"),r.removeAllListeners("touchend"),r.removeAllListeners("touchcancel"),r.removeAllListeners("touchendoutside"),r.removeAllListeners("touchmove"))}},t.prototype._accelHandler=function(t){this.useAccel&&(this._latestAccelX=this._accelX,this._accelX=t.accelerationIncludingGravity.x,this._latestAccelX&&.25<Math.abs(this._accelX-this._latestAccelX)&&(this._active=o.ACCEL))},t.prototype._unbindAccel=function(){window.removeEventListener("devicemotion",this._accelHandlerBinding)},t.prototype._unbindKeys=function(){s.KeyInputHandler.ReleaseKeyHandler()},Object.defineProperty(t.prototype,"axis",{get:function(){return this._axis.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){return s.KeyInputHandler.IsKeyDown},enumerable:!0,configurable:!0}),t.prototype.update=function(){switch(this._axis.x=0,this._axis.y=0,this.useAccel||this.useMobile||(this._active=o.KEY),this._active){case o.MOBILE:this._axis.x=~~this._mobileKeysStatus[r.RIGHT]-~~this._mobileKeysStatus[r.LEFT],this._axis.y=~~this._mobileKeysStatus[r.BOTTOM]-~~this._mobileKeysStatus[r.TOP];break;case o.KEY:this._axis.x=~~s.KeyInputHandler.IsKeyDown[39]-~~s.KeyInputHandler.IsKeyDown[37],this._axis.y=~~s.KeyInputHandler.IsKeyDown[40]-~~s.KeyInputHandler.IsKeyDown[38];case o.ACCEL:if(Math.abs(this._accelX)<.25)return;var t=Math.max(-3,Math.min(3,this._accelX))/3;this._axis.x=-t}},t}();n.InputHandler=l},{"../pixi-utils/InputHandler":16}],24:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(r){function t(t){var e=r.call(this,t?t.texture:PIXI.Texture.EMPTY)||this;return e.proto=t,e.rememberWorldID=-1,e.tempTransform=new PIXI.Matrix,e}return i(t,r),t.prototype.updateTransform=function(){var t=this.proto,e=t.transform;if(this.rememberWorldID!==e._worldID){this.rememberWorldID=e._worldID,this.anchor.copyFrom(t.anchor);var n=this.tempTransform;n.copyFrom(this.parent.transform.worldTransform),n.invert(),n.append(e.worldTransform),this.transform.setFromMatrix(n)}r.prototype.updateTransform.call(this)},t}(PIXI.Sprite);n.FrontSprite=o},{}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function n(){}return n.randint=function(t,e){return null==e?Math.floor(n.rand(t)):Math.floor(n.rand(e-t))+t},n.rand=function(t,e){return null==e?Math.random()*t:Math.random()*(e-t)+t},Object.defineProperty(n,"mobile",{get:function(){return PIXI.utils.isMobile.any},enumerable:!0,configurable:!0}),n.randKey=function(t,e){var n=t,r=1,i=0;if(!e)for(var o in r=0,n)i<n[o]&&(i=n[o],e=o),r+=n[o];var a=Math.random()*r;for(var o in n){if(a<n[o])return o;a-=n[o]}return e},n.AngleDist=function(t,e,n){void 0===n&&(n=!0);var r=n?360:2*Math.PI,i=(e-t)%r;return 2*i%r-i},n.clamp=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),Math.max(e,Math.min(n,t))},n.Delay=function(e){return new Promise(function(t){return setTimeout(t,e)})},n}();n.M2=r},{}],26:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Config"),s=function(n){function t(t){var e=n.call(this)||this;return e.langdata={},e.manifest=t,e._lang="en_US",e.loader=new PIXI.Loader(a.Config.BaseResDir),e}return i(t,n),t.prototype.preload=function(t){var n=this;this.manifest[t]||(t="en_US");var e=this.manifest[t];this._lang=t;var r=a.Config.Translations.substr(0,a.Config.Translations.lastIndexOf("/"));this.loader.add(r+"/"+e.url).load().on("load",function(t,e){n.langdata=e.data,n.emit("loaded")})},t.prototype.getTextBase=function(t){var e=this.langdata[t]||{},n=this.langdata.ANY||{};return o({},n,e)},t.prototype.map=function(t,e,n){var r=this.getTextBase(t);if(!r)return[e];var i=r[e],o=[];if(!i)return[e];for(var a in o=i instanceof Array?i:[i],n=n||{})for(var s=0;s<o.length;s++)o[s]=o[s].replace(new RegExp("{"+a+"}","g"),""+a);return o},t}(PIXI.utils.EventEmitter);n.Multilang=s},{"./Config":22}],27:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});var a=t("./Config"),s=o(t("../sounds.json")),l=t("howler"),u=function(){function t(){}return t.createManager=function(e){var t=new h;if(this.managers[e]=t,!a.Config.AllowAudio)return console.warn("Audio disabled in Config.AllowAudio! SoundManager is blank"),t;var r=a.Config.BaseResDir;e=e||"Any";var n=s.default.list.filter(function(t){return t.split("/")[1].trim()==e}).map(function(t){var e=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".")),n=0<s.default.preloads.filter(function(t){return-1<e.indexOf(t)}).length;return{name:e,src:r+"/"+s.default.baseDir+"/"+t,preload:s.default.preloadAny||n}});return t.preload(n||[]),t},t.managers={},t}();n.SoundGrouper=u;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sounds={},t._totalsPreloads=0,t._loaded=0,t._errors=0,t}return i(t,e),t.prototype.preload=function(t){for(var e=this,n=(t.length,0),r=t;n<r.length;n++){var i=r[n],o=new l.Howl({src:i.src,preload:i.preload});i.preload&&(this._totalsPreloads++,o.on("load",function(){e._loaded++,e.emit("progress",{progress:e._loaded/e._totalsPreloads}),e._totalsPreloads==e._errors+e._loaded&&e.emit("load",e)}),o.on("loaderror",function(t){e._errors++,e.emit("loaderror",t),e._totalsPreloads==e._errors+e._loaded&&e.emit("load",e)})),this.sounds[i.name]=o}},t.prototype.Play=function(t,e){var n=this;void 0===e&&(e={}),console.log("Request sound:",t);var r=this.sounds[t];if(r){if("unloaded"==r.state())return r.load(),void r.once("load",function(){n.Play(t,e)});r.loop(e.loop),r.play(),e.fade?r.fade(0,null==e.volume?1:e.volume,1):r.volume(null==e.volume?1:e.volume)}return r},t.prototype.PlayShotAsync=function(t){var e=this.Play(t);return e?new Promise(function(t){e.once("end",function(){return t(e)})}):e},t.prototype.Stop=function(t,e){var n=this;if(void 0===e&&(e=!1),t){if(this.sounds[t])if(e){var r=this.sounds[t].volume();this.sounds[t].fade(r,0,1),setTimeout(function(){n.sounds[t].stop()},500)}else this.sounds[t].stop()}else Object.values(this.sounds).forEach(function(t){return t.stop()})},t}(PIXI.utils.EventEmitter);n.SoundManager=h},{"../sounds.json":39,"./Config":22,howler:2}],28:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(t){function e(){return t.call(this)||this}return i(e,t),e.prototype.send=function(t){this._before=this._current,this._current=t,this._current&&this.emit("leave",this._current),this.emit("enter",t)},Object.defineProperty(e.prototype,"current",{get:function(){return this._current},set:function(t){this.send(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"before",{get:function(){return this._before},enumerable:!0,configurable:!0}),e.prototype.release=function(){this.removeAllListeners()},e}(PIXI.utils.EventEmitter);n.StateBech=o},{}],29:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var p=t("./Button"),o=t("@tweenjs/tween.js"),a=t("../../index"),s=function(c){function t(t,e){void 0===e&&(e={});var n=c.call(this)||this;n.fadeDuration=250,n.buttons={},n.texts={},n._animated=!1,n.name=t.name;var r=t.getBounds();n.position.set(r.x,r.y),n.addGlobalChild.apply(n,t.children);for(var i=0,o=e.buttons||[];i<o.length;i++){var a=o[i],s=n.getChildByPath(a+"-btn"),l=n.getChildByPath(a+"-btn:disabled"),u=n.getChildByPath(a+"-btn:text");if(s){var h=new p.Button(s,l,u);h.name=a,n.buttons[a]=h,n.addChild(h)}}return t.destroy(),n.pivot.x=n.width>>1,n.pivot.y=n.height>>1,n}return i(t,c),t.prototype.open=function(t){var n=this;return void 0===t&&(t=!1),this.visible=!0,this._animated?Promise.resolve():t?(this._animated=!1,Promise.resolve()):new Promise(function(t){n._animated=!0;var e=n.y;n.y=-(n.width-n.pivot.y),new o.Tween(n).to({y:e},n.fadeDuration).onComplete(function(){t(),n._animated=!1}).start()})},t.prototype.close=function(t){var e=this;if(void 0===t&&(t=!1),this._animated)return Promise.resolve();if(t)return this.visible=!1,this._animated=!1,Promise.resolve();this._animated=!0;var n=this.y,r=a.App.instance.height+this.pivot.y;return new Promise(function(t){new o.Tween(e).to({y:r},e.fadeDuration).onComplete(function(){e.visible=!1,e.y=n,e._animated=!1,t()}).start()})},t.prototype.reset=function(){for(var t in this.close(!0),this.buttons)this.buttons[t].reset();this.interactiveChildren=!0},t}(PIXI.Container);n.AnimatedPopup=s},{"../../index":13,"./Button":30,"@tweenjs/tween.js":1}],30:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(o){function t(t,e,n){var r=o.call(this)||this;if(!t)return r;[t,e,n].forEach(function(t){t&&(t.interactive=t.buttonMode=!1)}),r.interactive=r.buttonMode=!0,r._mainSprite=t,r._disabledSprite=e,r._text=n?n.text:void 0,r._disabled=!1,r.addChild.apply(r,[t,e,n].filter(function(t){return t}));var i=r.getLocalBounds();return r.children.forEach(function(t){t.x-=i.x,t.y-=i.y}),r.x=i.x,r.y=i.y,r.disabled=!1,r.reset(),r}return i(t,o),t.prototype.on=function(t,e,n){return o.prototype.on.call(this,t,e,n),this},t.prototype.clicked=function(t){this.emit("b-click",this)},Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(t){this._disabled=t,this.interactive=this.buttonMode=!t,this._mainSprite.visible=!t,this._disabledSprite&&(this._disabledSprite.visible=t)},enumerable:!0,configurable:!0}),t.prototype.reset=function(){this.removeAllListeners(),this.on("click",this.clicked,this),this.on("tap",this.clicked,this)},t}(PIXI.Container);n.Button=o},{}],31:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(l){function t(t){var e=l.call(this)||this,n=[],r=t.getBounds();e.position.set(r.x,r.y);for(var i=0,o=["left","right","top","bottom"];i<o.length;i++){var a=o[i],s=t.getChildByPath("arrow-"+a+"-btn");s&&(s.interactive=s.buttonMode=!0,n.push(s),e[a+"Button"]=s)}return e.addGlobalChild.apply(e,n),e}return i(t,l),t.prototype.reset=function(){this.rightButton&&this.rightButton.removeAllListeners(),this.leftButton&&this.leftButton.removeAllListeners(),this.topButton&&this.topButton.removeAllListeners(),this.downButton&&this.downButton.removeAllListeners(),this.interactiveChildren=!0},t}(PIXI.Container);n.Controls=o},{}],32:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var l=t("./Button"),o=t("../Sound"),a=function(s){function t(t,e){var n=s.call(this)||this;n._storyIndex=0;var r=t.getChildByPath("hint");n.name=r.name;var i=r.getBounds();n.position.set(i.x,i.y);var o=r.height,a=new PIXI.Sprite(PIXI.Texture.WHITE);return a.tint=0,a.alpha=.5,a.width=e.width+50,a.height=e.height+50,a.y=-e.height+o,a.interactive=!0,n.addChild(a),n.addGlobalChild.apply(n,r.children),n._avatar=n.getChildByName("avatar"),n._avatar.anchor.set(0,1),n._avatarInitTex=n._avatar.texture,n._text=n.getChildByPath("text").text,n._text.style.align="left",n._next=new l.Button(n.getChildByName("next-btn")),n.addChild(n._next),n.pivot=r.pivot,r.destroy(),n.pivot.y=o,n._next.on("b-click",function(){n._nextStory()}),n.visible=!1,n}return i(t,s),t.prototype.open=function(t,e){var n=this;return this._avatar.texture=e||this._avatarInitTex,this._textData=t,this._textData&&0!=this._textData.length?(this.visible=!0,this._nextStory(),new Promise(function(t){n._comlite=t})):Promise.resolve()},t.prototype.close=function(){this._comlite&&this._comlite(),this._storyIndex=0,this._textData=[],this._comlite=void 0,this.visible=!1},t.prototype._nextStory=function(){this._storyIndex>=this._textData.length?this.close():(this._text.text=this._textData[this._storyIndex],this._storyIndex+=1,o.SoundGrouper.managers.Any.Play("stuckout"))},t}(PIXI.Container);n.Hint=a},{"../Sound":27,"./Button":30}],33:[function(t,e,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),(r=n.IPopup||(n.IPopup={}))[r.MENU=0]="MENU",r[r.PAUSE=1]="PAUSE",r[r.CLOSING=2]="CLOSING"},{}],34:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var o=function(r){function t(t){var e=this,n=t.getChildByPath("pause");return(e=r.call(this,n,{buttons:["play","reload","menu"]})||this).reloadButton=e.buttons.reload,e.menuButton=e.buttons.menu,e.playButton=e.buttons.play,e}return i(t,r),t}(t("./AnimatedPopup").AnimatedPopup);n.Pause=o},{"./AnimatedPopup":29}],35:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var p,o,d=t("./Utils"),a=t("./Button"),s=t("./AnimatedPopup");(o=p=n.PopupType||(n.PopupType={})).START="start",o.LOSE="lose",o.WIN="win";var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(a.Button);n.LevelButton=l;var u=function(c){function t(t,e){var n=this,r=d.Utils.findOn(t,"popup");(n=c.call(this,r,{buttons:["menu","level-0","level-1","level-2"]})||this).levelButtons=[];for(var i=0;i<3;i++){var o=n.buttons["level-"+i];o.icon=new PIXI.Sprite(e["cancel-btn.png"]),o.addChild(o.icon),o.icon.x=40,o.icon.y=20,n.levelButtons[i]=o}n.exitButton=n.buttons.menu;var a=[p.WIN,p.LOSE,p.START];n._titles={};for(var s=0,l=a;s<l.length;s++){var u=l[s];n._titles[u]=n.getChildByPath("title-"+u)}var h=n.getChildByPath("bg");return n.pivot.x=h.x+(h.width>>1),n.pivot.y=h.y-(h.height>>1),n}return i(t,c),t.prototype.show=function(t,e){for(var n in void 0===t&&(t=p.START),void 0===e&&(e=!1),this._titles)this._titles[n].visible=t==n;return c.prototype.open.call(this,e)},t.prototype.reset=function(){var r=this;for(var t in c.prototype.reset.call(this),this.close(!0),this.removeAllListeners(),this.buttons)this.buttons[t].reset();this.levelButtons.forEach(function(t,e){var n=e+1;t.on("b-click",function(){r.emit("level-click",n)})}),this.interactiveChildren=!0},t.prototype.setLevelStatus=function(t){for(var e=0;e<this.levelButtons.length;e++){var n=this.levelButtons[e];n.disabled=!t[e].opened,n.icon.visible=!t[e].complete&&t[e].opened}},t.prototype.applyTranslation=function(t){for(var e=0;e<3;e++){var n=this.buttons["level-"+e],r=t[e];n&&r&&(n._text.text=r)}},t}(s.AnimatedPopup);n.PopupDifficulty=u},{"./AnimatedPopup":29,"./Button":30,"./Utils":38}],36:[function(t,e,a){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(a,"__esModule",{value:!0});var s=t("./Utils");a.EXT_FONT_SETTING={dropShadow:!0,dropShadowAlpha:.4,dropShadowAngle:.4,dropShadowBlur:2,dropShadowColor:"#307a37",dropShadowDistance:4,stroke:"#307a37",strokeThickness:2};var i=function(o){function t(t){var e=o.call(this)||this;e.maxValue=100,e.minValue=0,e.maxLevels=3,e._progress=0,e.progressHint="Platform: {current}/{from} Done",e.levelHint="Level {index}/{from}";var n=s.Utils.findOn(t,"progress-bar");e.addChild.apply(e,n.children);var r=s.Utils.findOn(e,"progress-bar-text");for(var i in e._text=r.text,e._progressSprite=s.Utils.findOn(e,"slider"),e.name=n.name,e._levelText=s.Utils.findOn(e,"progress-title-text").text,a.EXT_FONT_SETTING)e._text.style[i]=a.EXT_FONT_SETTING[i],e._levelText.style[i]=a.EXT_FONT_SETTING[i];return n.destroy(),e.progress=0,e}return n(t,o),Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress},set:function(t){this._progress=Math.max(this.minValue,Math.min(t,this.maxValue)),this._progressSprite.scale.x=(this._progress-this.minValue)/(this.maxValue-this.minValue),this._text.text=this._formatText()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"levelIndex",{get:function(){return this._levelIndex},set:function(t){this._levelIndex=t;var e=this.levelHint.replace("{current}",""+t).replace("{total}",""+this.maxLevels);this._levelText.text=e},enumerable:!0,configurable:!0}),t.prototype._formatText=function(){var t=this.progressHint.replace("{current}",this._progress.toFixed(0));return t=t.replace("{total}",this.maxValue.toFixed(0))},t}(PIXI.Container);a.Progress=i},{"./Utils":38}],37:[function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=this&&this.__assign||function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0});var o,a,u=t("./Progress"),h=t("./Button"),c=t("./Popup"),p=t("../AssetsLib"),d=t("./Utils"),f=t("./Hint"),m=t("./Pause"),g=t("./AnimatedPopup"),s=t("./IUIListener"),_=t("./Controls"),v=t("../Sound");(a=o=n.ControlsLayout||(n.ControlsLayout={}))[a.NONE=0]="NONE",a[a.HOR=1]="HOR";var y={progress:0,progressMax:100,showProgress:!0,showArrows:!(a[a.FULL=2]="FULL"),level:1,levelHint:"Level {current}/{total}",progressHint:"Progress {current}/{total}",controlLayout:o.NONE};n.EXT_FONT_SETTINGS={dropShadowAlpha:.4,dropShadowAngle:.4,dropShadowBlur:2,dropShadowColor:"#260e00",dropShadowDistance:2,stroke:"#260e00"};var x=function(n){function t(t){var e=n.call(this)||this;return e.stage=new PIXI.Container,e._options=l({},y),e.fromMenu=!1,e.openedPopup=[],e.app=t,e}return i(t,n),t.prototype.init=function(t,e){e=e||y;this.app.size;var n=t["ui-atlas"].spritesheet;this.textures=n.textures,this.sadNeoo=this.textures["neeo-dialog-fail.png"],this.happyNeeo=this.textures["neeo-dialog.png"];var r=t[p.Assets.Assets["ui-map"].name].data,i=PIXI.tiled.CreateStage(n,r);this.popup=new c.PopupDifficulty(i,this.textures),this.popup.position.set(this.app.width>>1,this.app.height>>1),this.popup.visible=!1,this.popup.setLevelStatus([{opened:!0,complete:!1},{},{}]),this._progress=new u.Progress(i),this._progress.progress=50,this._progress.levelIndex=2,this._exitBtn=new h.Button(i.getChildByPath("settings/exit-btn")),this._pauseBtn=new h.Button(d.Utils.findOn(i,"settings/pause-btn"));var o=i.getChildByName("controls_hor");this._controls=new _.Controls(o),this._controls.pivot.y=this._controls.height,this._controls.position.y=this.app.height-100,this._controls.visible=!1;var a=i.getChildByName("controls_full");this._controls_full=new _.Controls(a),this._controls_full.pivot.y=this._controls_full.height,this._controls_full.position.y=this.app.height-100,this._controls_full.visible=!1,this.hint=new f.Hint(i,this.app.size),this.hint.position.y=this.app.height,this.pause=new m.Pause(i),this.pause.position.set(this.app.width>>1,this.app.height>>1),this.pause.close(!0).then();var s=i.getChildByPath("exit");this.exit=new g.AnimatedPopup(s,{buttons:["ok","cancel"]}),this.exit.position.set(this.app.width>>1,this.app.height>>1),this.exit.close(!0).then(),i.addChild(this._progress,this._pauseBtn,this._exitBtn,this._controls,this._controls_full,this.popup,this.pause,this.exit,this.hint),this.stage.addChild(i),this.setOptions(l({},e,y)),this.reset()},t.prototype.bindListener=function(t){this.reset(),this._uiListener=t},t.prototype.postInit=function(){this.popup.applyTranslation(this._uiListener.lang.levels_button)},t.prototype.update=function(t){},t.prototype.setOptions=function(t){this._options=l({},this._options,t),this.level=this._options.level,this.progress=this._options.progress,this._progress.maxValue=this._options.progressMax,this._progress.levelHint=this._options.levelHint,this._progress.progressHint=this._options.progressHint,this._progress.visible=this._options.showProgress,this._controls.visible=this._options.controlLayout==o.HOR&&this._options.showArrows,this._controls_full.visible=this._options.controlLayout==o.FULL&&this._options.showArrows,this._uiListener&&this.popup.setLevelStatus(this._uiListener.apiData.levels.map(function(t){return{opened:t.opened,complete:0<t.playing}})),this.visible=!0},t.prototype.reset=function(){var e=this;this.removeAllListeners(),this._pauseBtn.reset(),this.visible=!1,this.pause.reset(),this.popup.reset(),this.exit.reset(),this._controls.reset(),this._controls_full.reset(),this.clearPopupStack(),this.popup.exitButton.on("b-click",function(){e.controls&&(e.controls.interactiveChildren=!1),e.pause.interactiveChildren=!1,e.popup.interactiveChildren=!1,e.exit.interactiveChildren=!0,e.pushPopup(s.IPopup.CLOSING)}),this.exit.buttons.cancel.on("b-click",function(){e.controls&&(e.controls.interactiveChildren=!0),e.pause.interactiveChildren=!0,e.popup.interactiveChildren=!0,e.exit.interactiveChildren=!0,e.popPopup(!0)}),this.exit.buttons.ok.on("b-click",function(){e.app.stop()}),this._exitBtn.on("b-click",function(){if(!(0<e.openedPopup.length)){e.controls&&(e.controls.interactiveChildren=!1),e.pause.interactiveChildren=!1,e.popup.interactiveChildren=!1,e.exit.interactiveChildren=!0;var t=function(){e.controls&&(e.controls.interactiveChildren=!0),e.pause.interactiveChildren=!0,e.popup.interactiveChildren=!0,e.exit.interactiveChildren=!0,e._uiListener.softResume(),e.popPopup(!0),e.exit.buttons.cancel.off("b-click",t,e)};e.exit.buttons.cancel.on("b-click",t),e.pushPopup(s.IPopup.CLOSING),e.onPause(!0)}}),this._pauseBtn.on("b-click",function(){0==e.openedPopup.length&&e.onPause(!1)}),this.pause.playButton.on("b-click",function(){e.popPopup(!0),e._uiListener.softResume()}),this.pause.reloadButton.on("b-click",function(){e.clearPopupStack(),e._uiListener.reload(),e._uiListener.softResume()}),this.pause.menuButton.on("b-click",function(){e.setOptions({showArrows:!1,showProgress:!1}),e.pushPopup(s.IPopup.MENU,!0,c.PopupType.START)}),this.popup.on("level-click",function(t){e._uiListener.setLevel(t),e._uiListener.softResume(),e.clearPopupStack()})},t.prototype.clearPopupStack=function(){this.openedPopup.forEach(function(t){return t.close(!1)}),this.openedPopup=[]},t.prototype.popPopup=function(t){void 0===t&&(t=!0);var e=this.openedPopup.splice(-1,1)[0];e&&e.close(!t);var n=this.openedPopup[this.openedPopup.length-1];return n?n.open(!t):Promise.resolve()},t.prototype.pushPopup=function(t,e){var n=this;void 0===e&&(e=!0);for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];i&&(i==c.PopupType.LOSE?v.SoundGrouper.managers.Any.Play("lose"):i==c.PopupType.WIN&&setTimeout(function(){3==n._uiListener.apiData.current?v.SoundGrouper.managers.Any.Play("win"):v.SoundGrouper.managers.Any.Play("next_level")},0));var a=this.openedPopup[this.openedPopup.length-1];if(a&&a.close(),this._uiListener.popupOpened(t),null!=t)return t==s.IPopup.CLOSING?(this.openedPopup.push(this.exit),this.exit.open(!e)):t==s.IPopup.PAUSE?(this.openedPopup.push(this.pause),this.pause.open(!e)):t==s.IPopup.MENU?(this.openedPopup.push(this.popup),(r=this.popup).show.apply(r,(i||c.PopupType.START).concat([!e]))):void 0},t.prototype.onPause=function(t){void 0===t&&(t=!0),this.emit("soft-pause"),this._uiListener.softPause(),0==this.openedPopup.length&&this.pushPopup(s.IPopup.PAUSE,!t)},t.prototype.onResume=function(){},Object.defineProperty(t.prototype,"visible",{get:function(){return this.stage.visible},set:function(t){this.stage.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return this._progress.progress},set:function(t){this._progress.progress=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._progress.levelIndex},set:function(t){this._progress.levelIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controls",{get:function(){if(this._options.controlLayout!=o.NONE)return this._options.controlLayout==o.HOR?this._controls:this._controls_full},enumerable:!0,configurable:!0}),t}(PIXI.utils.EventEmitter);n.UiManager=x},{"../AssetsLib":20,"../Sound":27,"./AnimatedPopup":29,"./Button":30,"./Controls":31,"./Hint":32,"./IUIListener":33,"./Pause":34,"./Popup":35,"./Progress":36,"./Utils":38}],38:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){}return t.LightCopy=function(t){var e;return t instanceof PIXI.Sprite?((e=new PIXI.Sprite(t.texture)).tint=t.tint,e.anchor=t.anchor):t instanceof PIXI.Container&&(e=new PIXI.Container),this._mapTransform(t,e),e},t._mapTransform=function(t,e){t.parent&&t.parent.addChild(e),e.pivot.copyFrom(t.pivot),e.position.copyFrom(t.position),e.scale.copyFrom(t.scale),e.rotation=t.rotation,e.updateTransform()},t.findOn=function(t,e){if(t instanceof PIXI.Container&&0!=t.children.length){for(var n=t,r=e.split("/"),i=new RegExp("(?:{{0})-?d+(?=})"),o=0,a=r;o<a.length;o++){var s=a[o];if(null==n||!(n instanceof PIXI.Container)){n=void 0;break}if(0!=s.trim().length){var l=s.match(i);if(l){var u=parseInt(l[0]);u<0&&(u+=n.children.length),n=u>=n.children.length?void 0:n.children[u]}else n=n.getChildByName(s)}}return n}},t}();n.Utils=r},{}],39:[function(t,e,n){e.exports={preloadAny:!0,preloads:["main_theme"],baseDir:"/snd/",list:["/Any/lose.mp3","/Any/next_level.mp3","/Catcher/crumble.mp3","/Catcher/catch.mp3"]}},{}]},{},[13]),function(r){!function(t){function n(e,n){n.name=e.name,n.tiledId=e.id,n.width=e.width||n.width,n.height=e.height||n.height,n.rotation=(e.rotation||0)*Math.PI/180,e.x&&(n.x=e.x),e.y&&(n.y=e.y),n.visible=null==e.visible||e.visible,n.types=e.type?e.type.split(":"):[];r.Utils.Objectype(e);n.primitive=r.Primitives.BuildPrimitive(e),e.properties&&(n.alpha=e.properties.opacity||1,Object.assign(n,e.properties)),r.Config.debugContainers&&setTimeout(function(){var t=new PIXI.Graphics;t.lineStyle(2,16711680,.7).drawRect(n.x,n.y,e.width,e.height).endFill(),n instanceof PIXI.Sprite&&(t.y-=n.height),n.parent.addChild(t)},30)}t.ApplyMeta=n,t.Build=function(t){var e=void 0;return e=-1<(t.type?t.type.split(":"):[]).indexOf("mask")?new PIXI.Sprite(PIXI.Texture.WHITE):new r.TiledContainer,t.gid&&(e instanceof PIXI.Sprite?e.anchor=r.Config.defSpriteAnchor:(e.pivot=r.Config.defSpriteAnchor,e.hitArea=new PIXI.Rectangle(0,0,t.width,t.height))),n(t,e),e}}(r.ContainerBuilder||(r.ContainerBuilder={}))}(TiledOG||(TiledOG={})),function(t){PIXI.tiled=t}(TiledOG||(TiledOG={})),function(o){(o.SpriteBuilder||(o.SpriteBuilder={})).Build=function(t){return function(t){var e=new PIXI.Sprite(PIXI.Texture.EMPTY);t.fromImageLayer||(e.anchor=o.Config.defSpriteAnchor),o.ContainerBuilder.ApplyMeta(t,e);var n=t.img.objectgroup;n&&(e.primitive=o.Primitives.BuildPrimitive(n.objects[0]));var r=t.properties.hFlip,i=t.properties.vFlip;return r&&(e.scale.x*=-1,e.anchor.x=1),i&&(e.scale.y*=-1,e.anchor.y=0),e}(t)}}(TiledOG||(TiledOG={})),function(i){(i.TextBuilder||(i.TextBuilder={})).Build=function(t){return function(t){var e=new i.TiledContainer,n=new PIXI.Text(t.text.text,{wordWrap:t.text.wrap,wordWrapWidth:t.width,fill:i.Utils.HexStringToHexInt(t.text.color)||0,align:t.text.valign||"center",fontFamily:t.text.fontfamily||"Arial",fontWeight:t.text.bold?"bold":"normal",fontStyle:t.text.italic?"italic":"normal",fontSize:t.text.pixelsize||"16px"});n.name=t.name+"_Text",i.Config.roundFontAlpha&&n.texture.once("update",function(){!function(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),r=3;r<n.data.length;r+=4)n.data[r]=200<n.data[r]?255:0;e.putImageData(n,0,0)}(n.canvas),n.texture.baseTexture.update(),console.log("update")});var r=t.properties;switch(t.properties={},i.ContainerBuilder.ApplyMeta(t,e),e.pivot.set(0,0),t.text.halign){case"right":n.anchor.x=1,n.position.x=t.width;break;case"center":n.anchor.x=.5,n.position.x=.5*t.width;break;default:n.anchor.x=0,n.position.x=0}switch(t.text.valign){case"bottom":n.anchor.y=1,n.position.y=t.height;break;case"center":n.anchor.y=.5,n.position.y=.5*t.height;break;default:n.anchor.y=0,n.position.y=0}return r&&(n.style.stroke=i.Utils.HexStringToHexInt(t.properties.strokeColor)||0,n.style.strokeThickness=t.properties.strokeThickness||0,n.style.padding=t.properties.fontPadding||0,Object.assign(n,r)),e.addChild(n),e.text=n,e}(t)}}(TiledOG||(TiledOG={})),function(t){var e=function(){function t(t){var e=this;this.sheets=[],this.images={},t&&t.forEach(function(t){e.add(t)})}return t.prototype.add=function(t){if(!t)throw"Sheet can't be undefined";this.sheets.push(t)},t.prototype.addTexture=function(t,e){this.images[e]=t},Object.defineProperty(t.prototype,"textures",{get:function(){for(var t={},e=0,n=this.sheets;e<n.length;e++){var r=n[e];Object.assign(t,r.textures)}return Object.assign(t,this.images),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animations",{get:function(){for(var t={},e=0,n=this.sheets;e<n.length;e++){var r=n[e];Object.assign(t,r.animations)}return t},enumerable:!0,configurable:!0}),t}();t.MultiSpritesheet=e}(Tiled||(Tiled={}));var TiledOG,__extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){var e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layerHeight=0,t.layerWidth=0,t}return __extends(t,e),t}(PIXI.Container);t.TiledContainer=e}(TiledOG||(TiledOG={})),function(y){var x=!0;function b(t){var e={};if(t.properties)if(t.properties instanceof Array)for(var n=0,r=t.properties;n<r.length;n++){var i=r[n],o=i.value;"color"==i.type&&(o=y.Utils.HexStringToHexInt(o)),e[i.name]=o}else e=t.properties;if(t.gid){var a=t.gid,s=1073741824&a,l=2147483648&a,u=536870912&a;e.vFlip=s,e.hFlip=l,e.dFlip=u;var h=536870911&a;t.gid=h}t.properties=e}function w(t,e,n){for(var r=void 0,i=0;i<t.length;i++)t[i].firstgid<=n&&(r=t[i]);if(!r)return console.log("Image with gid:"+n+" not found!"),null;var o=n-r.firstgid,a=r.tiles.filter(function(t){return t.id==o})[0],s=Object.assign({},a);return s?(s.image=e+s.image,s):(console.log("Load res MISSED gid:"+o),null)}function r(o,a){var s={};if((s=o instanceof PIXI.LoaderResource?o.data:a)&&"map"==s.type){x&&(console.log("Tiled OG importer!\n eXponenta {rondo.devil[a]gmail.com}"),x=!1);var t=null!=y.Config.usePixiDisplay&&y.Config.usePixiDisplay&&null!=PIXI.display,e=t?PIXI.display.Layer:{},n=t?PIXI.display.Group:{},l=(t&&PIXI.display.Stage,new y.TiledContainer),r=new RegExp(/^.*[\\\/]/);l.layerHeight=s.height,l.layerWidth=s.width;var u="";if(o instanceof PIXI.LoaderResource&&(l.name=o.url.replace(r,"").split(".")[0],u=(u=o.url.replace(a.baseUrl,"")).match(r)[0]),s.layers){var i=0;t&&(s.layers=s.layers.reverse());for(var h=0,c=s.layers;h<c.length;h++){var p=c[h];if("objectgroup"===p.type||"imagelayer"===p.type){b(p);var d=p.properties;if(d.ignore||d.ignoreLoad)console.log("OGParser: ignore loading layer:"+p.name);else{var f=t?new e(new n(void 0!==d.zOrder?d.zOrder:i,!0)):new y.TiledContainer;if(i++,f.tiledId=p.id,f.name=p.name,l.layers={},(l.layers[p.name]=f).visible=p.visible,f.position.set(p.x,p.y),f.alpha=p.opacity||1,y.ContainerBuilder.ApplyMeta(p,f),l.addChild(f),"imagelayer"==p.type&&(p.objects=[{img:{image:u+p.image},gid:123456789,name:p.name,x:p.x+p.offsetx,y:p.y+p.offsety,fromImageLayer:!0,properties:p.properties}]),!p.objects)return;for(var m=0,g=function(e){if(b(e),e.properties.ignore)return"continue";var t=null;switch(y.Utils.Objectype(e)){case y.Utils.TiledObjectType.IMAGE:if(!e.fromImageLayer){var n=w(s.tilesets,u,e.gid);if(!n)return"continue";e.img=n}var r=t=y.SpriteBuilder.Build(e),i=void 0;if(a instanceof PIXI.Loader?i=a.resources[e.img.image]:o instanceof PIXI.Spritesheet&&(i=o.textures[e.img.image]),i)i instanceof PIXI.LoaderResource?i.isComplete?(r.texture=i.texture,e.fromImageLayer&&r.scale.set(1)):i.onAfterMiddleware.once(function(t){r.texture=i.texture,e.fromImageLayer&&r.scale.set(1)}):i&&(r.texture=i,e.fromImageLayer&&r.scale.set(1));else{if(!(a instanceof PIXI.Loader))return"continue";a.add(e.img.image,{parentResource:o},function(){var t=a.resources[e.img.image].texture;r.texture=t,e.fromImageLayer&&r.scale.set(1)})}break;case y.Utils.TiledObjectType.TEXT:t=y.TextBuilder.Build(e);break;default:t=y.ContainerBuilder.Build(e)}y.Config.usePixiDisplay?(t.parentGroup=f.group,l.addChildAt(t,m)):f.addChildAt(t,m),m++},_=0,v=p.objects;_<v.length;_++){g(v[_])}}}else console.warn("OGParser support only OBJECT or IMAGE layes!!")}}return l}}y.CreateStage=r,y.Parser={Parse:function(t,e){var n=r(t,this);t.stage=n,e()},use:function(t,e){y.Parser.Parse.call(this,t,e)},add:function(){console.log("Now you use Tiled!")}}}(TiledOG||(TiledOG={})),function(l){!function(t){var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="",t.types=[],t.visible=!0,t}return __extends(t,e),t}(PIXI.Rectangle);t.TiledRect=i;var e=function(r){function t(t,e){var n=r.call(this,t,e)||this;return n.name="",n.types=[],n.visible=!0,n}return __extends(t,r),t}(PIXI.Point);t.TiledPoint=e;var o=function(n){function t(t){var e=n.call(this,t)||this;return e.name="",e.types=[],e.visible=!0,e._x=0,e._y=0,e}return __extends(t,n),Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){var e=t-this._x;this._x=t;for(var n=0;n<this.points.length;n+=2)this.points[n]+=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){var e=t-this._y;this._y=t;for(var n=1;n<this.points.length;n+=2)this.points[n]+=e},enumerable:!0,configurable:!0}),t.prototype.getBounds=function(){for(var t=new PIXI.Rectangle,e=this._x,n=this._y,r=0;r<this.points.length;r+=2){var i=this.points[r],o=this.points[r+1];t.x=i<t.x?i:t.x,t.y=o<t.y?o:t.y,e=e<i?i:e,n=n<o?o:n}return t.width=e-t.x,t.height=n-t.y,t},Object.defineProperty(t.prototype,"width",{get:function(){return this.getBounds().width},set:function(t){for(var e=t/this.width,n=0;n<this.points.length;n+=2){var r=(this.points[n]-this._x)*e;this.points[n]=this._x+r}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getBounds().height},set:function(t){for(var e=t/this.height,n=1;n<this.points.length;n+=2){var r=(this.points[n]-this._y)*e;this.points[n]=this._y+r}},enumerable:!0,configurable:!0}),t}(PIXI.Polygon);t.TiledPolygon=o;var a=function(t){this.name="",this.types=[],this.visible=!0,this.points=[],this.points=t.slice()};t.TiledPolypine=a;var s=function(o){function t(t,e,n,r){var i=o.call(this,t,e,n,r)||this;return i.name="",i.types=[],i.visible=!0,i}return __extends(t,o),t}(PIXI.Ellipse);t.TiledEllipse=s,t.BuildPrimitive=function(e){if(e){var t=void 0,n=l.Utils.Objectype(e);switch(e.x=e.x||0,e.y=e.y||0,n){case l.Utils.TiledObjectType.ELLIPSE:t=new s(e.x+.5*e.width,e.y+.5*e.height,.5*e.width,.5*e.height);break;case l.Utils.TiledObjectType.POLYGON:var r=e.polygon.map(function(t){return new PIXI.Point(t.x+e.x,t.y+e.y)});t=new o(r);break;case l.Utils.TiledObjectType.POLYLINE:r=e.polygon.map(function(t){return new PIXI.Point(t.x+e.x,t.y+e.y)}),t=new a(r);break;default:t=new i(e.x,e.y,e.width,e.height)}return t.types=e.type?e.type.split(":"):[],t.visible=e.visible,t.name=e.name,t}}}(l.Primitives||(l.Primitives={}))}(TiledOG||(TiledOG={})),function(t){var e,n,r;(e=t.Utils||(t.Utils={})).HexStringToHexInt=function(t){if(!t)return 0;if("number"==typeof t)return t;t=7<t.length?t.substr(3,6):t.substr(1,6);try{return parseInt(t,16)}catch(t){return console.warn("Color parse error:",t.message),0}},e.HexStringToAlpha=function(t){if(!t)return 1;if("number"==typeof t)return t;if(t.length<=7)return 1;try{return parseInt(t.substr(1,2),16)/255}catch(t){return console.warn("Alpha parse error:",t.message),1}},(r=n=e.TiledObjectType||(e.TiledObjectType={}))[r.DEFAULT=0]="DEFAULT",r[r.POINT=1]="POINT",r[r.POLYGON=2]="POLYGON",r[r.POLYLINE=3]="POLYLINE",r[r.ELLIPSE=4]="ELLIPSE",r[r.TEXT=5]="TEXT",r[r.IMAGE=6]="IMAGE",e.Objectype=function(t){return t.properties&&t.properties.container?n.DEFAULT:t.gid||t.image?n.IMAGE:null!=t.text?n.TEXT:t.point?n.POINT:t.polygon?n.POLYGON:t.polyline?n.POLYLINE:t.ellipse?n.ELLIPSE:n.DEFAULT}}(TiledOG||(TiledOG={})),function(e){e.Config={defSpriteAnchor:new PIXI.Point(0,1),debugContainers:!1,usePixiDisplay:!1,roundFontAlpha:!1},e.Builders=[e.ContainerBuilder.Build,e.SpriteBuilder.Build,e.TextBuilder.Build],e.InjectToPixi=function(t){void 0===t&&(t=void 0),t&&(e.Config.defSpriteAnchor=t.defSpriteAnchor||e.Config.defSpriteAnchor,e.Config.debugContainers=null!=t.debugContainers?t.debugContainers:e.Config.debugContainers,e.Config.usePixiDisplay=null!=t.usePixiDisplay?t.usePixiDisplay:e.Config.usePixiDisplay,e.Config.roundFontAlpha=null!=t.roundFontAlpha?t.roundFontAlpha:e.Config.roundFontAlpha),PIXI.Loader.registerPlugin(e.Parser)}}(TiledOG||(TiledOG={}));var pixi_spine;__extends=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(t){!function(D){var N,t,_,e,r,n,L=function(){function t(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=n}return t.prototype.apply=function(t,e,n,r,i,o,a,s){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,0<e&&(e%=this.duration));for(var l=this.timelines,u=0,h=l.length;u<h;u++)l[u].apply(t,e,n,i,o,a,s)},t.binarySearch=function(t,e,n){void 0===n&&(n=1);var r=0,i=t.length/n-2;if(0==i)return n;for(var o=i>>>1;;){if(t[(o+1)*n]<=e?r=o+1:i=o,r==i)return(r+1)*n;o=r+i>>>1}},t.linearSearch=function(t,e,n){for(var r=0,i=t.length-n;r<=i;r+=n)if(t[r]>e)return r;return-1},t}();D.Animation=L,(t=N=D.MixPose||(D.MixPose={}))[t.setup=0]="setup",t[t.current=1]="current",t[t.currentLayered=2]="currentLayered",(e=_=D.MixDirection||(D.MixDirection={}))[e.in=0]="in",e[e.out=1]="out",(n=r=D.TimelineType||(D.TimelineType={}))[n.rotate=0]="rotate",n[n.translate=1]="translate",n[n.scale=2]="scale",n[n.shear=3]="shear",n[n.attachment=4]="attachment",n[n.color=5]="color",n[n.deform=6]="deform",n[n.event=7]="event",n[n.drawOrder=8]="drawOrder",n[n.ikConstraint=9]="ikConstraint",n[n.transformConstraint=10]="transformConstraint",n[n.pathConstraintPosition=11]="pathConstraintPosition",n[n.pathConstraintSpacing=12]="pathConstraintSpacing",n[n.pathConstraintMix=13]="pathConstraintMix",n[n.twoColor=14]="twoColor";var i=function(){function v(t){if(t<=0)throw new Error("frameCount must be > 0: "+t);this.curves=D.Utils.newFloatArray((t-1)*v.BEZIER_SIZE)}return v.prototype.getFrameCount=function(){return this.curves.length/v.BEZIER_SIZE+1},v.prototype.setLinear=function(t){this.curves[t*v.BEZIER_SIZE]=v.LINEAR},v.prototype.setStepped=function(t){this.curves[t*v.BEZIER_SIZE]=v.STEPPED},v.prototype.getCurveType=function(t){var e=t*v.BEZIER_SIZE;if(e==this.curves.length)return v.LINEAR;var n=this.curves[e];return n==v.LINEAR?v.LINEAR:n==v.STEPPED?v.STEPPED:v.BEZIER},v.prototype.setCurve=function(t,e,n,r,i){var o=.03*(2*-e+r),a=.03*(2*-n+i),s=.006*(3*(e-r)+1),l=.006*(3*(n-i)+1),u=2*o+s,h=2*a+l,c=.3*e+o+.16666667*s,p=.3*n+a+.16666667*l,d=t*v.BEZIER_SIZE,f=this.curves;f[d++]=v.BEZIER;for(var m=c,g=p,_=d+v.BEZIER_SIZE-1;d<_;d+=2)f[d]=m,f[d+1]=g,c+=u,p+=h,u+=s,h+=l,m+=c,g+=p},v.prototype.getCurvePercent=function(t,e){e=D.MathUtils.clamp(e,0,1);var n=this.curves,r=t*v.BEZIER_SIZE,i=n[r];if(i==v.LINEAR)return e;if(i==v.STEPPED)return 0;for(var o=0,a=++r,s=r+v.BEZIER_SIZE-1;r<s;r+=2)if(e<=(o=n[r])){var l=void 0,u=void 0;return(u=r==a?l=0:(l=n[r-2],n[r-1]))+(n[r+1]-u)*(e-l)/(o-l)}var h=n[r-1];return h+(1-h)*(e-o)/(1-o)},v.LINEAR=0,v.STEPPED=1,v.BEZIER=2,v.BEZIER_SIZE=19,v}(),o=function(n){function g(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t<<1),e}return __extends(g,n),g.prototype.getPropertyId=function(){return(r.rotate<<24)+this.boneIndex},g.prototype.setFrame=function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+g.ROTATION]=n},g.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(o){case N.setup:return void(l.rotation=l.data.rotation);case N.current:var u=l.data.rotation-l.rotation;u-=360*(16384-(16384.499999999996-u/360|0)),l.rotation+=u*i}else if(n>=s[s.length-g.ENTRIES])if(o==N.setup)l.rotation=l.data.rotation+s[s.length+g.PREV_ROTATION]*i;else{var h=l.data.rotation+s[s.length+g.PREV_ROTATION]-l.rotation;h-=360*(16384-(16384.499999999996-h/360|0)),l.rotation+=h*i}else{var c=L.binarySearch(s,n,g.ENTRIES),p=s[c+g.PREV_ROTATION],d=s[c],f=this.getCurvePercent((c>>1)-1,1-(n-d)/(s[c+g.PREV_TIME]-d)),m=s[c+g.ROTATION]-p;m=p+(m-=360*(16384-(16384.499999999996-m/360|0)))*f,o==N.setup?(m-=360*(16384-(16384.499999999996-m/360|0)),l.rotation=l.data.rotation+m*i):(m=l.data.rotation+m-l.rotation,m-=360*(16384-(16384.499999999996-m/360|0)),l.rotation+=m*i)}},g.ENTRIES=2,g.PREV_TIME=-2,g.PREV_ROTATION=-1,g.ROTATION=1,g}(D.CurveTimeline=i);D.RotateTimeline=o;var a=function(n){function f(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*f.ENTRIES),e}return __extends(f,n),f.prototype.getPropertyId=function(){return(r.translate<<24)+this.boneIndex},f.prototype.setFrame=function(t,e,n,r){t*=f.ENTRIES,this.frames[t]=e,this.frames[t+f.X]=n,this.frames[t+f.Y]=r},f.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(o){case N.setup:return l.x=l.data.x,void(l.y=l.data.y);case N.current:l.x+=(l.data.x-l.x)*i,l.y+=(l.data.y-l.y)*i}else{var u=0,h=0;if(n>=s[s.length-f.ENTRIES])u=s[s.length+f.PREV_X],h=s[s.length+f.PREV_Y];else{var c=L.binarySearch(s,n,f.ENTRIES);u=s[c+f.PREV_X],h=s[c+f.PREV_Y];var p=s[c],d=this.getCurvePercent(c/f.ENTRIES-1,1-(n-p)/(s[c+f.PREV_TIME]-p));u+=(s[c+f.X]-u)*d,h+=(s[c+f.Y]-h)*d}o==N.setup?(l.x=l.data.x+u*i,l.y=l.data.y+h*i):(l.x+=(l.data.x+u-l.x)*i,l.y+=(l.data.y+h-l.y)*i)}},f.ENTRIES=3,f.PREV_TIME=-3,f.PREV_X=-2,f.PREV_Y=-1,f.X=1,f.Y=2,f}(i),s=function(e){function g(t){return e.call(this,t)||this}return __extends(g,e),g.prototype.getPropertyId=function(){return(r.scale<<24)+this.boneIndex},g.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(o){case N.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case N.current:l.scaleX+=(l.data.scaleX-l.scaleX)*i,l.scaleY+=(l.data.scaleY-l.scaleY)*i}else{var u=0,h=0;if(n>=s[s.length-g.ENTRIES])u=s[s.length+g.PREV_X]*l.data.scaleX,h=s[s.length+g.PREV_Y]*l.data.scaleY;else{var c=L.binarySearch(s,n,g.ENTRIES);u=s[c+g.PREV_X],h=s[c+g.PREV_Y];var p=s[c],d=this.getCurvePercent(c/g.ENTRIES-1,1-(n-p)/(s[c+g.PREV_TIME]-p));u=(u+(s[c+g.X]-u)*d)*l.data.scaleX,h=(h+(s[c+g.Y]-h)*d)*l.data.scaleY}if(1==i)l.scaleX=u,l.scaleY=h;else{var f=0,m=0;m=o==N.setup?(f=l.data.scaleX,l.data.scaleY):(f=l.scaleX,l.scaleY),a==_.out?(u=Math.abs(u)*D.MathUtils.signum(f),h=Math.abs(h)*D.MathUtils.signum(m)):(f=Math.abs(f)*D.MathUtils.signum(u),m=Math.abs(m)*D.MathUtils.signum(h)),l.scaleX=f+(u-f)*i,l.scaleY=m+(h-m)*i}}},g}(D.TranslateTimeline=a);D.ScaleTimeline=s;var l=function(e){function f(t){return e.call(this,t)||this}return __extends(f,e),f.prototype.getPropertyId=function(){return(r.shear<<24)+this.boneIndex},f.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.bones[this.boneIndex];if(n<s[0])switch(o){case N.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case N.current:l.shearX+=(l.data.shearX-l.shearX)*i,l.shearY+=(l.data.shearY-l.shearY)*i}else{var u=0,h=0;if(n>=s[s.length-f.ENTRIES])u=s[s.length+f.PREV_X],h=s[s.length+f.PREV_Y];else{var c=L.binarySearch(s,n,f.ENTRIES);u=s[c+f.PREV_X],h=s[c+f.PREV_Y];var p=s[c],d=this.getCurvePercent(c/f.ENTRIES-1,1-(n-p)/(s[c+f.PREV_TIME]-p));u+=(s[c+f.X]-u)*d,h+=(s[c+f.Y]-h)*d}o==N.setup?(l.shearX=l.data.shearX+u*i,l.shearY=l.data.shearY+h*i):(l.shearX+=(l.data.shearX+u-l.shearX)*i,l.shearY+=(l.data.shearY+h-l.shearY)*i)}},f}(a);D.ShearTimeline=l;var u=function(n){function y(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*y.ENTRIES),e}return __extends(y,n),y.prototype.getPropertyId=function(){return(r.color<<24)+this.slotIndex},y.prototype.setFrame=function(t,e,n,r,i,o){t*=y.ENTRIES,this.frames[t]=e,this.frames[t+y.R]=n,this.frames[t+y.G]=r,this.frames[t+y.B]=i,this.frames[t+y.A]=o},y.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex],l=this.frames;if(n<l[0])switch(o){case N.setup:return void s.color.setFromColor(s.data.color);case N.current:var u=s.color,h=s.data.color;u.add((h.r-u.r)*i,(h.g-u.g)*i,(h.b-u.b)*i,(h.a-u.a)*i)}else{var c=0,p=0,d=0,f=0;if(n>=l[l.length-y.ENTRIES]){var m=l.length;c=l[m+y.PREV_R],p=l[m+y.PREV_G],d=l[m+y.PREV_B],f=l[m+y.PREV_A]}else{var g=L.binarySearch(l,n,y.ENTRIES);c=l[g+y.PREV_R],p=l[g+y.PREV_G],d=l[g+y.PREV_B],f=l[g+y.PREV_A];var _=l[g],v=this.getCurvePercent(g/y.ENTRIES-1,1-(n-_)/(l[g+y.PREV_TIME]-_));c+=(l[g+y.R]-c)*v,p+=(l[g+y.G]-p)*v,d+=(l[g+y.B]-d)*v,f+=(l[g+y.A]-f)*v}if(1==i)s.color.set(c,p,d,f);else{u=s.color;o==N.setup&&u.setFromColor(s.data.color),u.add((c-u.r)*i,(p-u.g)*i,(d-u.b)*i,(f-u.a)*i)}}},y.ENTRIES=5,y.PREV_TIME=-5,y.PREV_R=-4,y.PREV_G=-3,y.PREV_B=-2,y.PREV_A=-1,y.R=1,y.G=2,y.B=3,y.A=4,y}(i);D.ColorTimeline=u;var h=function(n){function T(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*T.ENTRIES),e}return __extends(T,n),T.prototype.getPropertyId=function(){return(r.twoColor<<24)+this.slotIndex},T.prototype.setFrame=function(t,e,n,r,i,o,a,s,l){t*=T.ENTRIES,this.frames[t]=e,this.frames[t+T.R]=n,this.frames[t+T.G]=r,this.frames[t+T.B]=i,this.frames[t+T.A]=o,this.frames[t+T.R2]=a,this.frames[t+T.G2]=s,this.frames[t+T.B2]=l},T.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex],l=this.frames;if(n<l[0])switch(o){case N.setup:return s.color.setFromColor(s.data.color),void s.darkColor.setFromColor(s.data.darkColor);case N.current:var u=s.color,h=s.darkColor,c=s.data.color,p=s.data.darkColor;u.add((c.r-u.r)*i,(c.g-u.g)*i,(c.b-u.b)*i,(c.a-u.a)*i),h.add((p.r-h.r)*i,(p.g-h.g)*i,(p.b-h.b)*i,0)}else{var d=0,f=0,m=0,g=0,_=0,v=0,y=0;if(n>=l[l.length-T.ENTRIES]){var x=l.length;d=l[x+T.PREV_R],f=l[x+T.PREV_G],m=l[x+T.PREV_B],g=l[x+T.PREV_A],_=l[x+T.PREV_R2],v=l[x+T.PREV_G2],y=l[x+T.PREV_B2]}else{var b=L.binarySearch(l,n,T.ENTRIES);d=l[b+T.PREV_R],f=l[b+T.PREV_G],m=l[b+T.PREV_B],g=l[b+T.PREV_A],_=l[b+T.PREV_R2],v=l[b+T.PREV_G2],y=l[b+T.PREV_B2];var w=l[b],A=this.getCurvePercent(b/T.ENTRIES-1,1-(n-w)/(l[b+T.PREV_TIME]-w));d+=(l[b+T.R]-d)*A,f+=(l[b+T.G]-f)*A,m+=(l[b+T.B]-m)*A,g+=(l[b+T.A]-g)*A,_+=(l[b+T.R2]-_)*A,v+=(l[b+T.G2]-v)*A,y+=(l[b+T.B2]-y)*A}if(1==i)s.color.set(d,f,m,g),s.darkColor.set(_,v,y,1);else{u=s.color,h=s.darkColor;o==N.setup&&(u.setFromColor(s.data.color),h.setFromColor(s.data.darkColor)),u.add((d-u.r)*i,(f-u.g)*i,(m-u.b)*i,(g-u.a)*i),h.add((_-h.r)*i,(v-h.g)*i,(y-h.b)*i,0)}}},T.ENTRIES=8,T.PREV_TIME=-8,T.PREV_R=-7,T.PREV_G=-6,T.PREV_B=-5,T.PREV_A=-4,T.PREV_R2=-3,T.PREV_G2=-2,T.PREV_B2=-1,T.R=1,T.G=2,T.B=3,T.A=4,T.R2=5,T.G2=6,T.B2=7,T}(i);D.TwoColorTimeline=h;var c=function(){function t(t){this.frames=D.Utils.newFloatArray(t),this.attachmentNames=new Array(t)}return t.prototype.getPropertyId=function(){return(r.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},t.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(a!=_.out||o!=N.setup){var l=this.frames;if(n<l[0]){if(o==N.setup){var u=s.data.attachmentName;s.setAttachment(null==u?null:t.getAttachment(this.slotIndex,u))}}else{var h=0;h=n>=l[l.length-1]?l.length-1:L.binarySearch(l,n,1)-1;var c=this.attachmentNames[h];t.slots[this.slotIndex].setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}}else{var p=s.data.attachmentName;s.setAttachment(null==p?null:t.getAttachment(this.slotIndex,p))}},t}();D.AttachmentTimeline=c;var V=null,p=function(n){function t(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t),e.frameVertices=new Array(t),null==V&&(V=D.Utils.newFloatArray(64)),e}return __extends(t,n),t.prototype.getPropertyId=function(){return(r.deform<<27)+ +this.attachment.id+this.slotIndex},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},t.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex],l=s.getAttachment();if(l instanceof D.VertexAttachment&&l.applyDeform(this.attachment)){var u=s.attachmentVertices,h=this.frameVertices,c=h[0].length,p=D.Utils.setArraySize(u,c),d=this.frames;if(n<d[0]){var f=l;switch(o){case N.setup:var m=void 0;return null==f.bones?m=f.vertices:(m=V).length<c&&(V=m=D.Utils.newFloatArray(c)),void D.Utils.arrayCopy(m,0,p,0,c);case N.current:if(1==i)break;if(null==f.bones)for(var g=f.vertices,_=0;_<c;_++)p[_]+=(g[_]-p[_])*i;else{i=1-i;for(var v=0;v<c;v++)p[v]*=i}}}else if(n>=d[d.length-1]){var y=h[d.length-1];if(1==i)D.Utils.arrayCopy(y,0,p,0,c);else if(o==N.setup){if(null==(f=l).bones){g=f.vertices;for(var x=0;x<c;x++){var b=g[x];p[x]=b+(y[x]-b)*i}}else for(var w=0;w<c;w++)p[w]=y[w]*i}else for(var A=0;A<c;A++)p[A]+=(y[A]-p[A])*i}else{var T=L.binarySearch(d,n),I=h[T-1],P=h[T],M=d[T],E=this.getCurvePercent(T-1,1-(n-M)/(d[T-1]-M));if(1==i)for(var S=0;S<c;S++){var C=I[S];p[S]=C+(P[S]-C)*E}else if(o==N.setup){if(null==(f=l).bones){g=f.vertices;for(var O=0;O<c;O++){C=I[O],b=g[O];p[O]=b+(C+(P[O]-C)*E-b)*i}}else for(var R=0;R<c;R++){C=I[R];p[R]=(C+(P[R]-C)*E)*i}}else for(var k=0;k<c;k++){C=I[k];p[k]+=(C+(P[k]-C)*E-p[k])*i}}}},t}(i);D.DeformTimeline=p;var d=function(){function t(t){this.frames=D.Utils.newFloatArray(t),this.events=new Array(t)}return t.prototype.getPropertyId=function(){return r.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},t.prototype.apply=function(t,e,n,r,i,o,a){if(null!=r){var s=this.frames,l=this.frames.length;if(n<e)this.apply(t,e,Number.MAX_VALUE,r,i,o,a),e=-1;else if(e>=s[l-1])return;if(!(n<s[0])){var u=0;if(e<s[0])u=0;else for(var h=s[u=L.binarySearch(s,e)];0<u&&s[u-1]==h;)u--;for(;u<l&&n>=s[u];u++)r.push(this.events[u])}}},t}();D.EventTimeline=d;var f=function(){function t(t){this.frames=D.Utils.newFloatArray(t),this.drawOrders=new Array(t)}return t.prototype.getPropertyId=function(){return r.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},t.prototype.apply=function(t,e,n,r,i,o,a){var s=t.drawOrder,l=t.slots;if(a!=_.out||o!=N.setup){var u=this.frames;if(n<u[0])o==N.setup&&D.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var h=0;h=n>=u[u.length-1]?u.length-1:L.binarySearch(u,n)-1;var c=this.drawOrders[h];if(null==c)D.Utils.arrayCopy(l,0,s,0,l.length);else for(var p=0,d=c.length;p<d;p++)s[p]=l[c[p]]}}else D.Utils.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},t}();D.DrawOrderTimeline=f;var m=function(n){function d(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*d.ENTRIES),e}return __extends(d,n),d.prototype.getPropertyId=function(){return(r.ikConstraint<<24)+this.ikConstraintIndex},d.prototype.setFrame=function(t,e,n,r){t*=d.ENTRIES,this.frames[t]=e,this.frames[t+d.MIX]=n,this.frames[t+d.BEND_DIRECTION]=r},d.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.ikConstraints[this.ikConstraintIndex];if(n<s[0])switch(o){case N.setup:return l.mix=l.data.mix,void(l.bendDirection=l.data.bendDirection);case N.current:l.mix+=(l.data.mix-l.mix)*i,l.bendDirection=l.data.bendDirection}else if(n>=s[s.length-d.ENTRIES])o==N.setup?(l.mix=l.data.mix+(s[s.length+d.PREV_MIX]-l.data.mix)*i,l.bendDirection=a==_.out?l.data.bendDirection:s[s.length+d.PREV_BEND_DIRECTION]):(l.mix+=(s[s.length+d.PREV_MIX]-l.mix)*i,a==_.in&&(l.bendDirection=s[s.length+d.PREV_BEND_DIRECTION]));else{var u=L.binarySearch(s,n,d.ENTRIES),h=s[u+d.PREV_MIX],c=s[u],p=this.getCurvePercent(u/d.ENTRIES-1,1-(n-c)/(s[u+d.PREV_TIME]-c));o==N.setup?(l.mix=l.data.mix+(h+(s[u+d.MIX]-h)*p-l.data.mix)*i,l.bendDirection=a==_.out?l.data.bendDirection:s[u+d.PREV_BEND_DIRECTION]):(l.mix+=(h+(s[u+d.MIX]-h)*p-l.mix)*i,a==_.in&&(l.bendDirection=s[u+d.PREV_BEND_DIRECTION]))}},d.ENTRIES=3,d.PREV_TIME=-3,d.PREV_MIX=-2,d.PREV_BEND_DIRECTION=-1,d.MIX=1,d.BEND_DIRECTION=2,d}(i);D.IkConstraintTimeline=m;var g=function(n){function v(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*v.ENTRIES),e}return __extends(v,n),v.prototype.getPropertyId=function(){return(r.transformConstraint<<24)+this.transformConstraintIndex},v.prototype.setFrame=function(t,e,n,r,i,o){t*=v.ENTRIES,this.frames[t]=e,this.frames[t+v.ROTATE]=n,this.frames[t+v.TRANSLATE]=r,this.frames[t+v.SCALE]=i,this.frames[t+v.SHEAR]=o},v.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(n<s[0]){var u=l.data;switch(o){case N.setup:return l.rotateMix=u.rotateMix,l.translateMix=u.translateMix,l.scaleMix=u.scaleMix,void(l.shearMix=u.shearMix);case N.current:l.rotateMix+=(u.rotateMix-l.rotateMix)*i,l.translateMix+=(u.translateMix-l.translateMix)*i,l.scaleMix+=(u.scaleMix-l.scaleMix)*i,l.shearMix+=(u.shearMix-l.shearMix)*i}}else{var h=0,c=0,p=0,d=0;if(n>=s[s.length-v.ENTRIES]){var f=s.length;h=s[f+v.PREV_ROTATE],c=s[f+v.PREV_TRANSLATE],p=s[f+v.PREV_SCALE],d=s[f+v.PREV_SHEAR]}else{var m=L.binarySearch(s,n,v.ENTRIES);h=s[m+v.PREV_ROTATE],c=s[m+v.PREV_TRANSLATE],p=s[m+v.PREV_SCALE],d=s[m+v.PREV_SHEAR];var g=s[m],_=this.getCurvePercent(m/v.ENTRIES-1,1-(n-g)/(s[m+v.PREV_TIME]-g));h+=(s[m+v.ROTATE]-h)*_,c+=(s[m+v.TRANSLATE]-c)*_,p+=(s[m+v.SCALE]-p)*_,d+=(s[m+v.SHEAR]-d)*_}if(o==N.setup){u=l.data;l.rotateMix=u.rotateMix+(h-u.rotateMix)*i,l.translateMix=u.translateMix+(c-u.translateMix)*i,l.scaleMix=u.scaleMix+(p-u.scaleMix)*i,l.shearMix=u.shearMix+(d-u.shearMix)*i}else l.rotateMix+=(h-l.rotateMix)*i,l.translateMix+=(c-l.translateMix)*i,l.scaleMix+=(p-l.scaleMix)*i,l.shearMix+=(d-l.shearMix)*i}},v.ENTRIES=5,v.PREV_TIME=-5,v.PREV_ROTATE=-4,v.PREV_TRANSLATE=-3,v.PREV_SCALE=-2,v.PREV_SHEAR=-1,v.ROTATE=1,v.TRANSLATE=2,v.SCALE=3,v.SHEAR=4,v}(i);D.TransformConstraintTimeline=g;var v=function(n){function d(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*d.ENTRIES),e}return __extends(d,n),d.prototype.getPropertyId=function(){return(r.pathConstraintPosition<<24)+this.pathConstraintIndex},d.prototype.setFrame=function(t,e,n){t*=d.ENTRIES,this.frames[t]=e,this.frames[t+d.VALUE]=n},d.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(o){case N.setup:return void(l.position=l.data.position);case N.current:l.position+=(l.data.position-l.position)*i}else{var u=0;if(n>=s[s.length-d.ENTRIES])u=s[s.length+d.PREV_VALUE];else{var h=L.binarySearch(s,n,d.ENTRIES);u=s[h+d.PREV_VALUE];var c=s[h],p=this.getCurvePercent(h/d.ENTRIES-1,1-(n-c)/(s[h+d.PREV_TIME]-c));u+=(s[h+d.VALUE]-u)*p}o==N.setup?l.position=l.data.position+(u-l.data.position)*i:l.position+=(u-l.position)*i}},d.ENTRIES=2,d.PREV_TIME=-2,d.PREV_VALUE=-1,d.VALUE=1,d}(i),y=function(e){function d(t){return e.call(this,t)||this}return __extends(d,e),d.prototype.getPropertyId=function(){return(r.pathConstraintSpacing<<24)+this.pathConstraintIndex},d.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(o){case N.setup:return void(l.spacing=l.data.spacing);case N.current:l.spacing+=(l.data.spacing-l.spacing)*i}else{var u=0;if(n>=s[s.length-d.ENTRIES])u=s[s.length+d.PREV_VALUE];else{var h=L.binarySearch(s,n,d.ENTRIES);u=s[h+d.PREV_VALUE];var c=s[h],p=this.getCurvePercent(h/d.ENTRIES-1,1-(n-c)/(s[h+d.PREV_TIME]-c));u+=(s[h+d.VALUE]-u)*p}o==N.setup?l.spacing=l.data.spacing+(u-l.data.spacing)*i:l.spacing+=(u-l.spacing)*i}},d}(D.PathConstraintPositionTimeline=v);D.PathConstraintSpacingTimeline=y;var x=function(n){function f(t){var e=n.call(this,t)||this;return e.frames=D.Utils.newFloatArray(t*f.ENTRIES),e}return __extends(f,n),f.prototype.getPropertyId=function(){return(r.pathConstraintMix<<24)+this.pathConstraintIndex},f.prototype.setFrame=function(t,e,n,r){t*=f.ENTRIES,this.frames[t]=e,this.frames[t+f.ROTATE]=n,this.frames[t+f.TRANSLATE]=r},f.prototype.apply=function(t,e,n,r,i,o,a){var s=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(n<s[0])switch(o){case N.setup:return l.rotateMix=l.data.rotateMix,void(l.translateMix=l.data.translateMix);case N.current:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*i,l.translateMix+=(l.data.translateMix-l.translateMix)*i}else{var u=0,h=0;if(n>=s[s.length-f.ENTRIES])u=s[s.length+f.PREV_ROTATE],h=s[s.length+f.PREV_TRANSLATE];else{var c=L.binarySearch(s,n,f.ENTRIES);u=s[c+f.PREV_ROTATE],h=s[c+f.PREV_TRANSLATE];var p=s[c],d=this.getCurvePercent(c/f.ENTRIES-1,1-(n-p)/(s[c+f.PREV_TIME]-p));u+=(s[c+f.ROTATE]-u)*d,h+=(s[c+f.TRANSLATE]-h)*d}o==N.setup?(l.rotateMix=l.data.rotateMix+(u-l.data.rotateMix)*i,l.translateMix=l.data.translateMix+(h-l.data.translateMix)*i):(l.rotateMix+=(u-l.rotateMix)*i,l.translateMix+=(h-l.translateMix)*i)}},f.ENTRIES=3,f.PREV_TIME=-3,f.PREV_ROTATE=-2,f.PREV_TRANSLATE=-1,f.ROTATE=1,f.TRANSLATE=2,f}(i);D.PathConstraintMixTimeline=x}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(T){var f=function(){function A(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new T.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new T.Pool(function(){return new e}),this.data=t}return A.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var i=e[n];if(null!=i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var o=t*i.timeScale;if(0<i.delay){if(i.delay-=o,0<i.delay)continue;o=-i.delay,i.delay=0}var a=i.next;if(null!=a){var s=i.trackLast-a.delay;if(0<=s){for(a.delay=0,a.trackTime=s+t*a.timeScale,i.trackTime+=o,this.setCurrent(n,a,!0);null!=a.mixingFrom;)a.mixTime+=o,a=a.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&null==i.mixingFrom){e[n]=null,this.queue.end(i),this.disposeNext(i);continue}if(null!=i.mixingFrom&&this.updateMixingFrom(i,t)){var l=i.mixingFrom;for(i.mixingFrom=null;null!=l;)this.queue.end(l),l=l.mixingFrom}i.trackTime+=o}}this.queue.drain()},A.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var r=this.updateMixingFrom(n,e);return 0<t.mixTime&&(t.mixTime>=t.mixDuration||0==t.timeScale)?(0==n.totalAlpha&&(t.mixingFrom=n.mixingFrom,t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,n.trackTime+=e*n.timeScale,t.mixTime+=e*t.timeScale,!1)},A.prototype.apply=function(t){if(null==t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,r=!1,i=0,o=n.length;i<o;i++){var a=n[i];if(!(null==a||0<a.delay)){r=!0;var s=0==i?T.MixPose.current:T.MixPose.currentLayered,l=a.alpha;null!=a.mixingFrom?l*=this.applyMixingFrom(a,t,s):a.trackTime>=a.trackEnd&&null==a.next&&(l=0);var u=a.animationLast,h=a.getAnimationTime(),c=a.animation.timelines.length,p=a.animation.timelines;if(1==l)for(var d=0;d<c;d++)p[d].apply(t,u,h,e,1,T.MixPose.setup,T.MixDirection.in);else{var f=a.timelineData,m=0==a.timelinesRotation.length;m&&T.Utils.setArraySize(a.timelinesRotation,c<<1,null);var g=a.timelinesRotation;for(d=0;d<c;d++){var _=p[d],v=f[d]>=A.FIRST?T.MixPose.setup:s;_ instanceof T.RotateTimeline?this.applyRotateTimeline(_,t,h,l,v,g,d<<1,m):_.apply(t,u,h,e,l,v,T.MixDirection.in)}}this.queueEvents(a,h),e.length=0,a.nextAnimationLast=h,a.nextTrackLast=a.trackTime}}return this.queue.drain(),r},A.prototype.applyMixingFrom=function(t,e,n){var r=t.mixingFrom;null!=r.mixingFrom&&this.applyMixingFrom(r,e,n);var i=0;0==t.mixDuration?i=1:1<(i=t.mixTime/t.mixDuration)&&(i=1);var o=i<r.eventThreshold?this.events:null,a=i<r.attachmentThreshold,s=i<r.drawOrderThreshold,l=r.animationLast,u=r.getAnimationTime(),h=r.animation.timelines.length,c=r.animation.timelines,p=r.timelineData,d=r.timelineDipMix,f=0==r.timelinesRotation.length;f&&T.Utils.setArraySize(r.timelinesRotation,h<<1,null);for(var m,g=r.timelinesRotation,_=r.alpha*t.interruptAlpha,v=_*(1-i),y=0,x=r.totalAlpha=0;x<h;x++){var b=c[x];switch(p[x]){case A.SUBSEQUENT:if(!a&&b instanceof T.AttachmentTimeline)continue;if(!s&&b instanceof T.DrawOrderTimeline)continue;m=n,y=v;break;case A.FIRST:m=T.MixPose.setup,y=v;break;case A.DIP:m=T.MixPose.setup,y=_;break;default:m=T.MixPose.setup,y=_;var w=d[x];y*=Math.max(0,1-w.mixTime/w.mixDuration)}r.totalAlpha+=y,b instanceof T.RotateTimeline?this.applyRotateTimeline(b,e,u,y,m,g,x<<1,f):b.apply(e,l,u,o,y,m,T.MixDirection.out)}return 0<t.mixDuration&&this.queueEvents(r,u),this.events.length=0,r.nextAnimationLast=u,r.nextTrackLast=r.trackTime,i},A.prototype.applyRotateTimeline=function(t,e,n,r,i,o,a,s){if(s&&(o[a]=0),1!=r){var l=t,u=l.frames,h=e.bones[l.boneIndex];if(n<u[0])i==T.MixPose.setup&&(h.rotation=h.data.rotation);else{var c=0;if(n>=u[u.length-T.RotateTimeline.ENTRIES])c=h.data.rotation+u[u.length+T.RotateTimeline.PREV_ROTATION];else{var p=T.Animation.binarySearch(u,n,T.RotateTimeline.ENTRIES),d=u[p+T.RotateTimeline.PREV_ROTATION],f=u[p],m=l.getCurvePercent((p>>1)-1,1-(n-f)/(u[p+T.RotateTimeline.PREV_TIME]-f));c=u[p+T.RotateTimeline.ROTATION]-d,c=d+(c-=360*(16384-(16384.499999999996-c/360|0)))*m+h.data.rotation,c-=360*(16384-(16384.499999999996-c/360|0))}var g=i==T.MixPose.setup?h.data.rotation:h.rotation,_=0,v=c-g;if(0==v)_=o[a];else{v-=360*(16384-(16384.499999999996-v/360|0));var y=0,x=0;x=s?(y=0,v):(y=o[a],o[a+1]);var b=0<v,w=0<=y;T.MathUtils.signum(x)!=T.MathUtils.signum(v)&&Math.abs(x)<=90&&(180<Math.abs(y)&&(y+=360*T.MathUtils.signum(y)),w=b),_=v+y-y%360,w!=b&&(_+=360*T.MathUtils.signum(y)),o[a]=_}o[a+1]=v,g+=_*r,h.rotation=g-360*(16384-(16384.499999999996-g/360|0))}}else t.apply(e,0,n,null,1,i,T.MixDirection.in)},A.prototype.queueEvents=function(t,e){for(var n=t.animationStart,r=t.animationEnd,i=r-n,o=t.trackLast%i,a=this.events,s=0,l=a.length;s<l;s++){var u=a[s];if(u.time<o)break;u.time>r||this.queue.event(t,u)}for((t.loop?o>t.trackTime%i:r<=e&&t.animationLast<r)&&this.queue.complete(t);s<l;s++){a[s].time<n||this.queue.event(t,a[s])}},A.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},A.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var n=e;;){var r=n.mixingFrom;if(null==r)break;this.queue.end(r),n.mixingFrom=null,n=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},A.prototype.setCurrent=function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(n&&this.queue.interrupt(r),e.mixingFrom=r,e.mixTime=0,null!=r.mixingFrom&&0<r.mixDuration&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},A.prototype.setAnimation=function(t,e,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)},A.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var r=!0,i=this.expandToIndex(t);null!=i&&(-1==i.nextTrackLast?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,r=!1):this.disposeNext(i));var o=this.trackEntry(t,e,n,i);return this.setCurrent(t,o,r),this.queue.drain(),o},A.prototype.addAnimation=function(t,e,n,r){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,i,n,r)},A.prototype.addAnimationWith=function(t,e,n,r){if(null==e)throw new Error("animation cannot be null.");var i=this.expandToIndex(t);if(null!=i)for(;null!=i.next;)i=i.next;var o=this.trackEntry(t,e,n,i);if(null==i)this.setCurrent(t,o,!0),this.queue.drain();else if(i.next=o,r<=0){var a=i.animationEnd-i.animationStart;0!=a?r+=a*(1+(i.trackTime/a|0))-this.data.getMix(i.animation,e):r=0}return o.delay=r,o},A.prototype.setEmptyAnimation=function(t,e){var n=this.setAnimationWith(t,A.emptyAnimation,!1);return n.mixDuration=e,n.trackEnd=e,n},A.prototype.addEmptyAnimation=function(t,e,n){n<=0&&(n-=e);var r=this.addAnimationWith(t,A.emptyAnimation,!1,n);return r.mixDuration=e,r.trackEnd=e,r},A.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},A.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(T.Utils.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},A.prototype.trackEntry=function(t,e,n,r){var i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=n,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=null==r?0:this.data.getMix(r.animation,e),i},A.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},A.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs;t.clear();for(var e=this.mixingTo,n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&i.setTimelineData(null,e,t)}},A.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},A.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},A.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);0<=e&&this.listeners.splice(e,1)},A.prototype.clearListeners=function(){this.listeners.length=0},A.prototype.clearListenerNotifications=function(){this.queue.clear()},A.prototype.setAnimationByName=function(t,e,n){A.deprecatedWarning1||(A.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,e,n)},A.prototype.addAnimationByName=function(t,e,n,r){A.deprecatedWarning2||(A.deprecatedWarning2=!0,console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,e,n,r)},A.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},A.prototype.hasAnimationByName=function(t){return A.deprecatedWarning3||(A.deprecatedWarning3=!0,console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},A.emptyAnimation=new T.Animation("<empty>",[],0),A.SUBSEQUENT=0,A.FIRST=1,A.DIP=2,A.DIP_MIX=3,A.deprecatedWarning1=!1,A.deprecatedWarning2=!1,A.deprecatedWarning3=!1,A}();T.AnimationState=f;var e=function(){function e(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}return e.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},e.prototype.setTimelineData=function(t,e,n){null!=t&&e.push(t);var r=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,e,n):this;null!=t&&e.pop();var i=e,o=e.length-1,a=this.animation.timelines,s=this.animation.timelines.length,l=T.Utils.setArraySize(this.timelineData,s);this.timelineDipMix.length=0;var u=T.Utils.setArraySize(this.timelineDipMix,s);t:for(var h=0;h<s;h++){var c=a[h].getPropertyId();if(n.add(c))if(null!=t&&t.hasTimeline(c)){for(var p=o;0<=p;p--){var d=i[p];if(!d.hasTimeline(c)&&0<d.mixDuration){l[h]=f.DIP_MIX,u[h]=d;continue t}}l[h]=f.DIP}else l[h]=f.FIRST;else l[h]=f.SUBSEQUENT}return r},e.prototype.hasTimeline=function(t){for(var e=this.animation.timelines,n=0,r=e.length;n<r;n++)if(e[n].getPropertyId()==t)return!0;return!1},e.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},e.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},e.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},e.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(e.prototype,"time",{get:function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),e.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e}();T.TrackEntry=e;var l,t,n=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(l.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(l.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(l.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(l.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(l.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(l.event),this.objects.push(t),this.objects.push(e)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];switch(r){case l.start:null!=i.listener&&i.listener.start&&i.listener.start(i);for(var o=0;o<e.length;o++)e[o].start&&e[o].start(i);i.onStart&&this.deprecateStuff()&&i.onStart(i.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(i.trackIndex);break;case l.interrupt:null!=i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(o=0;o<e.length;o++)e[o].interrupt&&e[o].interrupt(i);break;case l.end:null!=i.listener&&i.listener.end&&i.listener.end(i);for(o=0;o<e.length;o++)e[o].end&&e[o].end(i);i.onEnd&&this.deprecateStuff()&&i.onEnd(i.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(i.trackIndex);case l.dispose:null!=i.listener&&i.listener.dispose&&i.listener.dispose(i);for(o=0;o<e.length;o++)e[o].dispose&&e[o].dispose(i);this.animState.trackEntryPool.free(i);break;case l.complete:null!=i.listener&&i.listener.complete&&i.listener.complete(i);for(o=0;o<e.length;o++)e[o].complete&&e[o].complete(i);var a=T.MathUtils.toInt(i.loopsCount());i.onComplete&&this.deprecateStuff()&&i.onComplete(i.trackIndex,a),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(i.trackIndex,a);break;case l.event:var s=t[2+n++];null!=i.listener&&i.listener.event&&i.listener.event(i,s);for(o=0;o<e.length;o++)e[o].event&&e[o].event(i,s);i.onEvent&&this.deprecateStuff()&&i.onEvent(i.trackIndex,s),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(i.trackIndex,s)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}();T.EventQueue=n,(t=l=T.EventType||(T.EventType={}))[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event";var r=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();T.AnimationStateAdapter2=r}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){var e,n;e=t.core||(t.core={}),n=function(){function r(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return r.prototype.setMix=function(t,e,n){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var i=this.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);this.setMixWith(r,i,n)},r.prototype.setMixByName=function(t,e,n){r.deprecatedWarning1||(r.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(t,e,n)},r.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+e.name;this.animationToMixTime[r]=n},r.prototype.getMix=function(t,e){var n=t.name+e.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r},r.deprecatedWarning1=!1,r}(),e.AnimationStateData=n}(pixi_spine||(pixi_spine={})),function(t){var o,e;o=t.core||(t.core={}),e=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");var i=new o.RegionAttachment(e);return i.region=r,i},t.prototype.newMeshAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");var i=new o.MeshAttachment(e);return i.region=r,i},t.prototype.newBoundingBoxAttachment=function(t,e){return new o.BoundingBoxAttachment(e)},t.prototype.newPathAttachment=function(t,e){return new o.PathAttachment(e)},t.prototype.newPointAttachment=function(t,e){return new o.PointAttachment(e)},t.prototype.newClippingAttachment=function(t,e){return new o.ClippingAttachment(e)},t}(),o.AtlasAttachmentLoader=e}(pixi_spine||(pixi_spine={})),function(t){var e,n;e=t.core||(t.core={}),(n=e.BlendMode||(e.BlendMode={}))[n.Normal=0]="Normal",n[n.Additive=1]="Additive",n[n.Multiply=2]="Multiply",n[n.Screen=3]="Screen"}(pixi_spine||(pixi_spine={})),function(t){var O,e;O=t.core||(t.core={}),e=function(){function C(t,e,n){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}return Object.defineProperty(C.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),C.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},C.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},C.prototype.updateWorldTransformWith=function(t,e,n,r,i,o,a){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=a,this.appliedValid=!0;var s=this.parent,l=this.matrix;if(null==s){var u=n+90+a,h=O.MathUtils.cosDeg(n+o)*r,c=O.MathUtils.cosDeg(u)*i,p=O.MathUtils.sinDeg(n+o)*r,d=O.MathUtils.sinDeg(u)*i,f=this.skeleton;return f.flipX&&(t=-t,h=-h,c=-c),f.flipY!==C.yDown&&(e=-e,p=-p,d=-d),l.a=h,l.c=c,l.b=p,l.d=d,l.tx=t+f.x,void(l.ty=e+f.y)}var m=s.matrix.a,g=s.matrix.c,_=s.matrix.b,v=s.matrix.d;switch(l.tx=m*t+g*e+s.matrix.tx,l.ty=_*t+v*e+s.matrix.ty,this.data.transformMode){case O.TransformMode.Normal:u=n+90+a,h=O.MathUtils.cosDeg(n+o)*r,c=O.MathUtils.cosDeg(u)*i,p=O.MathUtils.sinDeg(n+o)*r,d=O.MathUtils.sinDeg(u)*i;return l.a=m*h+g*p,l.c=m*c+g*d,l.b=_*h+v*p,void(l.d=_*c+v*d);case O.TransformMode.OnlyTranslation:u=n+90+a;l.a=O.MathUtils.cosDeg(n+o)*r,l.c=O.MathUtils.cosDeg(u)*i,l.b=O.MathUtils.sinDeg(n+o)*r,l.d=O.MathUtils.sinDeg(u)*i;break;case O.TransformMode.NoRotationOrReflection:var y=0,x=n+o-(y=1e-4<(w=m*m+_*_)?(g=_*(w=Math.abs(m*v-g*_)/w),v=m*w,Math.atan2(_,m)*O.MathUtils.radDeg):(_=m=0,90-Math.atan2(v,g)*O.MathUtils.radDeg)),b=n+a-y+90;h=O.MathUtils.cosDeg(x)*r,c=O.MathUtils.cosDeg(b)*i,p=O.MathUtils.sinDeg(x)*r,d=O.MathUtils.sinDeg(b)*i;l.a=m*h-g*p,l.c=m*c-g*d,l.b=_*h+v*p,l.d=_*c+v*d;break;case O.TransformMode.NoScale:case O.TransformMode.NoScaleOrReflection:var w,A=O.MathUtils.cosDeg(n),T=O.MathUtils.sinDeg(n),I=m*A+g*T,P=_*A+v*T;1e-5<(w=Math.sqrt(I*I+P*P))&&(w=1/w),I*=w,P*=w,w=Math.sqrt(I*I+P*P);var M=Math.PI/2+Math.atan2(P,I),E=Math.cos(M)*w,S=Math.sin(M)*w;h=O.MathUtils.cosDeg(o)*r,c=O.MathUtils.cosDeg(90+a)*i,p=O.MathUtils.sinDeg(o)*r,d=O.MathUtils.sinDeg(90+a)*i;return l.a=I*h+E*p,l.c=I*c+E*d,l.b=P*h+S*p,l.d=P*c+S*d,void((this.data.transformMode!=O.TransformMode.NoScaleOrReflection?m*v-g*_<0:this.skeleton.flipX!=this.skeleton.flipY!=C.yDown)&&(l.c=-l.c,l.d=-l.d))}this.skeleton.flipX&&(l.a=-l.a,l.c=-l.c),this.skeleton.flipY!=C.yDown&&(l.b=-l.b,l.d=-l.d)},C.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},C.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*O.MathUtils.radDeg},C.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*O.MathUtils.radDeg},C.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},C.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},C.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*O.MathUtils.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*O.MathUtils.radDeg);var n=t.matrix,r=1/(n.a*n.d-n.b*n.c),i=e.tx-n.tx,o=e.ty-n.ty;this.ax=i*n.d*r-o*n.c*r,this.ay=o*n.a*r-i*n.b*r;var a=r*n.d,s=r*n.a,l=r*n.c,u=r*n.b,h=a*e.a-l*e.b,c=a*e.c-l*e.d,p=s*e.b-u*e.a,d=s*e.d-u*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(h*h+p*p),1e-4<this.ascaleX){var f=h*d-c*p;this.ascaleY=f/this.ascaleX,this.ashearY=Math.atan2(h*c+p*d,f)*O.MathUtils.radDeg,this.arotation=Math.atan2(p,h)*O.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(c*c+d*d),this.ashearY=0,this.arotation=90-Math.atan2(d,c)*O.MathUtils.radDeg},C.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,a=1/(n*o-r*i),s=t.x-e.tx,l=t.y-e.ty;return t.x=s*o*a-l*r*a,t.y=l*n*a-s*i*a,t},C.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,r=t.y;return t.x=n*e.a+r*e.c+e.tx,t.y=n*e.b+r*e.d+e.ty,t},C.prototype.worldToLocalRotation=function(t){var e=O.MathUtils.sinDeg(t),n=O.MathUtils.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*n,r.d*n-r.c*e)*O.MathUtils.radDeg},C.prototype.localToWorldRotation=function(t){var e=O.MathUtils.sinDeg(t),n=O.MathUtils.cosDeg(t),r=this.matrix;return Math.atan2(n*r.b+e*r.d,n*r.a+e*r.c)*O.MathUtils.radDeg},C.prototype.rotateWorld=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,a=O.MathUtils.cosDeg(t),s=O.MathUtils.sinDeg(t);e.a=a*n-s*i,e.c=a*r-s*o,e.b=s*n+a*i,e.d=s*r+a*o,this.appliedValid=!1},C.yDown=!1,C}(),O.Bone=e}(pixi_spine||(pixi_spine={})),function(t){var e,r,n,i;e=t.core||(t.core={}),i=function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=r.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n},e.BoneData=i,(n=r=e.TransformMode||(e.TransformMode={}))[n.Normal=0]="Normal",n[n.OnlyTranslation=1]="OnlyTranslation",n[n.NoRotationOrReflection=2]="NoRotationOrReflection",n[n.NoScale=3]="NoScale",n[n.NoScaleOrReflection=4]="NoScaleOrReflection"}(pixi_spine||(pixi_spine={})),function(t){var e;e=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},(t.core||(t.core={})).Event=e}(pixi_spine||(pixi_spine={})),function(t){var e;e=function(t){this.name=t},(t.core||(t.core={})).EventData=e}(pixi_spine||(pixi_spine={})),function(t){var rt,e;rt=t.core||(t.core={}),e=function(){function t(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},t.prototype.apply1=function(t,e,n,r){t.appliedValid||t.updateAppliedTransform();var i=t.parent.matrix,o=1/(i.a*i.d-i.b*i.c),a=e-i.tx,s=n-i.ty,l=(a*i.d-s*i.c)*o-t.ax,u=(s*i.a-a*i.b)*o-t.ay,h=Math.atan2(u,l)*rt.MathUtils.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(h+=180),180<h?h-=360:h<-180&&(h+=360),t.updateWorldTransformWith(t.ax,t.ay,t.arotation+h*r,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,n,r,i,o){if(0!=o){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var a=t.ax,s=t.ay,l=t.ascaleX,u=t.ascaleY,h=e.ascaleX,c=t.matrix,p=0,d=0,f=0;f=l<0?(l=-l,p=180,-1):(p=0,1),u<0&&(u=-u,f=-f),d=h<0?(h=-h,180):0;var m=e.ax,g=0,_=0,v=0,y=c.a,x=c.c,b=c.b,w=c.d,A=Math.abs(l-u)<=1e-4;v=A?(_=y*m+x*(g=e.ay)+c.tx,b*m+w*g+c.ty):(g=0,_=y*m+c.tx,b*m+c.ty);var T=t.parent.matrix;y=T.a,x=T.c,b=T.b;var I=1/(y*(w=T.d)-x*b),P=n-T.tx,M=r-T.ty,E=(P*w-M*x)*I-a,S=(M*y-P*b)*I-s,C=((P=_-T.tx)*w-(M=v-T.ty)*x)*I-a,O=(M*y-P*b)*I-s,R=Math.sqrt(C*C+O*O),k=e.data.length*h,D=0,N=0;t:if(A){var L=(E*E+S*S-R*R-(k*=l)*k)/(2*R*k);L<-1?L=-1:1<L&&(L=1),N=Math.acos(L)*i,y=R+k*L,x=k*Math.sin(N),D=Math.atan2(S*y-E*x,E*y+S*x)}else{var V=(y=l*k)*y,B=(x=u*k)*x,X=E*E+S*S,F=Math.atan2(S,E),U=-2*B*R,j=B-V;if(0<=(w=U*U-4*j*(b=B*R*R+V*X-V*B))){var G=Math.sqrt(w);U<0&&(G=-G);var Y=(G=-(U+G)/2)/j,W=b/G,H=Math.abs(Y)<Math.abs(W)?Y:W;if(H*H<=X){M=Math.sqrt(X-H*H)*i,D=F-Math.atan2(M,H),N=Math.atan2(M/u,(H-R)/l);break t}}var q=rt.MathUtils.PI,K=R-y,z=K*K,Z=0,J=0,Q=R+y,$=Q*Q,tt=0;-1<=(b=-y*R/(V-B))&&b<=1&&(b=Math.acos(b),(w=(P=y*Math.cos(b)+R)*P+(M=x*Math.sin(b))*M)<z&&(q=b,z=w,K=P,Z=M),$<w&&(J=b,$=w,Q=P,tt=M)),N=X<=(z+$)/2?(D=F-Math.atan2(Z*i,K),q*i):(D=F-Math.atan2(tt*i,Q),J*i)}var et=Math.atan2(g,m)*f,nt=t.arotation;180<(D=(D-et)*rt.MathUtils.radDeg+p-nt)?D-=360:D<-180&&(D+=360),t.updateWorldTransformWith(a,s,nt+D*o,t.ascaleX,t.ascaleY,0,0),nt=e.arotation,180<(N=((N+et)*rt.MathUtils.radDeg-e.ashearX)*f+d-nt)?N-=360:N<-180&&(N+=360),e.updateWorldTransformWith(m,g,nt+N*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},t}(),rt.IkConstraint=e}(pixi_spine||(pixi_spine={})),function(t){var e;e=function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t},(t.core||(t.core={})).IkConstraintData=e}(pixi_spine||(pixi_spine={})),function(t){var z,e;z=t.core||(t.core={}),e=function(){function K(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,r=t.bones.length;n<r;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return K.prototype.apply=function(){this.update()},K.prototype.update=function(){var t=this.target.getAttachment();if(t instanceof z.PathAttachment){var e=this.rotateMix,n=this.translateMix,r=0<e;if(0<n||r){var i=this.data,o=i.spacingMode,a=o==z.SpacingMode.Length,s=i.rotateMode,l=s==z.RotateMode.Tangent,u=s==z.RotateMode.ChainScale,h=this.bones.length,c=l?h:h+1,p=this.bones,d=z.Utils.setArraySize(this.spaces,c),f=null,m=this.spacing;if(u||a){u&&(f=z.Utils.setArraySize(this.lengths,h));for(var g=0,_=c-1;g<_;){var v=(E=p[g]).data.length,y=v*E.matrix.a,x=v*E.matrix.b,b=Math.sqrt(y*y+x*x);u&&(f[g]=b),d[++g]=(a?v+m:m)*b/v}}else for(g=1;g<c;g++)d[g]=m;var w=this.computeWorldPositions(t,c,l,i.positionMode==z.PositionMode.Percent,o==z.SpacingMode.Percent),A=w[0],T=w[1],I=i.offsetRotation,P=!1;if(0==I)P=s==z.RotateMode.Chain;else P=!1,I*=0<(M=this.target.bone.matrix).a*M.d-M.b*M.c?z.MathUtils.degRad:-z.MathUtils.degRad;g=0;for(var M=3;g<h;g++,M+=3){var E,S=(E=p[g]).matrix;S.tx+=(A-S.tx)*n,S.ty+=(T-S.ty)*n;var C=(y=w[M])-A,O=(x=w[M+1])-T;if(u){var R=f[g];if(0!=R){var k=(Math.sqrt(C*C+O*O)/R-1)*e+1;S.a*=k,S.b*=k}}if(A=y,T=x,r){var D=S.a,N=S.c,L=S.b,V=S.d,B=0,X=0,F=0;if(B=l?w[M-1]:0==d[g+1]?w[M+2]:Math.atan2(O,C),B-=Math.atan2(L,D),P){X=Math.cos(B),F=Math.sin(B);var U=E.data.length;A+=(U*(X*D-F*L)-C)*e,T+=(U*(F*D+X*L)-O)*e}else B+=I;B>z.MathUtils.PI?B-=z.MathUtils.PI2:B<-z.MathUtils.PI&&(B+=z.MathUtils.PI2),B*=e,X=Math.cos(B),F=Math.sin(B),S.a=X*D-F*L,S.c=X*N-F*V,S.b=F*D+X*L,S.d=F*N+X*V}E.appliedValid=!1}}}},K.prototype.computeWorldPositions=function(t,e,n,r,i){var o=this.target,a=this.position,s=this.spaces,l=z.Utils.setArraySize(this.positions,3*e+2),u=null,h=t.closed,c=t.worldVerticesLength,p=c/6,d=K.NONE;if(!t.constantSpeed){var f=t.lengths,m=f[p-=h?1:2];if(r&&(a*=m),i)for(var g=0;g<e;g++)s[g]*=m;u=z.Utils.setArraySize(this.world,8);g=0;for(var _=0,v=0;g<e;g++,_+=3){var y=a+=G=s[g];if(h)(y%=m)<0&&(y+=m),v=0;else{if(y<0){d!=K.BEFORE&&(d=K.BEFORE,t.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(y,u,0,l,_);continue}if(m<y){d!=K.AFTER&&(d=K.AFTER,t.computeWorldVertices(o,c-6,4,u,0,2)),this.addAfterPosition(y-m,u,0,l,_);continue}}for(;;v++){var x=f[v];if(!(x<y)){if(0==v)y/=x;else y=(y-(q=f[v-1]))/(x-q);break}}v!=d&&(d=v,h&&v==p?(t.computeWorldVertices(o,c-4,4,u,0,2),t.computeWorldVertices(o,0,4,u,4,2)):t.computeWorldVertices(o,6*v+2,8,u,0,2)),this.addCurvePosition(y,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,_,n||0<g&&0==G)}return l}h?(c+=2,u=z.Utils.setArraySize(this.world,c),t.computeWorldVertices(o,2,c-4,u,0,2),t.computeWorldVertices(o,0,2,u,c-4,2),u[c-2]=u[0],u[c-1]=u[1]):(p--,c-=4,u=z.Utils.setArraySize(this.world,c),t.computeWorldVertices(o,2,c,u,0,2));for(var b=z.Utils.setArraySize(this.curves,p),w=0,A=u[0],T=u[1],I=0,P=0,M=0,E=0,S=0,C=0,O=0,R=0,k=0,D=0,N=0,L=0,V=0,B=0,X=(g=0,2);g<p;g++,X+=6)I=u[X],P=u[X+1],M=u[X+2],E=u[X+3],N=2*(O=.1875*(A-2*I+M))+(k=.09375*(3*(I-M)-A+(S=u[X+4]))),L=2*(R=.1875*(T-2*P+E))+(D=.09375*(3*(P-E)-T+(C=u[X+5]))),V=.75*(I-A)+O+.16666667*k,B=.75*(P-T)+R+.16666667*D,w+=Math.sqrt(V*V+B*B),V+=N,B+=L,N+=k,L+=D,w+=Math.sqrt(V*V+B*B),V+=N,B+=L,w+=Math.sqrt(V*V+B*B),V+=N+k,B+=L+D,w+=Math.sqrt(V*V+B*B),b[g]=w,A=S,T=C;if(r&&(a*=w),i)for(g=0;g<e;g++)s[g]*=w;for(var F=this.segments,U=0,j=(g=0,_=0,v=0,0);g<e;g++,_+=3){var G;y=a+=G=s[g];if(h)(y%=w)<0&&(y+=w),v=0;else{if(y<0){this.addBeforePosition(y,u,0,l,_);continue}if(w<y){this.addAfterPosition(y-w,u,c-4,l,_);continue}}for(;;v++){var Y=b[v];if(!(Y<y)){if(0==v)y/=Y;else y=(y-(q=b[v-1]))/(Y-q);break}}if(v!=d){var W=6*(d=v);for(A=u[W],T=u[W+1],I=u[W+2],P=u[W+3],M=u[W+4],E=u[W+5],N=2*(O=.03*(A-2*I+M))+(k=.006*(3*(I-M)-A+(S=u[W+6]))),L=2*(R=.03*(T-2*P+E))+(D=.006*(3*(P-E)-T+(C=u[W+7]))),V=.3*(I-A)+O+.16666667*k,B=.3*(P-T)+R+.16666667*D,U=Math.sqrt(V*V+B*B),F[0]=U,W=1;W<8;W++)V+=N,B+=L,N+=k,L+=D,U+=Math.sqrt(V*V+B*B),F[W]=U;V+=N,B+=L,U+=Math.sqrt(V*V+B*B),F[8]=U,V+=N+k,B+=L+D,U+=Math.sqrt(V*V+B*B),F[9]=U,j=0}for(y*=U;;j++){var H=F[j];if(!(H<y)){var q;if(0==j)y/=H;else y=j+(y-(q=F[j-1]))/(H-q);break}}this.addCurvePosition(.1*y,A,T,I,P,M,E,S,C,l,_,n||0<g&&0==G)}return l},K.prototype.addBeforePosition=function(t,e,n,r,i){var o=e[n],a=e[n+1],s=e[n+2]-o,l=e[n+3]-a,u=Math.atan2(l,s);r[i]=o+t*Math.cos(u),r[i+1]=a+t*Math.sin(u),r[i+2]=u},K.prototype.addAfterPosition=function(t,e,n,r,i){var o=e[n+2],a=e[n+3],s=o-e[n],l=a-e[n+1],u=Math.atan2(l,s);r[i]=o+t*Math.cos(u),r[i+1]=a+t*Math.sin(u),r[i+2]=u},K.prototype.addCurvePosition=function(t,e,n,r,i,o,a,s,l,u,h,c){(0==t||isNaN(t))&&(t=1e-4);var p=t*t,d=p*t,f=1-t,m=f*f,g=m*f,_=f*t,v=3*_,y=f*v,x=v*t,b=e*g+r*y+o*x+s*d,w=n*g+i*y+a*x+l*d;u[h]=b,u[h+1]=w,c&&(u[h+2]=Math.atan2(w-(n*m+i*_*2+a*p),b-(e*m+r*_*2+o*p)))},K.prototype.getOrder=function(){return this.data.order},K.NONE=-1,K.BEFORE=-2,K.AFTER=-3,K}(),z.PathConstraint=e}(pixi_spine||(pixi_spine={})),function(t){var e,n,r,i,o;e=t.core||(t.core={}),o=function(t){this.order=0,this.bones=new Array,this.name=t},e.PathConstraintData=o,(n=e.PositionMode||(e.PositionMode={}))[n.Fixed=0]="Fixed",n[n.Percent=1]="Percent",(r=e.SpacingMode||(e.SpacingMode={}))[r.Length=0]="Length",r[r.Fixed=1]="Fixed",r[r.Percent=2]="Percent",(i=e.RotateMode||(e.RotateMode={}))[i.Tangent=0]="Tangent",i[i.Chain=1]="Chain",i[i.ChainScale=2]="ChainScale"}(pixi_spine||(pixi_spine={})),function(t){var y,e;y=t.core||(t.core={}),e=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=void 0;if(null==n.parent)r=new y.Bone(n,this,null);else{var i=this.bones[n.parent.index];r=new y.Bone(n,this,i),i.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var o=t.slots[e],a=(r=this.bones[o.boneData.index],new y.Slot(o,r));this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var s=t.ikConstraints[e];this.ikConstraints.push(new y.IkConstraint(s,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var l=t.transformConstraints[e];this.transformConstraints.push(new y.TransformConstraint(l,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var u=t.pathConstraints[e];this.pathConstraints.push(new y.PathConstraint(u,this))}this.color=new y.Color(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].sorted=!1;var r=this.ikConstraints,i=this.transformConstraints,o=this.pathConstraints,a=r.length,s=i.length,l=o.length,u=a+s+l;t:for(e=0;e<u;e++){for(var h=0;h<a;h++){if((c=r[h]).data.order==e){this.sortIkConstraint(c);continue t}}for(h=0;h<s;h++){if((c=i[h]).data.order==e){this.sortTransformConstraint(c);continue t}}for(h=0;h<l;h++){var c;if((c=o[h]).data.order==e){this.sortPathConstraint(c);continue t}}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),1<n.length){var i=n[n.length-1];-1<this._updateCache.indexOf(i)||this.updateCacheReset.push(i)}this._updateCache.push(t),this.sortReset(r.children),n[n.length-1].sorted=!0},t.prototype.sortPathConstraint=function(t){var e=t.target,n=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,o=this.data.skins.length;i<o;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);var a=e.getAttachment();a instanceof y.PathAttachment&&this.sortPathConstraintAttachmentWith(a,r);var s=t.bones,l=s.length;for(i=0;i<l;i++)this.sortBone(s[i]);this._updateCache.push(t);for(i=0;i<l;i++)this.sortReset(s[i].children);for(i=0;i<l;i++)s[i].sorted=!0},t.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var i=e[r];this.sortBone(i.parent),-1<this._updateCache.indexOf(i)||this.updateCacheReset.push(i)}else for(r=0;r<n;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var o=0;o<n;o++)this.sortReset(e[o].children);for(o=0;o<n;o++)e[o].sorted=!0},t.prototype.sortPathConstraintAttachment=function(t,e,n){var r=t.attachments[e];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof y.PathAttachment){var n=t.bones;if(null==n)this.sortBone(e);else for(var r=this.bones,i=0;i<n.length;)for(var o=n[i++],a=i+o;i<a;i++){var s=n[i];this.sortBone(r[s])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.sorted&&this.sortReset(r.children),r.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var i=this._updateCache;for(e=0,n=i.length;e<n;e++)i[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,n=r.length;e<n;e++){(s=r[e]).bendDirection=s.data.bendDirection,s.mix=s.data.mix}var i=this.transformConstraints;for(e=0,n=i.length;e<n;e++){var o=(s=i[e]).data;s.rotateMix=o.rotateMix,s.translateMix=o.translateMix,s.scaleMix=o.scaleMix,s.shearMix=o.shearMix}var a=this.pathConstraints;for(e=0,n=a.length;e<n;e++){var s;o=(s=a[e]).data;s.position=o.position,s.spacing=o.spacing,s.rotateMix=o.rotateMix,s.translateMix=o.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;y.Utils.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n],o=i.data.attachmentName;if(null!=o){var a=t.getAttachment(n,o);null!=a&&i.setAttachment(a)}}this.skin=t},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var o=n[r];if(o.data.name==t){var a=null;if(null!=e&&null==(a=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(a)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.getBounds=function(t,e,n){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=0,u=r.length;l<u;l++){var h=r[l],c=0,p=null,d=h.getAttachment();if(d instanceof y.RegionAttachment)c=8,p=y.Utils.setArraySize(n,c,0),d.computeWorldVertices(h.bone,p,0,2);else if(d instanceof y.MeshAttachment){var f=d;c=f.worldVerticesLength,p=y.Utils.setArraySize(n,c,0),f.computeWorldVertices(h,0,c,p,0,2)}if(null!=p)for(var m=0,g=p.length;m<g;m+=2){var _=p[m],v=p[m+1];i=Math.min(i,_),o=Math.min(o,v),a=Math.max(a,_),s=Math.max(s,v)}}t.set(i,o),e.set(a-i,s-o)},t.prototype.update=function(t){this.time+=t},t}(),y.Skeleton=e}(pixi_spine||(pixi_spine={})),function(t){var p,e;p=t.core||(t.core={}),e=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new p.Pool(function(){return p.Utils.newFloatArray(16)})}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,o=t.slots,a=o.length;n.length=0,i.freeAll(r);for(var s=r.length=0;s<a;s++){var l=o[s],u=l.getAttachment();if(u instanceof p.BoundingBoxAttachment){var h=u;n.push(h);var c=i.obtain();c.length!=h.worldVerticesLength&&(c=p.Utils.newFloatArray(h.worldVerticesLength)),r.push(c),h.computeWorldVertices(l,0,h.worldVerticesLength,c,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,o=0,a=i.length;o<a;o++)for(var s=i[o],l=s,u=0,h=s.length;u<h;u+=2){var c=l[u],p=l[u+1];t=Math.min(t,c),e=Math.min(e,p),n=Math.max(n,c),r=Math.max(r,p)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,n,r){var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(t<=i&&n<=i||e<=o&&r<=o||a<=t&&a<=n||s<=e&&s<=r)return!1;var l=(r-e)/(n-t),u=l*(i-t)+e;if(o<u&&u<s)return!0;if(o<(u=l*(a-t)+e)&&u<s)return!0;var h=(o-e)/l+t;return i<h&&h<a||i<(h=(s-e)/l+t)&&h<a},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,n){for(var r=t,i=t.length,o=i-2,a=!1,s=0;s<i;s+=2){var l=r[s+1],u=r[o+1];if(l<n&&n<=u||u<n&&n<=l){var h=r[s];h+(n-l)/(u-l)*(r[o]-h)<e&&(a=!a)}o=s}return a},t.prototype.intersectsSegment=function(t,e,n,r){for(var i=this.polygons,o=0,a=i.length;o<a;o++)if(this.intersectsSegmentPolygon(i[o],t,e,n,r))return this.boundingBoxes[o];return null},t.prototype.intersectsSegmentPolygon=function(t,e,n,r,i){for(var o=t,a=t.length,s=e-r,l=n-i,u=e*i-n*r,h=o[a-2],c=o[a-1],p=0;p<a;p+=2){var d=o[p],f=o[p+1],m=h*f-c*d,g=h-d,_=c-f,v=s*_-l*g,y=(u*g-s*m)/v;if((h<=y&&y<=d||d<=y&&y<=h)&&(e<=y&&y<=r||r<=y&&y<=e)){var x=(u*_-l*m)/v;if((c<=x&&x<=f||f<=x&&x<=c)&&(n<=x&&x<=i||i<=x&&x<=n))return!0}h=d,c=f}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),p.SkeletonBounds=e}(pixi_spine||(pixi_spine={})),function(t){var z,e;z=t.core||(t.core={}),e=function(){function u(){this.triangulator=new z.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return u.prototype.clipStart=function(t,e){if(null!=this.clipAttachment)return 0;var n=(this.clipAttachment=e).worldVerticesLength,r=z.Utils.setArraySize(this.clippingPolygon,n);e.computeWorldVertices(t,0,n,r,0,2);var i=this.clippingPolygon;u.makeClockwise(i);for(var o=this.clippingPolygons=this.triangulator.decompose(i,this.triangulator.triangulate(i)),a=0,s=o.length;a<s;a++){var l=o[a];u.makeClockwise(l),l.push(l[0]),l.push(l[1])}return o.length},u.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},u.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},u.prototype.isClipping=function(){return null!=this.clipAttachment},u.prototype.clipTriangles=function(t,e,n,r,i,o,a,s){var l=this.clipOutput,u=this.clippedVertices,h=this.clippedTriangles,c=this.clippingPolygons,p=this.clippingPolygons.length,d=s?12:8,f=0;u.length=0;t:for(var m=h.length=0;m<r;m+=3)for(var g=n[m]<<1,_=t[g],v=t[g+1],y=i[g],x=i[g+1],b=t[g=n[m+1]<<1],w=t[g+1],A=i[g],T=i[g+1],I=t[g=n[m+2]<<1],P=t[g+1],M=i[g],E=i[g+1],S=0;S<p;S++){var C=u.length;if(!this.clip(_,v,b,w,I,P,c[S],l)){(X=z.Utils.setArraySize(u,C+3*d))[C]=_,X[C+1]=v,X[C+2]=o.r,X[C+3]=o.g,X[C+4]=o.b,X[C+5]=o.a,s?(X[C+6]=y,X[C+7]=x,X[C+8]=a.r,X[C+9]=a.g,X[C+10]=a.b,X[C+11]=a.a,X[C+12]=b,X[C+13]=w,X[C+14]=o.r,X[C+15]=o.g,X[C+16]=o.b,X[C+17]=o.a,X[C+18]=A,X[C+19]=T,X[C+20]=a.r,X[C+21]=a.g,X[C+22]=a.b,X[C+23]=a.a,X[C+24]=I,X[C+25]=P,X[C+26]=o.r,X[C+27]=o.g,X[C+28]=o.b,X[C+29]=o.a,X[C+30]=M,X[C+31]=E,X[C+32]=a.r,X[C+33]=a.g,X[C+34]=a.b,X[C+35]=a.a):(X[C+6]=y,X[C+7]=x,X[C+8]=b,X[C+9]=w,X[C+10]=o.r,X[C+11]=o.g,X[C+12]=o.b,X[C+13]=o.a,X[C+14]=A,X[C+15]=T,X[C+16]=I,X[C+17]=P,X[C+18]=o.r,X[C+19]=o.g,X[C+20]=o.b,X[C+21]=o.a,X[C+22]=M,X[C+23]=E),C=h.length,(K=z.Utils.setArraySize(h,C+3))[C]=f,K[C+1]=f+1,K[C+2]=f+2,f+=3;continue t}var O=l.length;if(0!=O){for(var R=w-P,k=I-b,D=_-I,N=P-v,L=1/(R*D+k*(v-P)),V=O>>1,B=this.clipOutput,X=z.Utils.setArraySize(u,C+V*d),F=0;F<O;F+=2){var U=B[F],j=B[F+1];X[C]=U,X[C+1]=j,X[C+2]=o.r,X[C+3]=o.g,X[C+4]=o.b,X[C+5]=o.a;var G=U-I,Y=j-P,W=(R*G+k*Y)*L,H=(N*G+D*Y)*L,q=1-W-H;X[C+6]=y*W+A*H+M*q,X[C+7]=x*W+T*H+E*q,s&&(X[C+8]=a.r,X[C+9]=a.g,X[C+10]=a.b,X[C+11]=a.a),C+=d}C=h.length;var K=z.Utils.setArraySize(h,C+3*(V-2));V--;for(F=1;F<V;F++)K[C]=f,K[C+1]=f+F,K[C+2]=f+F+1,C+=3;f+=V+1}}},u.prototype.clip=function(t,e,n,r,i,o,a,s){var l=s,u=!1,h=null;2<=a.length%4?(h=s,s=this.scratch):h=this.scratch,h.length=0,h.push(t),h.push(e),h.push(n),h.push(r),h.push(i),h.push(o),h.push(t),h.push(e),s.length=0;for(var c=a,p=a.length-4,d=0;;d+=2){for(var f=c[d],m=c[d+1],g=c[d+2],_=c[d+3],v=f-g,y=m-_,x=h,b=h.length-2,w=s.length,A=0;A<b;A+=2){var T=x[A],I=x[A+1],P=x[A+2],M=x[A+3],E=0<v*(M-_)-y*(P-g);if(0<v*(I-_)-y*(T-g)){if(E){s.push(P),s.push(M);continue}var S=((O=P-T)*(m-I)-(C=M-I)*(f-T))/(C*(g-f)-O*(_-m));s.push(f+(g-f)*S),s.push(m+(_-m)*S)}else if(E){var C,O;S=((O=P-T)*(m-I)-(C=M-I)*(f-T))/(C*(g-f)-O*(_-m));s.push(f+(g-f)*S),s.push(m+(_-m)*S),s.push(P),s.push(M)}u=!0}if(w==s.length)return!(l.length=0);if(s.push(s[0]),s.push(s[1]),d==p)break;var R=s;(s=h).length=0,h=R}if(l!=s){d=l.length=0;for(var k=s.length-2;d<k;d++)l[d]=s[d]}else l.length=l.length-2;return u},u.makeClockwise=function(t){for(var e=t,n=t.length,r=e[n-2]*e[1]-e[0]*e[n-1],i=0,o=0,a=0,s=0,l=n-3;s<l;s+=2)i=e[s],o=e[s+1],a=e[s+2],r+=i*e[s+3]-a*o;if(!(r<0)){s=0;var u=n-2;for(l=n>>1;s<l;s+=2){var h=e[s],c=e[s+1],p=u-s;e[s]=e[p],e[s+1]=e[p+1],e[p]=h,e[p+1]=c}}},u}(),z.SkeletonClipping=e}(pixi_spine||(pixi_spine={})),function(t){var e,n;e=t.core||(t.core={}),n=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t}(),e.SkeletonData=n}(pixi_spine||(pixi_spine={})),function(t){!function($){var t=function(){function k(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return k.prototype.readSkeletonData=function(t){var e=this.scale,n=new $.SkeletonData,r="string"==typeof t?JSON.parse(t):t,i=r.skeleton;if(null!=i&&(n.hash=i.hash,n.version=i.spine,n.width=i.width,n.height=i.height,n.fps=i.fps,n.imagesPath=i.images),r.bones)for(var o=0;o<r.bones.length;o++){var a=r.bones[o],s=null,l=this.getValue(a,"parent",null);if(null!=l&&null==(s=n.findBone(l)))throw new Error("Parent bone not found: "+l);(p=new $.BoneData(n.bones.length,a.name,s)).length=this.getValue(a,"length",0)*e,p.x=this.getValue(a,"x",0)*e,p.y=this.getValue(a,"y",0)*e,p.rotation=this.getValue(a,"rotation",0),p.scaleX=this.getValue(a,"scaleX",1),p.scaleY=this.getValue(a,"scaleY",1),p.shearX=this.getValue(a,"shearX",0),p.shearY=this.getValue(a,"shearY",0),p.transformMode=k.transformModeFromString(this.getValue(a,"transform","normal")),n.bones.push(p)}if(r.slots)for(o=0;o<r.slots.length;o++){var u=(A=r.slots[o]).name,h=A.bone,c=n.findBone(h);if(null==c)throw new Error("Slot bone not found: "+h);var p=new $.SlotData(n.slots.length,u,c),d=this.getValue(A,"color",null);null!=d&&p.color.setFromString(d);var f=this.getValue(A,"dark",null);null!=f&&(p.darkColor=new $.Color(1,1,1,1),p.darkColor.setFromString(f)),p.attachmentName=this.getValue(A,"attachment",null),p.blendMode=k.blendModeFromString(this.getValue(A,"blend","normal")),n.slots.push(p)}if(r.ik)for(o=0;o<r.ik.length;o++){var m=r.ik[o];(p=new $.IkConstraintData(m.name)).order=this.getValue(m,"order",0);for(var g=0;g<m.bones.length;g++){h=m.bones[g];if(null==(v=n.findBone(h)))throw new Error("IK bone not found: "+h);p.bones.push(v)}var _=m.target;if(p.target=n.findBone(_),null==p.target)throw new Error("IK target bone not found: "+_);p.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,p.mix=this.getValue(m,"mix",1),n.ikConstraints.push(p)}if(r.transform)for(o=0;o<r.transform.length;o++){m=r.transform[o];(p=new $.TransformConstraintData(m.name)).order=this.getValue(m,"order",0);for(g=0;g<m.bones.length;g++){h=m.bones[g];if(null==(v=n.findBone(h)))throw new Error("Transform constraint bone not found: "+h);p.bones.push(v)}_=m.target;if(p.target=n.findBone(_),null==p.target)throw new Error("Transform constraint target bone not found: "+_);p.local=this.getValue(m,"local",!1),p.relative=this.getValue(m,"relative",!1),p.offsetRotation=this.getValue(m,"rotation",0),p.offsetX=this.getValue(m,"x",0)*e,p.offsetY=this.getValue(m,"y",0)*e,p.offsetScaleX=this.getValue(m,"scaleX",0),p.offsetScaleY=this.getValue(m,"scaleY",0),p.offsetShearY=this.getValue(m,"shearY",0),p.rotateMix=this.getValue(m,"rotateMix",1),p.translateMix=this.getValue(m,"translateMix",1),p.scaleMix=this.getValue(m,"scaleMix",1),p.shearMix=this.getValue(m,"shearMix",1),n.transformConstraints.push(p)}if(r.path)for(o=0;o<r.path.length;o++){m=r.path[o];(p=new $.PathConstraintData(m.name)).order=this.getValue(m,"order",0);for(g=0;g<m.bones.length;g++){var v;h=m.bones[g];if(null==(v=n.findBone(h)))throw new Error("Transform constraint bone not found: "+h);p.bones.push(v)}_=m.target;if(p.target=n.findSlot(_),null==p.target)throw new Error("Path target slot not found: "+_);p.positionMode=k.positionModeFromString(this.getValue(m,"positionMode","percent")),p.spacingMode=k.spacingModeFromString(this.getValue(m,"spacingMode","length")),p.rotateMode=k.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),p.offsetRotation=this.getValue(m,"rotation",0),p.position=this.getValue(m,"position",0),p.positionMode==$.PositionMode.Fixed&&(p.position*=e),p.spacing=this.getValue(m,"spacing",0),p.spacingMode!=$.SpacingMode.Length&&p.spacingMode!=$.SpacingMode.Fixed||(p.spacing*=e),p.rotateMix=this.getValue(m,"rotateMix",1),p.translateMix=this.getValue(m,"translateMix",1),n.pathConstraints.push(p)}if(r.skins)for(var y in r.skins){var x=r.skins[y],b=new $.Skin(y);for(var u in x){var w=n.findSlotIndex(u);if(-1==w)throw new Error("Slot not found: "+u);var A=x[u];for(var T in A){var I=this.readAttachment(A[T],b,w,T,n);null!=I&&b.addAttachment(w,T,I)}}n.skins.push(b),"default"==b.name&&(n.defaultSkin=b)}o=0;for(var P=this.linkedMeshes.length;o<P;o++){var M=this.linkedMeshes[o];if(null==(b=null==M.skin?n.defaultSkin:n.findSkin(M.skin)))throw new Error("Skin not found: "+M.skin);var E=b.getAttachment(M.slotIndex,M.parent);if(null==E)throw new Error("Parent mesh not found: "+M.parent);M.mesh.setParentMesh(E)}if(this.linkedMeshes.length=0,r.events)for(var S in r.events){var C=r.events[S];(p=new $.EventData(S)).intValue=this.getValue(C,"int",0),p.floatValue=this.getValue(C,"float",0),p.stringValue=this.getValue(C,"string",""),n.events.push(p)}if(r.animations)for(var O in r.animations){var R=r.animations[O];this.readAnimation(R,O,n)}return n},k.prototype.readAttachment=function(t,e,n,r,i){var o=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var a=this.getValue(t,"path",r),s=this.attachmentLoader.newRegionAttachment(e,r,a);return null==s?null:(s.path=a,s.x=this.getValue(t,"x",0)*o,s.y=this.getValue(t,"y",0)*o,s.scaleX=this.getValue(t,"scaleX",1),s.scaleY=this.getValue(t,"scaleY",1),s.rotation=this.getValue(t,"rotation",0),s.width=t.width*o,s.height=t.height*o,null!=(y=this.getValue(t,"color",null))&&s.color.setFromString(y),s);case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==l?null:(this.readVertices(t,l,t.vertexCount<<1),null!=(y=this.getValue(t,"color",null))&&l.color.setFromString(y),l);case"mesh":case"linkedmesh":a=this.getValue(t,"path",r);var u=this.attachmentLoader.newMeshAttachment(e,r,a);if(null==u)return null;u.path=a,null!=(y=this.getValue(t,"color",null))&&u.color.setFromString(y);var h=this.getValue(t,"parent",null);if(null!=h)return u.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new x(u,this.getValue(t,"skin",null),n,h)),u;var c=t.uvs;return this.readVertices(t,u,c.length),u.triangles=t.triangles,u.regionUVs=c,u.hullLength=2*this.getValue(t,"hull",0),u;case"path":if(null==(a=this.attachmentLoader.newPathAttachment(e,r)))return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);var p=t.vertexCount;this.readVertices(t,a,p<<1);for(var d=$.Utils.newArray(p/3,0),f=0;f<t.lengths.length;f++)d[f]=t.lengths[f]*o;return a.lengths=d,null!=(y=this.getValue(t,"color",null))&&a.color.setFromString(y),a;case"point":var m=this.attachmentLoader.newPointAttachment(e,r);return null==m?null:(m.x=this.getValue(t,"x",0)*o,m.y=this.getValue(t,"y",0)*o,m.rotation=this.getValue(t,"rotation",0),null!=(y=this.getValue(t,"color",null))&&m.color.setFromString(y),m);case"clipping":var g=this.attachmentLoader.newClippingAttachment(e,r);if(null==g)return null;var _=this.getValue(t,"end",null);if(null!=_){var v=i.findSlot(_);if(null==v)throw new Error("Clipping end slot not found: "+_);g.endSlot=v}var y;p=t.vertexCount;return this.readVertices(t,g,p<<1),null!=(y=this.getValue(t,"color",null))&&g.color.setFromString(y),g}return null},k.prototype.readVertices=function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var i=t.vertices;if(n!=i.length){var o=new Array,a=new Array;for(h=0,c=i.length;h<c;){var s=i[h++];a.push(s);for(var l=h+4*s;h<l;h+=4)a.push(i[h]),o.push(i[h+1]*r),o.push(i[h+2]*r),o.push(i[h+3])}e.bones=a,e.vertices=$.Utils.toFloatArray(o)}else{var u=$.Utils.toFloatArray(i);if(1!=r)for(var h=0,c=i.length;h<c;h++)u[h]*=r;e.vertices=u}},k.prototype.readAnimation=function(t,e,n){var r=this.scale,i=new Array,o=0;if(t.slots)for(var a in t.slots){var s=t.slots[a];if(-1==(K=n.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var l in s){var u=s[l];if("attachment"==l){(y=new $.AttachmentTimeline(u.length)).slotIndex=K;for(var h=0,c=0;c<u.length;c++){var p=u[c];y.setFrame(h++,p.time,p.name)}i.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}else if("color"==l){(y=new $.ColorTimeline(u.length)).slotIndex=K;for(h=0,c=0;c<u.length;c++){p=u[c];var d=new $.Color;d.setFromString(p.color||"ffffffff"),y.setFrame(h,p.time,d.r,d.g,d.b,d.a),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.ColorTimeline.ENTRIES])}else{if("twoColor"!=l)throw new Error("Invalid timeline type for a slot: "+l+" ("+a+")");(y=new $.TwoColorTimeline(u.length)).slotIndex=K;for(h=0,c=0;c<u.length;c++){p=u[c];var f=new $.Color,m=new $.Color;f.setFromString(p.light),m.setFromString(p.dark),y.setFrame(h,p.time,f.r,f.g,f.b,f.a,m.r,m.g,m.b),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.TwoColorTimeline.ENTRIES])}}}if(t.bones)for(var g in t.bones){var _=t.bones[g],v=n.findBoneIndex(g);if(-1==v)throw new Error("Bone not found: "+g);for(var l in _){u=_[l];if("rotate"===l){(y=new $.RotateTimeline(u.length)).boneIndex=v;for(h=0,c=0;c<u.length;c++){p=u[c];y.setFrame(h,p.time,p.angle),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.RotateTimeline.ENTRIES])}else{if("translate"!==l&&"scale"!==l&&"shear"!==l)throw new Error("Invalid timeline type for a bone: "+l+" ("+g+")");var y=null,x=1;"scale"===l?y=new $.ScaleTimeline(u.length):"shear"===l?y=new $.ShearTimeline(u.length):(y=new $.TranslateTimeline(u.length),x=r),y.boneIndex=v;for(h=0,c=0;c<u.length;c++){p=u[c];var b=this.getValue(p,"x",0),w=this.getValue(p,"y",0);y.setFrame(h,p.time,b*x,w*x),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.TranslateTimeline.ENTRIES])}}}if(t.ik)for(var A in t.ik){var T=t.ik[A],I=n.findIkConstraint(A);(y=new $.IkConstraintTimeline(T.length)).ikConstraintIndex=n.ikConstraints.indexOf(I);for(h=0,c=0;c<T.length;c++){p=T[c];y.setFrame(h,p.time,this.getValue(p,"mix",1),this.getValue(p,"bendPositive",!0)?1:-1),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.IkConstraintTimeline.ENTRIES])}if(t.transform)for(var A in t.transform){T=t.transform[A],I=n.findTransformConstraint(A);(y=new $.TransformConstraintTimeline(T.length)).transformConstraintIndex=n.transformConstraints.indexOf(I);for(h=0,c=0;c<T.length;c++){p=T[c];y.setFrame(h,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.TransformConstraintTimeline.ENTRIES])}if(t.paths)for(var A in t.paths){T=t.paths[A];var P=n.findPathConstraintIndex(A);if(-1==P)throw new Error("Path constraint not found: "+A);var M=n.pathConstraints[P];for(var l in T){u=T[l];if("position"===l||"spacing"===l){y=null,x=1;"spacing"===l?(y=new $.PathConstraintSpacingTimeline(u.length),M.spacingMode!=$.SpacingMode.Length&&M.spacingMode!=$.SpacingMode.Fixed||(x=r)):(y=new $.PathConstraintPositionTimeline(u.length),M.positionMode==$.PositionMode.Fixed&&(x=r)),y.pathConstraintIndex=P;for(h=0,c=0;c<u.length;c++){p=u[c];y.setFrame(h,p.time,this.getValue(p,l,0)*x),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===l){(y=new $.PathConstraintMixTimeline(u.length)).pathConstraintIndex=P;for(h=0,c=0;c<u.length;c++){p=u[c];y.setFrame(h,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*$.PathConstraintMixTimeline.ENTRIES])}}}if(t.deform)for(var E in t.deform){var S=t.deform[E],C=n.findSkin(E);if(null==C)throw new Error("Skin not found: "+E);for(var a in S){s=S[a];if(-1==(K=n.findSlotIndex(a)))throw new Error("Slot not found: "+s.name);for(var l in s){u=s[l];var O=C.getAttachment(K,l);if(null==O)throw new Error("Deform attachment not found: "+u.name);var R=null!=O.bones,k=O.vertices,D=R?k.length/3*2:k.length;(y=new $.DeformTimeline(u.length)).slotIndex=K,y.attachment=O;h=0;for(var N=0;N<u.length;N++){p=u[N];var L=void 0,V=this.getValue(p,"vertices",null);if(null==V)L=R?$.Utils.newFloatArray(D):k;else{L=$.Utils.newFloatArray(D);var B=this.getValue(p,"offset",0);if($.Utils.arrayCopy(V,0,L,B,V.length),1!=r)for(var X=(c=B)+V.length;c<X;c++)L[c]*=r;if(!R)for(c=0;c<D;c++)L[c]+=k[c]}y.setFrame(h,p.time,L),this.readCurve(p,y,h),h++}i.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}}}var F=t.drawOrder;if(null==F&&(F=t.draworder),null!=F){y=new $.DrawOrderTimeline(F.length);var U=n.slots.length;for(h=0,N=0;N<F.length;N++){var j=F[N],G=null,Y=this.getValue(j,"offsets",null);if(null!=Y){G=$.Utils.newArray(U,-1);var W=$.Utils.newArray(U-Y.length,0),H=0,q=0;for(c=0;c<Y.length;c++){var K,z=Y[c];if(-1==(K=n.findSlotIndex(z.slot)))throw new Error("Slot not found: "+z.slot);for(;H!=K;)W[q++]=H++;G[H+z.offset]=H++}for(;H<U;)W[q++]=H++;for(c=U-1;0<=c;c--)-1==G[c]&&(G[c]=W[--q])}y.setFrame(h++,j.time,G)}i.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}if(t.events){for(y=new $.EventTimeline(t.events.length),h=0,c=0;c<t.events.length;c++){var Z=t.events[c],J=n.findEvent(Z.name);if(null==J)throw new Error("Event not found: "+Z.name);var Q=new $.Event($.Utils.toSinglePrecision(Z.time),J);Q.intValue=this.getValue(Z,"int",J.intValue),Q.floatValue=this.getValue(Z,"float",J.floatValue),Q.stringValue=this.getValue(Z,"string",J.stringValue),y.setFrame(h++,Q)}i.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new $.Animation(e,i,o))},k.prototype.readCurve=function(t,e,n){if(t.curve)if("stepped"===t.curve)e.setStepped(n);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var r=t.curve;e.setCurve(n,r[0],r[1],r[2],r[3])}},k.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},k.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.BlendMode.Normal;if("additive"==t)return $.BlendMode.Additive;if("multiply"==t)return $.BlendMode.Multiply;if("screen"==t)return $.BlendMode.Screen;throw new Error("Unknown blend mode: "+t)},k.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return $.PositionMode.Fixed;if("percent"==t)return $.PositionMode.Percent;throw new Error("Unknown position mode: "+t)},k.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return $.SpacingMode.Length;if("fixed"==t)return $.SpacingMode.Fixed;if("percent"==t)return $.SpacingMode.Percent;throw new Error("Unknown position mode: "+t)},k.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return $.RotateMode.Tangent;if("chain"==t)return $.RotateMode.Chain;if("chainscale"==t)return $.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+t)},k.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return $.TransformMode.Normal;if("onlytranslation"==t)return $.TransformMode.OnlyTranslation;if("norotationorreflection"==t)return $.TransformMode.NoRotationOrReflection;if("noscale"==t)return $.TransformMode.NoScale;if("noscaleorreflection"==t)return $.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},k}();$.SkeletonJson=t;var x=function(t,e,n,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r}}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){var e,n;e=t.core||(t.core={}),n=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n},t.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},t.prototype.attachAll=function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var i=t.slots[r],o=i.getAttachment();if(o&&n<e.attachments.length){var a=e.attachments[n];for(var s in a){if(o==a[s]){var l=this.getAttachment(n,name);null!=l&&i.setAttachment(l);break}}}n++}},t}(),e.Skin=n}(pixi_spine||(pixi_spine={})),function(t){var n,e;n=t.core||(t.core={}),e=function(){function t(t,e){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new n.Color,this.darkColor=null==t.darkColor?null:new n.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),n.Slot=e}(pixi_spine||(pixi_spine={})),function(t){var r,e;r=t.core||(t.core={}),e=function(t,e,n){if(this.color=new r.Color(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n},r.SlotData=e}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e,n,r,i,o=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=o,(n=e=t.TextureFilter||(t.TextureFilter={}))[n.Nearest=9728]="Nearest",n[n.Linear=9729]="Linear",n[n.MipMap=9987]="MipMap",n[n.MipMapNearestNearest=9984]="MipMapNearestNearest",n[n.MipMapLinearNearest=9985]="MipMapLinearNearest",n[n.MipMapNearestLinear=9986]="MipMapNearestLinear",n[n.MipMapLinearLinear=9987]="MipMapLinearLinear",(i=r=t.TextureWrap||(t.TextureWrap={}))[i.MirroredRepeat=33648]="MirroredRepeat",i[i.ClampToEdge=33071]="ClampToEdge",i[i.Repeat=10497]="Repeat";var a=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t}();t.TextureRegion=a}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(I){var t=function(){function t(t,e,n){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,n)}return t.prototype.addTexture=function(t,e){for(var n=this.pages,r=null,i=0;i<n.length;i++)if(n[i].baseTexture===e.baseTexture){r=n[i];break}if(null===r){(r=new P).name="texturePage";var o=e.baseTexture;r.width=o.realWidth,r.height=o.realHeight,r.baseTexture=o,r.minFilter=r.magFilter=I.TextureFilter.Nearest,r.uWrap=I.TextureWrap.ClampToEdge,r.vWrap=I.TextureWrap.ClampToEdge,n.push(r)}var a=new M;return a.name=t,a.page=r,a.texture=e,a.index=-1,this.regions.push(a),a},t.prototype.addTextureHash=function(t,e){for(var n in t)t.hasOwnProperty(n)&&this.addTexture(e&&-1!==n.indexOf(".")?n.substr(0,n.lastIndexOf(".")):n,t[n])},t.prototype.addSpineAtlas=function(t,e,n){return this.load(t,e,n)},t.prototype.load=function(t,v,y){var x=this;if(null==v)throw new Error("textureLoader cannot be null.");var b=new e(t),w=new Array(4),A=null,T=function(){for(;;){var t=b.readLine();if(null==t)return y&&y(x);if(0==(t=t.trim()).length)A=null;else{if(!A){(A=new P).name=t,2==b.readTuple(w)&&(A.width=parseInt(w[0]),A.height=parseInt(w[1]),b.readTuple(w)),b.readTuple(w),A.minFilter=I.Texture.filterFromString(w[0]),A.magFilter=I.Texture.filterFromString(w[1]);var e=b.readValue();A.uWrap=I.TextureWrap.ClampToEdge,A.vWrap=I.TextureWrap.ClampToEdge,"x"==e?A.uWrap=I.TextureWrap.Repeat:"y"==e?A.vWrap=I.TextureWrap.Repeat:"xy"==e&&(A.uWrap=A.vWrap=I.TextureWrap.Repeat),v(t,function(t){(A.baseTexture=t).valid||(t.width=A.width,t.height=A.height),x.pages.push(A),A.setFilters(),A.width&&A.height||(A.width=t.realWidth,A.height=t.realHeight,A.width&&A.height||console.log("ERROR spine atlas page "+A.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),T()}),x.pages.push(A);break}var n=new M;n.name=t,n.page=A;var r="true"==b.readValue()?6:0;b.readTuple(w);var i=parseInt(w[0]),o=parseInt(w[1]);b.readTuple(w);var a=parseInt(w[0]),s=parseInt(w[1]),l=A.baseTexture.resolution;i/=l,o/=l,a/=l,s/=l;var u=new PIXI.Rectangle(i,o,r?s:a,r?a:s);4==b.readTuple(w)&&4==b.readTuple(w)&&b.readTuple(w);var h=parseInt(w[0])/l,c=parseInt(w[1])/l;b.readTuple(w);var p=parseInt(w[0])/l,d=parseInt(w[1])/l,f=new PIXI.Rectangle(0,0,h,c),m=new PIXI.Rectangle(p,c-s-d,a,s);if("3"!=PIXI.VERSION[0])n.texture=new PIXI.Texture(n.page.baseTexture,u,f,m,r);else{var g=new PIXI.Rectangle(i,o,a,s),_=g.clone();m.width=h,m.height=c,n.texture=new PIXI.Texture(n.page.baseTexture,g,_,m,r)}n.index=parseInt(b.readValue()),n.texture.updateUvs(),x.regions.push(n)}}};T()},t.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},t.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},t}();I.TextureAtlas=t;var e=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),n=e.indexOf(":");if(-1==n)throw new Error("Invalid line: "+e);for(var r=0,i=n+1;r<3;r++){var o=e.indexOf(",",i);if(-1==o)break;t[r]=e.substr(i,o-i).trim(),i=o+1}return t[r]=e.substring(i).trim(),r+1},t}(),P=function(){function t(){}return t.prototype.setFilters=function(){var t=this.baseTexture,e=this.minFilter;e==I.TextureFilter.Linear?t.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==I.TextureFilter.Nearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:(t.mipmap=!0,e==I.TextureFilter.MipMapNearestNearest?t.scaleMode=PIXI.SCALE_MODES.NEAREST:t.scaleMode=PIXI.SCALE_MODES.LINEAR)},t}();I.TextureAtlasPage=P;var M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(I.TextureRegion);I.TextureAtlasRegion=M}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){var C,e;C=t.core||(t.core={}),e=function(){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new C.Vector2,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,a=o.a,s=o.c,l=o.b,u=o.d,h=0<a*u-s*l?C.MathUtils.degRad:-C.MathUtils.degRad,c=this.data.offsetRotation*h,p=this.data.offsetShearY*h,d=this.bones,f=0,m=d.length;f<m;f++){var g=d[f],_=!1,v=g.matrix;if(0!=t){var y=v.a,x=v.c,b=v.b,w=v.d;(E=Math.atan2(l,a)-Math.atan2(b,y)+c)>C.MathUtils.PI?E-=C.MathUtils.PI2:E<-C.MathUtils.PI&&(E+=C.MathUtils.PI2),E*=t;var A=Math.cos(E),T=Math.sin(E);v.a=A*y-T*b,v.c=A*x-T*w,v.b=T*y+A*b,v.d=T*x+A*w,_=!0}if(0!=e){var I=this.temp;i.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),v.tx+=(I.x-v.tx)*e,v.ty+=(I.y-v.ty)*e,_=!0}if(0<n){var P=Math.sqrt(v.a*v.a+v.b*v.b),M=Math.sqrt(a*a+l*l);1e-5<P&&(P=(P+(M-P+this.data.offsetScaleX)*n)/P),v.a*=P,v.b*=P,P=Math.sqrt(v.c*v.c+v.d*v.d),M=Math.sqrt(s*s+u*u),1e-5<P&&(P=(P+(M-P+this.data.offsetScaleY)*n)/P),v.c*=P,v.d*=P,_=!0}if(0<r){x=v.c,w=v.d;var E,S=Math.atan2(w,x);(E=Math.atan2(u,s)-Math.atan2(l,a)-(S-Math.atan2(v.b,v.a)))>C.MathUtils.PI?E-=C.MathUtils.PI2:E<-C.MathUtils.PI&&(E+=C.MathUtils.PI2),E=S+(E+p)*r;P=Math.sqrt(x*x+w*w);v.c=Math.cos(E)*P,v.d=Math.sin(E)*P,_=!0}_&&(g.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,a=o.a,s=o.c,l=o.b,u=o.d,h=0<a*u-s*l?C.MathUtils.degRad:-C.MathUtils.degRad,c=this.data.offsetRotation*h,p=this.data.offsetShearY*h,d=this.bones,f=0,m=d.length;f<m;f++){var g=d[f],_=!1,v=g.matrix;if(0!=t){var y=v.a,x=v.c,b=v.b,w=v.d;(M=Math.atan2(l,a)+c)>C.MathUtils.PI?M-=C.MathUtils.PI2:M<-C.MathUtils.PI&&(M+=C.MathUtils.PI2),M*=t;var A=Math.cos(M),T=Math.sin(M);v.a=A*y-T*b,v.c=A*x-T*w,v.b=T*y+A*b,v.d=T*x+A*w,_=!0}if(0!=e){var I=this.temp;i.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),v.tx+=I.x*e,v.ty+=I.y*e,_=!0}if(0<n){var P=(Math.sqrt(a*a+l*l)-1+this.data.offsetScaleX)*n+1;v.a*=P,v.b*=P,P=(Math.sqrt(s*s+u*u)-1+this.data.offsetScaleY)*n+1,v.c*=P,v.d*=P,_=!0}if(0<r){var M;(M=Math.atan2(u,s)-Math.atan2(l,a))>C.MathUtils.PI?M-=C.MathUtils.PI2:M<-C.MathUtils.PI&&(M+=C.MathUtils.PI2);x=v.c,w=v.d;M=Math.atan2(w,x)+(M-C.MathUtils.PI/2+p)*r;P=Math.sqrt(x*x+w*w);v.c=Math.cos(M)*P,v.d=Math.sin(M)*P,_=!0}_&&(g.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var l=o[a];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;if(0!=t){var h=i.arotation-u+this.data.offsetRotation;u+=(h-=360*(16384-(16384.499999999996-h/360|0)))*t}var c=l.ax,p=l.ay;0!=e&&(c+=(i.ax-c+this.data.offsetX)*e,p+=(i.ay-p+this.data.offsetY)*e);var d=l.ascaleX,f=l.ascaleY;0<n&&(1e-5<d&&(d=(d+(i.ascaleX-d+this.data.offsetScaleX)*n)/d),1e-5<f&&(f=(f+(i.ascaleY-f+this.data.offsetScaleY)*n)/f));var m=l.ashearY;if(0<r){h=i.ashearY-m+this.data.offsetShearY;h-=360*(16384-(16384.499999999996-h/360|0)),l.shearY+=h*r}l.updateWorldTransformWith(c,p,u,d,f,l.ashearX,m)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var l=o[a];l.appliedValid||l.updateAppliedTransform();var u=l.arotation;0!=t&&(u+=(i.arotation+this.data.offsetRotation)*t);var h=l.ax,c=l.ay;0!=e&&(h+=(i.ax+this.data.offsetX)*e,c+=(i.ay+this.data.offsetY)*e);var p=l.ascaleX,d=l.ascaleY;0<n&&(1e-5<p&&(p*=(i.ascaleX-1+this.data.offsetScaleX)*n+1),1e-5<d&&(d*=(i.ascaleY-1+this.data.offsetScaleY)*n+1));var f=l.ashearY;0<r&&(f+=(i.ashearY+this.data.offsetShearY)*r),l.updateWorldTransformWith(h,c,u,p,d,l.ashearX,f)}},t.prototype.getOrder=function(){return this.data.order},t}(),C.TransformConstraint=e}(pixi_spine||(pixi_spine={})),function(t){var e;e=function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t},(t.core||(t.core={})).TransformConstraintData=e}(pixi_spine||(pixi_spine={})),function(t){var e,n;e=t.core||(t.core={}),n=function(){function U(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new e.Pool(function(){return new Array}),this.polygonIndicesPool=new e.Pool(function(){return new Array})}return U.prototype.triangulate=function(t){for(var e=t,n=t.length>>1,r=this.indicesArray,i=r.length=0;i<n;i++)r[i]=i;for(var o=this.isConcaveArray,a=(i=o.length=0,n);i<a;++i)o[i]=U.isConcave(i,n,e,r);var s=this.triangles;for(s.length=0;3<n;){for(var l=n-1,u=(i=0,1);;){t:if(!o[i]){for(var h=r[l]<<1,c=r[i]<<1,p=r[u]<<1,d=e[h],f=e[h+1],m=e[c],g=e[c+1],_=e[p],v=e[p+1],y=(u+1)%n;y!=l;y=(y+1)%n)if(o[y]){var x=r[y]<<1,b=e[x],w=e[x+1];if(U.positiveArea(_,v,d,f,b,w)&&U.positiveArea(d,f,m,g,b,w)&&U.positiveArea(m,g,_,v,b,w))break t}break}if(0==u){do{if(!o[i])break;i--}while(0<i);break}l=i,u=((i=u)+1)%n}s.push(r[(n+i-1)%n]),s.push(r[i]),s.push(r[(i+1)%n]),r.splice(i,1),o.splice(i,1);var A=(--n+i-1)%n,T=i==n?0:i;o[A]=U.isConcave(A,n,e,r),o[T]=U.isConcave(T,n,e,r)}return 3==n&&(s.push(r[2]),s.push(r[0]),s.push(r[1])),s},U.prototype.decompose=function(t,e){var n=t,r=this.convexPolygons;this.polygonPool.freeAll(r),r.length=0;var i=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(i),i.length=0;var o=this.polygonIndicesPool.obtain();o.length=0;for(var a=this.polygonPool.obtain(),s=-1,l=a.length=0,u=0,h=e.length;u<h;u+=3){var c=e[u]<<1,p=e[u+1]<<1,d=e[u+2]<<1,f=n[c],m=n[c+1],g=n[p],_=n[p+1],v=n[d],y=n[d+1],x=!1;if(s==c){var b=a.length-4,w=U.winding(a[b],a[b+1],a[b+2],a[b+3],v,y),A=U.winding(v,y,a[0],a[1],a[2],a[3]);w==l&&A==l&&(a.push(v),a.push(y),o.push(d),x=!0)}x||(0<a.length?(r.push(a),i.push(o)):(this.polygonPool.free(a),this.polygonIndicesPool.free(o)),(a=this.polygonPool.obtain()).length=0,a.push(f),a.push(m),a.push(g),a.push(_),a.push(v),a.push(y),(o=this.polygonIndicesPool.obtain()).length=0,o.push(c),o.push(p),o.push(d),l=U.winding(f,m,g,_,v,y),s=c)}0<a.length&&(r.push(a),i.push(o));for(u=0,h=r.length;u<h;u++)if(0!=(o=i[u]).length)for(var T=o[0],I=o[o.length-1],P=(a=r[u])[b=a.length-4],M=a[b+1],E=a[b+2],S=a[b+3],C=a[0],O=a[1],R=a[2],k=a[3],D=U.winding(P,M,E,S,C,O),N=0;N<h;N++)if(N!=u){var L=i[N];if(3==L.length){var V=L[0],B=L[1],X=L[2],F=r[N];v=F[F.length-2],y=F[F.length-1];if(V==T&&B==I){w=U.winding(P,M,E,S,v,y),A=U.winding(v,y,C,O,R,k);w==D&&A==D&&(F.length=0,L.length=0,a.push(v),a.push(y),o.push(X),P=E,M=S,E=v,S=y,N=0)}}}for(u=r.length-1;0<=u;u--)0==(a=r[u]).length&&(r.splice(u,1),this.polygonPool.free(a),o=i[u],i.splice(u,1),this.polygonIndicesPool.free(o));return r},U.isConcave=function(t,e,n,r){var i=r[(e+t-1)%e]<<1,o=r[t]<<1,a=r[(t+1)%e]<<1;return!this.positiveArea(n[i],n[i+1],n[o],n[o+1],n[a],n[a+1])},U.positiveArea=function(t,e,n,r,i,o){return 0<=t*(o-r)+n*(e-o)+i*(r-e)},U.winding=function(t,e,n,r,i,o){var a=n-t,s=r-e;return 0<=i*s-o*a+a*e-t*s?1:-1},U}(),e.Triangulator=n}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var n=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.r=t,this.g=e,this.b=n,this.a=r}return t.prototype.set=function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:1<this.r&&(this.r=1),this.g<0?this.g=0:1<this.g&&(this.g=1),this.b<0?this.b=0:1<this.b&&(this.b=1),this.a<0?this.a=0:1<this.a&&(this.a=1),this},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=n;var r=function(){function n(){}return n.clamp=function(t,e,n){return t<e?e:n<t?n:t},n.cosDeg=function(t){return Math.cos(t*n.degRad)},n.sinDeg=function(t){return Math.sin(t*n.degRad)},n.signum=function(t){return 0<t?1:t<0?-1:0},n.toInt=function(t){return 0<t?Math.floor(t):Math.ceil(t)},n.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},n.randomTriangular=function(t,e){return n.randomTriangularWith(t,e,.5*(t+e))},n.randomTriangularWith=function(t,e,n){var r=Math.random(),i=e-t;return r<=(n-t)/i?t+Math.sqrt(r*i*(n-t)):e-Math.sqrt((1-r)*i*(e-n))},n.PI2=2*(n.PI=3.1415927),n.radDeg=n.radiansToDegrees=180/n.PI,n.degRad=n.degreesToRadians=n.PI/180,n}();t.MathUtils=r;var i=function(){function t(){}return t.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)},t}(),o=function(n){function t(t){var e=n.call(this)||this;return e.power=2,e.power=t,e}return __extends(t,n),t.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},t}(t.Interpolation=i),a=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},t}(t.Pow=o);t.PowOut=a;var s=function(){function r(){}return r.arrayCopy=function(t,e,n,r,i){for(var o=e,a=r;o<e+i;o++,a++)n[a]=t[o]},r.setArraySize=function(t,e,n){void 0===n&&(n=0);var r=t.length;if(r==e)return t;if(r<(t.length=e))for(var i=r;i<e;i++)t[i]=n;return t},r.ensureArrayCapacity=function(t,e,n){return void 0===n&&(n=0),t.length>=e?t:r.setArraySize(t,e,n)},r.newArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},r.newFloatArray=function(t){if(r.SUPPORTS_TYPED_ARRAYS)return new Float32Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},r.newShortArray=function(t){if(r.SUPPORTS_TYPED_ARRAYS)return new Int16Array(t);for(var e=new Array(t),n=0;n<e.length;n++)e[n]=0;return e},r.toFloatArray=function(t){return r.SUPPORTS_TYPED_ARRAYS?new Float32Array(t):t},r.toSinglePrecision=function(t){return r.SUPPORTS_TYPED_ARRAYS?Math.fround(t):t},r.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,r}();t.Utils=s;var l=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=n.matrix;console.log(n.data.name+", "+r.a+", "+r.b+", "+r.c+", "+r.d+", "+r.tx+", "+r.ty)}},t}();t.DebugUtils=l;var u=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return 0<this.items.length?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=u;var h=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=h;var c=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,1<this.frameTime&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=c;var p=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=p}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){var e,n,r;e=t.core||(t.core={}),n=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},r=function(n){function r(t){var e=n.call(this,t)||this;return e.id=(65535&r.nextID++)<<11,e.worldVerticesLength=0,e}return __extends(r,n),r.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},r.prototype.computeWorldVertices=function(t,e,n,r,i,o){n=i+(n>>1)*o;var a=t.bone.skeleton,s=t.attachmentVertices,l=this.vertices,u=this.bones;if(null!=u){for(var h=0,c=0,p=0;p<e;p+=2){h+=(g=u[h])+1,c+=g}var d=a.bones;if(0==s.length)for(E=i,T=3*c;E<n;E+=o){var f=0,m=0,g=u[h++];for(g+=h;h<g;h++,T+=3){x=d[u[h]].matrix,S=l[T],C=l[T+1];var _=l[T+2];f+=(S*x.a+C*x.c+x.tx)*_,m+=(S*x.b+C*x.d+x.ty)*_}r[E]=f,r[E+1]=m}else for(var v=s,y=(E=i,T=3*c,c<<1);E<n;E+=o){f=0,m=0,g=u[h++];for(g+=h;h<g;h++,T+=3,y+=2){x=d[u[h]].matrix,S=l[T]+v[y],C=l[T+1]+v[y+1],_=l[T+2];f+=(S*x.a+C*x.c+x.tx)*_,m+=(S*x.b+C*x.d+x.ty)*_}r[E]=f,r[E+1]=m}}else{0<s.length&&(l=s);for(var x,b=(x=t.bone.matrix).tx,w=x.ty,A=x.a,T=x.c,I=x.b,P=x.d,M=e,E=i;E<n;M+=2,E+=o){var S=l[M],C=l[M+1];r[E]=S*A+C*T+b,r[E+1]=S*I+C*P+w}}},r.prototype.applyDeform=function(t){return this==t},r.nextID=0,r}(e.Attachment=n),e.VertexAttachment=r}(pixi_spine||(pixi_spine={})),function(t){var e,n;e=t.core||(t.core={}),(n=e.AttachmentType||(e.AttachmentType={}))[n.Region=0]="Region",n[n.BoundingBox=1]="BoundingBox",n[n.Mesh=2]="Mesh",n[n.LinkedMesh=3]="LinkedMesh",n[n.Path=4]="Path",n[n.Point=5]="Point"}(pixi_spine||(pixi_spine={})),function(t){var r,e;r=t.core||(t.core={}),e=function(n){function t(t){var e=n.call(this,t)||this;return e.color=new r.Color(1,1,1,1),e}return __extends(t,n),t}(r.VertexAttachment),r.BoundingBoxAttachment=e}(pixi_spine||(pixi_spine={})),function(t){var r,e;r=t.core||(t.core={}),e=function(n){function t(t){var e=n.call(this,t)||this;return e.color=new r.Color(.2275,.2275,.8078,1),e}return __extends(t,n),t}(r.VertexAttachment),r.ClippingAttachment=e}(pixi_spine||(pixi_spine={})),function(t){var d,e;d=t.core||(t.core={}),e=function(n){function t(t){var e=n.call(this,t)||this;return e.color=new d.Color(1,1,1,1),e.inheritDeform=!1,e.tempColor=new d.Color(0,0,0,0),e}return __extends(t,n),t.prototype.updateUVs=function(t,e){var n=this.regionUVs.length;if(e&&e.length==n||(e=d.Utils.newFloatArray(n)),null!=t){for(var r=t.texture._uvs,i=t.width,o=t.height,a=t.originalWidth,s=t.originalHeight,l=t.offsetX,u=t.pixiOffsetY,h=0;h<n;h+=2){var c=this.regionUVs[h],p=this.regionUVs[h+1];c=(c*a-l)/i,p=(p*s-u)/o,e[h]=(r.x0*(1-c)+r.x1*c)*(1-p)+(r.x3*(1-c)+r.x2*c)*p,e[h+1]=(r.y0*(1-c)+r.y1*c)*(1-p)+(r.y3*(1-c)+r.y2*c)*p}return e}},t.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},t.prototype.getParentMesh=function(){return this.parentMesh},t.prototype.setParentMesh=function(t){null!=(this.parentMesh=t)&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},t}(d.VertexAttachment),d.MeshAttachment=e}(pixi_spine||(pixi_spine={})),function(t){var r,e;r=t.core||(t.core={}),e=function(n){function t(t){var e=n.call(this,t)||this;return e.closed=!1,e.constantSpeed=!1,e.color=new r.Color(1,1,1,1),e}return __extends(t,n),t}(r.VertexAttachment),r.PathAttachment=e}(pixi_spine||(pixi_spine={})),function(t){var a,e;a=t.core||(t.core={}),e=function(n){function t(t){var e=n.call(this,t)||this;return e.color=new a.Color(.38,.94,0,1),e}return __extends(t,n),t.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},t.prototype.computeWorldRotation=function(t){var e=t.matrix,n=a.MathUtils.cosDeg(this.rotation),r=a.MathUtils.sinDeg(this.rotation),i=n*e.a+r*e.c,o=n*e.b+r*e.d;return Math.atan2(o,i)*a.MathUtils.radDeg},t}(a.VertexAttachment),a.PointAttachment=e}(pixi_spine||(pixi_spine={})),function(t){var r,e;r=t.core||(t.core={}),e=function(n){function v(t){var e=n.call(this,t)||this;return e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.rotation=0,e.width=0,e.height=0,e.color=new r.Color(1,1,1,1),e.offset=r.Utils.newFloatArray(8),e.uvs=r.Utils.newFloatArray(8),e.tempColor=new r.Color(1,1,1,1),e}return __extends(v,n),v.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,n=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*e,i=n+this.region.width*t,o=r+this.region.height*e,a=this.rotation*Math.PI/180,s=Math.cos(a),l=Math.sin(a),u=n*s+this.x,h=n*l,c=r*s+this.y,p=r*l,d=i*s+this.x,f=i*l,m=o*s+this.y,g=o*l,_=this.offset;_[v.OX1]=u-p,_[v.OY1]=c+h,_[v.OX2]=u-g,_[v.OY2]=m+h,_[v.OX3]=d-g,_[v.OY3]=m+f,_[v.OX4]=d-p,_[v.OY4]=c+f},v.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},v.prototype.computeWorldVertices=function(t,e,n,r){var i=this.offset,o=t.matrix,a=o.tx,s=o.ty,l=o.a,u=o.c,h=o.b,c=o.d,p=0,d=0;p=i[v.OX1],d=i[v.OY1],e[n]=p*l+d*u+a,e[n+1]=p*h+d*c+s,n+=r,p=i[v.OX2],d=i[v.OY2],e[n]=p*l+d*u+a,e[n+1]=p*h+d*c+s,n+=r,p=i[v.OX3],d=i[v.OY3],e[n]=p*l+d*u+a,e[n+1]=p*h+d*c+s,n+=r,p=i[v.OX4],d=i[v.OY4],e[n]=p*l+d*u+a,e[n+1]=p*h+d*c+s},v.OX1=0,v.OY1=1,v.OX2=2,v.OY2=3,v.OX3=4,v.OY3=5,v.OX4=6,v.OY4=7,v.X1=0,v.Y1=1,v.C1R=2,v.C1G=3,v.C1B=4,v.C1A=5,v.U1=6,v.V1=7,v.X2=8,v.Y2=9,v.C2R=10,v.C2G=11,v.C2B=12,v.C2A=13,v.U2=14,v.V2=15,v.X3=16,v.Y3=17,v.C3R=18,v.C3G=19,v.C3B=20,v.C3A=21,v.U3=22,v.V3=23,v.X4=24,v.Y4=25,v.C4R=26,v.C4G=27,v.C4B=28,v.C4A=29,v.U4=30,v.V4=31,v}(r.Attachment),r.RegionAttachment=e}(pixi_spine||(pixi_spine={})),function(t){var i,e;i=t.core||(t.core={}),e=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,n,r){t.x+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY),t.y+=i.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),i.JitterEffect=e}(pixi_spine||(pixi_spine={})),function(t){var p,e;p=t.core||(t.core={}),e=function(){function c(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return c.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},c.prototype.transform=function(t,e,n,r){var i=this.angle*p.MathUtils.degreesToRadians,o=t.x-this.worldX,a=t.y-this.worldY,s=Math.sqrt(o*o+a*a);if(s<this.radius){var l=c.interpolation.apply(0,i,(this.radius-s)/this.radius),u=Math.cos(l),h=Math.sin(l);t.x=u*o-h*a+this.worldX,t.y=h*o+u*a+this.worldY}},c.prototype.end=function(){},c.interpolation=new p.PowOut(2),c}(),p.SwirlEffect=e}(pixi_spine||(pixi_spine={})),function(t){PIXI.spine=t}(pixi_spine||(pixi_spine={})),function(d){var t=function(){function t(){}return t.use=function(n,r){if(!n.data||n.type!==PIXI.LoaderResource.TYPE.JSON||!n.data.bones)return r();var t=n.metadata||{},i=t?n.metadata.spineSkeletonScale:null,e=t?n.metadata.spineAtlas:null;if(!1===e)return r();if(e&&e.pages){var o=new d.core.SkeletonJson(new d.core.AtlasAttachmentLoader(e)).readSkeletonData(n.data);return n.spineData=o,n.spineAtlas=e,r()}var a=t.spineAtlasSuffix||".atlas",s=n.url.substr(0,n.url.lastIndexOf("."))+a;n.metadata&&n.metadata.spineAtlasFile&&(s=n.metadata.spineAtlasFile),s=s.replace(this.baseUrl,"");var l={crossOrigin:n.crossOrigin,xhrType:PIXI.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:t.spineMetadata||null,parentResource:n},u={crossOrigin:n.crossOrigin,metadata:t.imageMetadata||null,parentResource:n},h=n.url.substr(0,n.url.lastIndexOf("/")+1);h=h.replace(this.baseUrl,"");var c=t.images?m(t.images):t.image?m({default:t.image}):t.imageLoader?t.imageLoader(this,n.name+"_atlas_page_",h,u):f(this,n.name+"_atlas_page_",h,u),p=function(t){new d.core.TextureAtlas(t,c,function(t){var e=new d.core.SkeletonJson(new d.core.AtlasAttachmentLoader(t));i&&(e.scale=i),n.spineData=e.readSkeletonData(n.data),n.spineAtlas=t,r()})};n.metadata&&n.metadata.atlasRawData?p(n.metadata.atlasRawData):this.add(n.name+"_atlas",s,l,function(t){p(t.xhr.responseText)})},t}();function f(i,o,a,s){return a&&a.lastIndexOf("/")!==a.length-1&&(a+="/"),function(t,e){var n=o+t,r=a+t;i.add(n,r,s,function(t){e(t.texture.baseTexture)})}}function m(r){return function(t,e){var n=r[t]||r.default;n&&n.baseTexture?e(n.baseTexture):e(n)}}d.AtlasParser=t,d.imageLoaderAdapter=f,d.syncImageLoaderAdapter=function(t,n){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,e){e(PIXI.BaseTexture.from(t,{resourceOptions:{crossOrigin:n}}))}},d.staticImageLoader=m,PIXI.Loader.registerPlugin(t)}(pixi_spine||(pixi_spine={})),function(){var e;Math.fround||(Math.fround=Math.fround=(e=new Float32Array(1),function(t){return e[0]=t,e[0]}))}(),function(M){M.core.Bone.yDown=!0;var E=[0,0,0],n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.region=null,t}return __extends(t,e),t}(PIXI.Sprite);M.SpineSprite=n;var o=function(o){function t(t,e,n,r,i){return o.call(this,t,e,n,r,i)||this}return __extends(t,o),t}(PIXI.Mesh);M.SpineMesh=o;var t=function(h){function e(t){var e=h.call(this)||this;if(!t)throw new Error("The spineData param is required.");if("string"==typeof t)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');e.spineData=t,e.skeleton=new M.core.Skeleton(t),e.skeleton.updateWorldTransform(),e.stateData=new M.core.AnimationStateData(t),e.state=new M.core.AnimationState(e.stateData),e.slotContainers=[],e.tempClipContainers=[];for(var n=0,r=e.skeleton.slots.length;n<r;n++){var i=e.skeleton.slots[n],o=i.attachment,a=e.newContainer();if(e.slotContainers.push(a),e.addChild(a),e.tempClipContainers.push(null),o instanceof M.core.RegionAttachment){var s=o.region.name,l=e.createSprite(i,o,s);i.currentSprite=l,i.currentSpriteName=s,a.addChild(l)}else if(o instanceof M.core.MeshAttachment){var u=e.createMesh(i,o);i.currentMesh=u,i.currentMeshName=o.name,a.addChild(u)}else{if(!(o instanceof M.core.ClippingAttachment))continue;e.createGraphics(i,o),a.addChild(i.clippingContainer),a.addChild(i.currentGraphics)}}return e.autoUpdate=!0,e.tintRgb=new Float32Array([1,1,1]),e}return __extends(e,h),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this.updateTransform===e.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?e.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),e.prototype.update=function(t){this.state.update(t),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();var e=this.skeleton.slots,n=this.color,r=null,i=null;n?(r=n.light,i=n.dark):r=this.tintRgb;for(var o=0,a=e.length;o<a;o++){var s=(I=e[o]).attachment,l=this.slotContainers[o];if(s){var u=null,h=s.color;if(s instanceof M.core.RegionAttachment){var c=s.region;if(c){I.currentMesh&&(I.currentMesh.visible=!1,I.currentMesh=null,I.currentMeshName=void 0);var p=c;if(!I.currentSpriteName||I.currentSpriteName!==p.name){var d=p.name;if(I.currentSprite&&(I.currentSprite.visible=!1),I.sprites=I.sprites||{},void 0!==I.sprites[d])I.sprites[d].visible=!0;else{var f=this.createSprite(I,s,d);l.addChild(f)}I.currentSprite=I.sprites[d],I.currentSpriteName=d}}if(l.transform){l.transform.setFromMatrix(I.bone.matrix)}else{var m=l.localTransform||new PIXI.Matrix;I.bone.matrix.copyTo(m),l.localTransform=m,l.displayObjectUpdateTransform=S}I.currentSprite.color?u=I.currentSprite.color:(E[0]=r[0]*I.color.r*h.r,E[1]=r[1]*I.color.g*h.g,E[2]=r[2]*I.color.b*h.b,I.currentSprite.tint=PIXI.utils.rgb2hex(E)),I.currentSprite.blendMode=I.blendMode}else if(s instanceof M.core.MeshAttachment){if(I.currentSprite&&(I.currentSprite.visible=!1,I.currentSprite=null,I.currentSpriteName=void 0),!I.currentMeshName||I.currentMeshName!==s.name){var g=s.name;if(I.currentMesh&&(I.currentMesh.visible=!1),I.meshes=I.meshes||{},void 0!==I.meshes[g])I.meshes[g].visible=!0;else{var _=this.createMesh(I,s);l.addChild(_)}I.currentMesh=I.meshes[g],I.currentMeshName=g}if(s.computeWorldVerticesOld(I,I.currentMesh.vertices),I.currentMesh.color)u=I.currentMesh.color;else if("3"!==PIXI.VERSION[0]){var v=I.currentMesh.tintRgb;v[0]=r[0]*I.color.r*h.r,v[1]=r[1]*I.color.g*h.g,v[2]=r[2]*I.color.b*h.b}I.currentMesh.blendMode=I.blendMode}else{if(!(s instanceof M.core.ClippingAttachment)){l.visible=!1;continue}I.currentGraphics||(this.createGraphics(I,s),l.addChild(I.clippingContainer),l.addChild(I.currentGraphics)),this.updateGraphics(I,s)}if(l.visible=!0,u){var y=I.color.r*h.r,x=I.color.g*h.g,b=I.color.b*h.b;u.setLight(r[0]*y+i[0]*(1-y),r[1]*x+i[1]*(1-x),r[2]*b+i[2]*(1-b)),b=I.darkColor?(y=I.darkColor.r,x=I.darkColor.g,I.darkColor.b):x=y=0,u.setDark(r[0]*y+i[0]*(1-y),r[1]*x+i[1]*(1-x),r[2]*b+i[2]*(1-b))}l.alpha=I.color.a}else l.visible=!1}var w=this.skeleton.drawOrder,A=null,T=null;for(o=0,a=w.length;o<a;o++){var I=e[w[o].data.index];l=this.slotContainers[w[o].data.index];if(T||l.parent!==this&&(l.parent.removeChild(l),l.parent=this),I.currentGraphics&&I.attachment)T=I.clippingContainer,A=I.attachment,T.children.length=0,this.children[o]=l,A.endSlot==I.data&&(A.endSlot=null);else if(T){var P=this.tempClipContainers[o];P||((P=this.tempClipContainers[o]=this.newContainer()).visible=!1),this.children[o]=P,l.parent=null,T.addChild(l),A.endSlot==I.data&&(T.renderable=!0,A=T=null)}else this.children[o]=l}},e.prototype.setSpriteRegion=function(t,e,n){e.region=n,e.texture=n.texture,n.size?(e.scale.x=n.size.width/n.originalWidth,e.scale.y=-n.size.height/n.originalHeight):(e.scale.x=t.scaleX*t.width/n.originalWidth,e.scale.y=-t.scaleY*t.height/n.originalHeight)},e.prototype.setMeshRegion=function(t,e,n){e.region=n,e.texture=n.texture,n.texture.updateUvs(),t.updateUVs(n,e.uvs),e.dirty++},e.prototype.autoUpdateTransform=function(){if(e.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},e.prototype.createSprite=function(t,e,n){var r=e.region;t.tempAttachment===e&&(r=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var i=r.texture,o=this.newSprite(i);return o.rotation=e.rotation*M.core.MathUtils.degRad,o.anchor.x=.5,o.anchor.y=.5,o.position.x=e.x,o.position.y=e.y,o.alpha=e.color.a,o.region=e.region,this.setSpriteRegion(e,o,e.region),t.sprites=t.sprites||{},t.sprites[n]=o},e.prototype.createMesh=function(t,e){var n=e.region;t.tempAttachment===e&&(n=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var r=this.newMesh(n.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.Mesh.DRAW_MODES.TRIANGLES);return r.alpha=e.color.a,r.region=e.region,this.setMeshRegion(e,r,n),t.meshes=t.meshes||{},t.meshes[e.name]=r},e.prototype.createGraphics=function(t,e){var n=this.newGraphics(),r=new PIXI.Polygon([]);return n.clear(),n.beginFill(16777215,1),n.drawPolygon(r),n.renderable=!1,t.currentGraphics=n,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,n},e.prototype.updateGraphics=function(t,e){var n=t.currentGraphics.graphicsData[0].shape.points,r=e.worldVerticesLength;n.length=r,e.computeWorldVertices(t,0,r,n,0,2),t.currentGraphics.dirty++,t.currentGraphics.clearDirty++},e.prototype.hackTextureBySlotIndex=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=this.skeleton.slots[t];if(!r)return!1;var i=r.attachment,o=i.region;return e&&((o=new M.core.TextureRegion).texture=e,o.size=n),r.currentSprite&&r.currentSprite.region!=o?(this.setSpriteRegion(i,r.currentSprite,o),r.currentSprite.region=o):r.currentMesh&&r.currentMesh.region!=o?this.setMeshRegion(i,r.currentMesh,o):(r.tempRegion=o,r.tempAttachment=i),!0},e.prototype.hackTextureBySlotName=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=this.skeleton.findSlotIndex(t);return-1!=r&&this.hackTextureBySlotIndex(r,e,n)},e.prototype.newContainer=function(){return new PIXI.Container},e.prototype.newSprite=function(t){return new n(t)},e.prototype.newGraphics=function(){return new PIXI.Graphics},e.prototype.newMesh=function(t,e,n,r,i){return new o(t,e,n,r,i)},e.prototype.transformHack=function(){return 1},e.globalAutoUpdate=!0,e.clippingPolygon=[],e}(PIXI.Container);function S(){var t=this.parent.worldTransform,e=this.worldTransform,n=this.localTransform;e.a=n.a*t.a+n.b*t.c,e.b=n.a*t.b+n.b*t.d,e.c=n.c*t.a+n.d*t.c,e.d=n.c*t.b+n.d*t.d,e.tx=n.tx*t.a+n.ty*t.c+t.tx,e.ty=n.tx*t.b+n.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}M.Spine=t}(pixi_spine||(pixi_spine={}));